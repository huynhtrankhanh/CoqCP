<!doctype html>
<html class="alectryon-standalone">
  <head>
    <title>BubbleSortProperties.v</title>
    <meta charset="utf-8" />
    <meta content="Alectryon" name="generator" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="alectryon.css" rel="stylesheet" />
    <link href="pygments.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css"
      integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw=="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css"
      integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA=="
      crossorigin="anonymous"
    />
    <script src="alectryon.js"></script>
  </head>
  <body>
    <article class="alectryon-root alectryon-centered">
      <div class="alectryon-banner">
        Built with
        <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>,
        running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span
          class="alectryon-bubble"
        ></span
        >) indicate interactive fragments: hover for details, tap to reveal
        contents. Use <kbd>Ctrl+â†‘</kbd> <kbd>Ctrl+â†“</kbd> to navigate,
        <kbd>Ctrl+ğŸ–±ï¸</kbd> to focus. On Mac, use <kbd>âŒ˜</kbd> instead of
        <kbd>Ctrl</kbd>.
      </div>
      <pre
        class="alectryon-io highlight"
      ><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk0"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> numbers list.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file ssrmatching_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file ssreflect_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> CoqCP <span class="kn">Require Import</span> Options ListRange SwapUpdate BubbleSort Foldl Comparator PickSmallestInRangeProperties ListDecomposition Sorted ListsEqual.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1"><span class="kn">Lemma</span> <span class="nf">bubbleSortPassPreservesLength</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) : length (bubbleSortPass default <span class="nb">compare</span> l) = length l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortPass default <span class="nb">compare</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortPass default <span class="nb">compare</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk3"><span class="nb">unfold</span> bubbleSortPass.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))) = 
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4"><span class="nb">remember</span> (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)) <span class="kr">as</span> a <span class="nb">eqn</span>:h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>a = seq <span class="mi">0</span> (length l - <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (foldl (compareAndSwap default <span class="nb">compare</span>) l a) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5"><span class="nb">clear</span> h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (foldl (compareAndSwap default <span class="nb">compare</span>) l a) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6"><span class="nb">induction</span> a <span class="kr">as</span> [| head a IH] <span class="kr">in</span> l |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (foldl (compareAndSwap default <span class="nb">compare</span>) l []) =
length l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) _0 a) =
  length _0</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk7"><hr></label><div class="goal-conclusion">length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (head :: a)) = length l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (foldl (compareAndSwap default <span class="nb">compare</span>) l []) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) _0 a) =
  length _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (head :: a)) = length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) _0 a) =
  length _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (foldl (compareAndSwap default <span class="nb">compare</span>)
     (compareAndSwap default <span class="nb">compare</span> l head) a) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb"><span class="nb">rewrite</span> !IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) _0 a) =
  length _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (compareAndSwap default <span class="nb">compare</span> l head) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>list nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) _0 a) =
  length _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span>
    <span class="nb">compare</span> (nth (head + <span class="mi">1</span>) l default)
      (nth head l default)
   <span class="kr">then</span> <span class="nb">swap</span> l head (head + <span class="mi">1</span>) default
   <span class="kr">else</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (<span class="nb">compare</span> _ _); <span class="bp">now</span> <span class="nb">pose proof</span> swapPreservesLength l.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd"><span class="kn">Lemma</span> <span class="nf">bubbleSortPreservesLength</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) : length (bubbleSort default <span class="nb">compare</span> l) = length l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSort default <span class="nb">compare</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSort default <span class="nb">compare</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf"><span class="nb">unfold</span> bubbleSort.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> (length l) l) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk10"><span class="nb">remember</span> (length l) <span class="kr">as</span> n <span class="nb">eqn</span>:h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> n l) = n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11"><span class="nb">assert</span> (h&#39; : length (bubbleSortAux default <span class="nb">compare</span> n l) = length l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> n l) = length l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk12" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>length (bubbleSortAux default <span class="nb">compare</span> n l) =
length l</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk12"><hr></label><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> n l) = n</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk13">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> n l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk14"><span class="nb">clear</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> n l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk15"><span class="nb">induction</span> n <span class="kr">as</span> [| n IH] <span class="kr">in</span> l |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> <span class="mi">0</span> l) = length l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length (bubbleSortAux default <span class="nb">compare</span> n _0) =
  length _0</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk16"><hr></label><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> (S n) l) =
length l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk17">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> <span class="mi">0</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk18">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length (bubbleSortAux default <span class="nb">compare</span> n _0) =
  length _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> (S n) l) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk19"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length (bubbleSortAux default <span class="nb">compare</span> n _0) =
  length _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (bubbleSortAux default <span class="nb">compare</span> n
     (bubbleSortPass default <span class="nb">compare</span> l)) = 
length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> !IH, bubbleSortPassPreservesLength.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = length l</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>length (bubbleSortAux default <span class="nb">compare</span> n l) =
length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortAux default <span class="nb">compare</span> n l) = n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1b"><span class="kn">Lemma</span> <span class="nf">bubbleSortAuxPreservesLength</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">iterationCount</span> : nat) : length l = length (bubbleSortAux default <span class="nb">compare</span> iterationCount l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (bubbleSortAux default <span class="nb">compare</span> iterationCount l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (bubbleSortAux default <span class="nb">compare</span> iterationCount l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1d"><span class="nb">induction</span> iterationCount <span class="kr">as</span> [| n IH] <span class="kr">in</span> l |- *; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length _0 =
  length (bubbleSortAux default <span class="nb">compare</span> n _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length (bubbleSortAux default <span class="nb">compare</span> (S n) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1e"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  length _0 =
  length (bubbleSortAux default <span class="nb">compare</span> n _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (bubbleSortAux default <span class="nb">compare</span> n
     (bubbleSortPass default <span class="nb">compare</span> l))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- IH, bubbleSortPassPreservesLength.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk1f"><span class="kn">Lemma</span> <span class="nf">compareAndSwapPreservesLength</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">i</span> : nat) : length (compareAndSwap default <span class="nb">compare</span> l i) = length l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (compareAndSwap default <span class="nb">compare</span> l i) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk20"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (compareAndSwap default <span class="nb">compare</span> l i) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk21"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (<span class="kr">if</span>
    <span class="nb">compare</span> (nth (i + <span class="mi">1</span>) l default) (nth i l default)
   <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
   <span class="kr">else</span> l) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk22"><span class="nb">remember</span> (<span class="nb">compare</span> _ _) <span class="kr">as</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>x =
<span class="nb">compare</span> (nth (i + <span class="mi">1</span>) l default) (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (<span class="kr">if</span> x <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> x; <span class="bp">now</span> <span class="nb">rewrite</span> <span class="nl">?swapPreservesLength</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk23"><span class="kn">Lemma</span> <span class="nf">bubbleSortPassPartialPreservesLength</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">iterationCount</span> : nat) : length (bubbleSortPassPartial default <span class="nb">compare</span> l iterationCount) = length l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (bubbleSortPassPartial default <span class="nb">compare</span> l
     iterationCount) = length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk24"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (bubbleSortPassPartial default <span class="nb">compare</span> l
     iterationCount) = 
length l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk25"><span class="nb">induction</span> iterationCount <span class="kr">as</span> [| n IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortPassPartial default <span class="nb">compare</span> l <span class="mi">0</span>) =
length l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk26" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortPassPartial default <span class="nb">compare</span> l n) =
length l</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk26"><hr></label><div class="goal-conclusion">length (bubbleSortPassPartial default <span class="nb">compare</span> l (S n)) =
length l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk27">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortPassPartial default <span class="nb">compare</span> l <span class="mi">0</span>) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk28">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortPassPartial default <span class="nb">compare</span> l n) =
length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length (bubbleSortPassPartial default <span class="nb">compare</span> l (S n)) =
length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk29"><span class="nb">unfold</span> bubbleSortPassPartial <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> n)) = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S n))) = length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> seq_S, Nat.add_0_l, foldl_app, foldlSingleton, compareAndSwapPreservesLength.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2a"><span class="kn">Lemma</span> <span class="nf">nthCompareAndSwapExcept</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">i</span> <span class="nv">j</span> : nat) (<span class="nv">hDiff1</span> : j &lt;&gt; i) (<span class="nv">hDiff2</span> : j &lt;&gt; i + <span class="mi">1</span>) (<span class="nv">hLt</span> : S i &lt; length l) : nth j (compareAndSwap default <span class="nb">compare</span> l i) default = nth j l default.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hDiff1</var><span class="hyp-type"><b>: </b><span>j â‰  i</span></span></span><br><span><var>hDiff2</var><span class="hyp-type"><b>: </b><span>j â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hLt</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (compareAndSwap default <span class="nb">compare</span> l i) default =
nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hDiff1</var><span class="hyp-type"><b>: </b><span>j â‰  i</span></span></span><br><span><var>hDiff2</var><span class="hyp-type"><b>: </b><span>j â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hLt</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (compareAndSwap default <span class="nb">compare</span> l i) default =
nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2c"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hDiff1</var><span class="hyp-type"><b>: </b><span>j â‰  i</span></span></span><br><span><var>hDiff2</var><span class="hyp-type"><b>: </b><span>j â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hLt</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (<span class="kr">if</span>
    <span class="nb">compare</span> (nth (i + <span class="mi">1</span>) l default) (nth i l default)
   <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
   <span class="kr">else</span> l) default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2d"><span class="nb">remember</span> (<span class="nb">compare</span> _ _) <span class="kr">as</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hDiff1</var><span class="hyp-type"><b>: </b><span>j â‰  i</span></span></span><br><span><var>hDiff2</var><span class="hyp-type"><b>: </b><span>j â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hLt</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>x =
<span class="nb">compare</span> (nth (i + <span class="mi">1</span>) l default) (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (<span class="kr">if</span> x <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
  default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2e"><span class="nb">destruct</span> x; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hDiff1</var><span class="hyp-type"><b>: </b><span>j â‰  i</span></span></span><br><span><var>hDiff2</var><span class="hyp-type"><b>: </b><span>j â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hLt</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>true =
<span class="nb">compare</span> (nth (i + <span class="mi">1</span>) l default) (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default =
nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> nthSwapExcept; (<span class="bp">done</span> || <span class="bp">lia</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk2f"><span class="kn">Lemma</span> <span class="nf">nthBubbleSortPassPartial</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">i</span> <span class="nv">j</span> : nat) (<span class="nv">hIJRelaxed</span> : S i &lt;= j) (<span class="nv">hJ</span> : j &lt; length l) : nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i)) default = nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j) default.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJRelaxed</var><span class="hyp-type"><b>: </b><span>S i â‰¤ j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk30"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJRelaxed</var><span class="hyp-type"><b>: </b><span>S i â‰¤ j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk31"><span class="nb">destruct</span> (decide (S i = j)); <span class="kp">try</span> <span class="bp">now</span> <span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJRelaxed</var><span class="hyp-type"><b>: </b><span>S i â‰¤ j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>S i â‰  j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk32"><span class="nb">pose proof</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : S i &lt; j) <span class="kr">as</span> hIJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJRelaxed</var><span class="hyp-type"><b>: </b><span>S i â‰¤ j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>S i â‰  j</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk33"><span class="nb">induction</span> j <span class="kr">as</span> [| j IH] <span class="kr">in</span> l, i, hIJ, hJ |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l <span class="mi">0</span>)
  default</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk34" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk34"><hr></label><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S j))
  default</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk35">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l <span class="mi">0</span>)
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk36"><span class="nb">pose proof</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : i = <span class="mi">0</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; <span class="mi">0</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l <span class="mi">0</span>)
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">subst</span> i.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk37">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S j))
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk38"><span class="nb">unfold</span> bubbleSortPassPartial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S i))) default =
nth i
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S j))) default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk39"><span class="nb">rewrite</span> (seq_S j <span class="mi">0</span>), foldl_app, Nat.add_0_l, foldlSingleton, !(<span class="kp">ltac</span>:(<span class="bp">easy</span>) : foldl _ _ _ = bubbleSortPassPartial _ _ _ _), nthCompareAndSwapExcept; <span class="kp">try</span> (<span class="bp">done</span> || <span class="bp">lia</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk3a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk3a"><hr></label><div class="goal-conclusion">S j &lt;
length (bubbleSortPassPartial default <span class="nb">compare</span> l j)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk3b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk3c"><span class="nb">destruct</span> (decide (j = S i)); <span class="kp">try</span> <span class="bp">now</span> <span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>j â‰  S i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth i (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default =
nth i (bubbleSortPassPartial default <span class="nb">compare</span> l j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> IH; (<span class="bp">done</span> || <span class="bp">lia</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk3d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; S j</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  j &lt; length _0
  â†’ S _1 &lt; j
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           (S _1)) default =
      nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           j) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S j &lt;
length (bubbleSortPassPartial default <span class="nb">compare</span> l j)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> bubbleSortPassPartialPreservesLength; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk3e"><span class="kn">Lemma</span> <span class="nf">nthBubbleSortPassPartial2</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">i</span> <span class="nv">j</span> : nat) (<span class="nv">hIJ</span> : i &lt; j) (<span class="nv">hJ</span> : j &lt; length l) : nth j (bubbleSortPassPartial default <span class="nb">compare</span> l i) default = nth j l default.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (bubbleSortPassPartial default <span class="nb">compare</span> l i)
  default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk3f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (bubbleSortPassPartial default <span class="nb">compare</span> l i)
  default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk40"><span class="nb">induction</span> i <span class="kr">as</span> [| i IH] <span class="kr">in</span> l, j, hIJ, hJ |- *; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  i &lt; _1
  â†’ _1 &lt; length _0
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           i) default = 
      nth _1 _0 default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (bubbleSortPassPartial default <span class="nb">compare</span> l (S i))
  default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk41"><span class="nb">unfold</span> bubbleSortPassPartial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  i &lt; _1
  â†’ _1 &lt; length _0
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           i) default = 
      nth _1 _0 default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S i))) default = 
nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk42"><span class="nb">rewrite</span> seq_S, foldl_app, foldlSingleton, Nat.add_0_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  i &lt; _1
  â†’ _1 &lt; length _0
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           i) default = 
      nth _1 _0 default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> i)) i) default = 
nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk43"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">easy</span>) : foldl _ _ _ = bubbleSortPassPartial _ _ _ _) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  i &lt; _1
  â†’ _1 &lt; length _0
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           i) default = 
      nth _1 _0 default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (compareAndSwap default <span class="nb">compare</span>
     (bubbleSortPassPartial default <span class="nb">compare</span> l i) i)
  default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk44"><span class="nb">rewrite</span> nthCompareAndSwapExcept; <span class="kp">try</span> (<span class="nb">rewrite</span> <span class="nl">?bubbleSortPassPartialPreservesLength</span>; <span class="bp">lia</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>S i &lt; j</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : list A) (<span class="nv">_1</span> : nat),
  i &lt; _1
  â†’ _1 &lt; length _0
    â†’ nth _1
        (bubbleSortPassPartial default <span class="nb">compare</span> _0
           i) default = 
      nth _1 _0 default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j (bubbleSortPassPartial default <span class="nb">compare</span> l i)
  default = nth j l default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IH; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk45"><span class="kn">Lemma</span> <span class="nf">bubblingUp</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">comparator</span> : Comparator A) (<span class="nv">l</span> : list A) (<span class="nv">iterationCount</span> : nat) (<span class="nv">i</span> : nat) (<span class="nv">hI</span> : i &lt;= iterationCount) (<span class="nv">hCap</span> : iterationCount &lt; length l) : ~<span class="nb">compare</span> _ comparator (nth iterationCount (bubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) l iterationCount) default) (nth i (bubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) l iterationCount) default).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ iterationCount</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>iterationCount &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth iterationCount
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l iterationCount)
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l iterationCount)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk46"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ iterationCount</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>iterationCount &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth iterationCount
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l iterationCount)
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l iterationCount)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk47"><span class="nb">induction</span> iterationCount <span class="kr">as</span> [| n IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ <span class="mi">0</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="mi">0</span>
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk48" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk48"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l 
          (S n)) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l 
          (S n)) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk49">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ <span class="mi">0</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="mi">0</span>
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4a"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : i = <span class="mi">0</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ <span class="mi">0</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="mi">0</span>
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) default)
    (nth <span class="mi">0</span>
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> irreflexive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l 
          (S n)) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l 
          (S n)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4c"><span class="nb">unfold</span> bubbleSortPassPartial <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (foldl
              (compareAndSwap default
                 (<span class="nb">compare</span> A comparator)) l
              (seq <span class="mi">0</span> n)) default)
        (nth i
           (foldl
              (compareAndSwap default
                 (<span class="nb">compare</span> A comparator)) l
              (seq <span class="mi">0</span> n)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (foldl
          (compareAndSwap default
             (<span class="nb">compare</span> A comparator)) l 
          (seq <span class="mi">0</span> (S n))) default)
    (nth i
       (foldl
          (compareAndSwap default
             (<span class="nb">compare</span> A comparator)) l 
          (seq <span class="mi">0</span> (S n))) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4d"><span class="nb">rewrite</span> seq_S, Nat.add_0_l, foldl_app, foldlSingleton.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (foldl
              (compareAndSwap default
                 (<span class="nb">compare</span> A comparator)) l
              (seq <span class="mi">0</span> n)) default)
        (nth i
           (foldl
              (compareAndSwap default
                 (<span class="nb">compare</span> A comparator)) l
              (seq <span class="mi">0</span> n)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (foldl
             (compareAndSwap default
                (<span class="nb">compare</span> A comparator)) l 
             (seq <span class="mi">0</span> n)) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (foldl
             (compareAndSwap default
                (<span class="nb">compare</span> A comparator)) l 
             (seq <span class="mi">0</span> n)) n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4e"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">easy</span>) : foldl _ _ _ = bubbleSortPassPartial _ _ _ _) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk4f"><span class="nb">destruct</span> (decide (i = S n)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i = S n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk50" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk50"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk51">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i = S n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk52"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S n â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>S n â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth (S n)
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> irreflexive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk53">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk54"><span class="nb">pose proof</span> IH <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> step.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk55"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator
           (nth (n + <span class="mi">1</span>)
              (bubbleSortPassPartial default
                 (<span class="nb">compare</span> A comparator) l n) default)
           (nth n
              (bubbleSortPassPartial default
                 (<span class="nb">compare</span> A comparator) l n) default)
        <span class="kr">then</span>
         <span class="nb">swap</span>
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) n 
           (n + <span class="mi">1</span>) default
        <span class="kr">else</span>
         bubbleSortPassPartial default
           (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator
           (nth (n + <span class="mi">1</span>)
              (bubbleSortPassPartial default
                 (<span class="nb">compare</span> A comparator) l n) default)
           (nth n
              (bubbleSortPassPartial default
                 (<span class="nb">compare</span> A comparator) l n) default)
        <span class="kr">then</span>
         <span class="nb">swap</span>
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) n 
           (n + <span class="mi">1</span>) default
        <span class="kr">else</span>
         bubbleSortPassPartial default
           (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk56"><span class="nb">remember</span> (<span class="nb">compare</span> _ _ (nth (n + <span class="mi">1</span>) _ _) _) <span class="kr">as</span> x <span class="nb">eqn</span>:hX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>x =
<span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="kr">if</span> x
        <span class="kr">then</span>
         <span class="nb">swap</span>
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) n 
           (n + <span class="mi">1</span>) default
        <span class="kr">else</span>
         bubbleSortPassPartial default
           (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="kr">if</span> x
        <span class="kr">then</span>
         <span class="nb">swap</span>
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) n 
           (n + <span class="mi">1</span>) default
        <span class="kr">else</span>
         bubbleSortPassPartial default
           (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk57"><span class="nb">symmetry in</span> hX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default) = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="kr">if</span> x
        <span class="kr">then</span>
         <span class="nb">swap</span>
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) n 
           (n + <span class="mi">1</span>) default
        <span class="kr">else</span>
         bubbleSortPassPartial default
           (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="kr">if</span> x
        <span class="kr">then</span>
         <span class="nb">swap</span>
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) n 
           (n + <span class="mi">1</span>) default
        <span class="kr">else</span>
         bubbleSortPassPartial default
           (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk58"><span class="nb">destruct</span> x; <span class="nb">rewrite</span> &lt;- <span class="nl">?Is_true_true</span>, &lt;- <span class="nl">?Is_true_false</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk59" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk59"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5b"><span class="nb">pose proof</span> nthSwapVariant (bubbleSortPassPartial default (<span class="nb">compare</span> A comparator) l n) default (S n) n <span class="kr">as</span> partial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>S n &lt;
length
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l n)
â†’ n &lt;
  length
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l n)
  â†’ nth (S n)
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (S n) default) default =
    nth n
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5c"><span class="nb">rewrite</span> bubbleSortPassPartialPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>S n &lt; length l
â†’ n &lt; length l
  â†’ nth (S n)
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (S n) default) default =
    nth n
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5d"><span class="nb">pose proof</span> (partial <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)) <span class="kr">as</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>S n &lt; length l
â†’ n &lt; length l
  â†’ nth (S n)
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (S n) default) default =
    nth n
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>nth (S n)
  (<span class="nb">swap</span>
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) n 
     (S n) default) default =
nth n
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5e"><span class="nb">rewrite</span> ?(<span class="kp">ltac</span>:(<span class="bp">lia</span>) : S n = n + <span class="mi">1</span>) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>S n &lt; length l
â†’ n &lt; length l
  â†’ nth (S n)
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (S n) default) default =
    nth n
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>nth (n + <span class="mi">1</span>)
  (<span class="nb">swap</span>
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) n 
     (n + <span class="mi">1</span>) default) default =
nth n
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk5f"><span class="nb">rewrite</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>S n &lt; length l
â†’ n &lt; length l
  â†’ nth (S n)
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (S n) default) default =
    nth n
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>nth (n + <span class="mi">1</span>)
  (<span class="nb">swap</span>
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) n 
     (n + <span class="mi">1</span>) default) default =
nth n
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk60"><span class="nb">clear</span> partial close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk61"><span class="nb">destruct</span> (decide (i = n)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i = n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk62" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk62"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk63">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i = n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk64"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>n â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>n â‰  S n</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>n â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk65"><span class="nb">pose proof</span> nthSwap (bubbleSortPassPartial default (<span class="nb">compare</span> A comparator) l n) default n (n + <span class="mi">1</span>) <span class="kr">as</span> partial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>n â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>n â‰  S n</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>n â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt;
length
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l n)
â†’ n + <span class="mi">1</span> &lt;
  length
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l n)
  â†’ nth n
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (n + <span class="mi">1</span>) default) default =
    nth (n + <span class="mi">1</span>)
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk66"><span class="nb">rewrite</span> bubbleSortPassPartialPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>n â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>n â‰  S n</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>n â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ n + <span class="mi">1</span> &lt; length l
  â†’ nth n
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (n + <span class="mi">1</span>) default) default =
    nth (n + <span class="mi">1</span>)
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk67"><span class="nb">rewrite</span> (partial <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>n â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>n â‰  S n</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>n â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ n + <span class="mi">1</span> &lt; length l
  â†’ nth n
      (<span class="nb">swap</span>
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) n
         (n + <span class="mi">1</span>) default) default =
    nth (n + <span class="mi">1</span>)
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator) l n) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> asymmetry.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk68">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk69">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6a"><span class="nb">pose proof</span> nthSwapExcept (bubbleSortPassPartial default (<span class="nb">compare</span> A comparator) l n) default n (n + <span class="mi">1</span>) i <span class="kr">as</span> partial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt;
length
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l n)
â†’ n + <span class="mi">1</span> &lt;
  length
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l n)
  â†’ i â‰  n
    â†’ i â‰  n + <span class="mi">1</span>
      â†’ nth i
          (<span class="nb">swap</span>
             (bubbleSortPassPartial default
                (<span class="nb">compare</span> A comparator) l n)
             n (n + <span class="mi">1</span>) default) default =
        nth i
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n)
          default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6b"><span class="nb">rewrite</span> bubbleSortPassPartialPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ n + <span class="mi">1</span> &lt; length l
  â†’ i â‰  n
    â†’ i â‰  n + <span class="mi">1</span>
      â†’ nth i
          (<span class="nb">swap</span>
             (bubbleSortPassPartial default
                (<span class="nb">compare</span> A comparator) l n)
             n (n + <span class="mi">1</span>) default) default =
        nth i
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n)
          default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (<span class="nb">swap</span>
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n) n 
          (n + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6c"><span class="nb">rewrite</span> (partial <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ n + <span class="mi">1</span> &lt; length l
  â†’ i â‰  n
    â†’ i â‰  n + <span class="mi">1</span>
      â†’ nth i
          (<span class="nb">swap</span>
             (bubbleSortPassPartial default
                (<span class="nb">compare</span> A comparator) l n)
             n (n + <span class="mi">1</span>) default) default =
        nth i
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n)
          default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6d"><span class="nb">apply</span> step.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (n + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)
  (nth n
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>i â‰  n</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ n + <span class="mi">1</span> &lt; length l
  â†’ i â‰  n
    â†’ i â‰  n + <span class="mi">1</span>
      â†’ nth i
          (<span class="nb">swap</span>
             (bubbleSortPassPartial default
                (<span class="nb">compare</span> A comparator) l n)
             n (n + <span class="mi">1</span>) default) default =
        nth i
          (bubbleSortPassPartial default
             (<span class="nb">compare</span> A comparator) l n)
          default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n &lt; length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6e">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk6f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk70"><span class="nb">pose proof</span> step <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (S n)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk71"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : S n = n + <span class="mi">1</span>) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ S n</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>S n &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>i â‰¤ n
â†’ n &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth n
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)
        (nth i
           (bubbleSortPassPartial default
              (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>i â‰  S n</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>n &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth n
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)
      (nth i
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth n
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (n + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l n) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (negativelyTransitive _ _ _ _ hX close).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk72"><span class="kn">Lemma</span> <span class="nf">moveBubbleSortPassOut</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) (<span class="nv">iterationCount</span> : nat) : bubbleSortAux default <span class="nb">compare</span> iterationCount (bubbleSortPass default <span class="nb">compare</span> l) = bubbleSortPass default <span class="nb">compare</span> (bubbleSortAux default <span class="nb">compare</span> iterationCount l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">bubbleSortAux default <span class="nb">compare</span> iterationCount
  (bubbleSortPass default <span class="nb">compare</span> l) =
bubbleSortPass default <span class="nb">compare</span>
  (bubbleSortAux default <span class="nb">compare</span> iterationCount l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk73"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">bubbleSortAux default <span class="nb">compare</span> iterationCount
  (bubbleSortPass default <span class="nb">compare</span> l) =
bubbleSortPass default <span class="nb">compare</span>
  (bubbleSortAux default <span class="nb">compare</span> iterationCount l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk74"><span class="nb">induction</span> iterationCount <span class="kr">as</span> [| n IH] <span class="kr">in</span> l |- *; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  bubbleSortAux default <span class="nb">compare</span> n
    (bubbleSortPass default <span class="nb">compare</span> _0) =
  bubbleSortPass default <span class="nb">compare</span>
    (bubbleSortAux default <span class="nb">compare</span> n _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">bubbleSortAux default <span class="nb">compare</span> 
  (S n) (bubbleSortPass default <span class="nb">compare</span> l) =
bubbleSortPass default <span class="nb">compare</span>
  (bubbleSortAux default <span class="nb">compare</span> (S n) l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk75"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  bubbleSortAux default <span class="nb">compare</span> n
    (bubbleSortPass default <span class="nb">compare</span> _0) =
  bubbleSortPass default <span class="nb">compare</span>
    (bubbleSortAux default <span class="nb">compare</span> n _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">bubbleSortAux default <span class="nb">compare</span> n
  (bubbleSortPass default <span class="nb">compare</span>
     (bubbleSortPass default <span class="nb">compare</span> l)) =
bubbleSortPass default <span class="nb">compare</span>
  (bubbleSortAux default <span class="nb">compare</span> n
     (bubbleSortPass default <span class="nb">compare</span> l))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> IH.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk76"><span class="kn">Lemma</span> <span class="nf">nthBubbleSortPassJSucc</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">comparator</span> : Comparator A) (<span class="nv">l</span> : list A) (<span class="nv">j</span> : nat) (<span class="nv">h</span> : S j &lt; length l) : ~(<span class="nb">compare</span> _ comparator) (nth j (bubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) l j) default) (nth j (bubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) l (S j)) default).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l j) default)
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l (S j)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk77"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l j) default)
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator) l 
          (S j)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk78"><span class="nb">unfold</span> bubbleSortPassPartial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (foldl
          (compareAndSwap default
             (<span class="nb">compare</span> A comparator)) l 
          (seq <span class="mi">0</span> j)) default)
    (nth j
       (foldl
          (compareAndSwap default
             (<span class="nb">compare</span> A comparator)) l 
          (seq <span class="mi">0</span> (S j))) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk79"><span class="nb">rewrite</span> seq_S, foldl_app, foldlSingleton, Nat.add_0_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (foldl
          (compareAndSwap default
             (<span class="nb">compare</span> A comparator)) l 
          (seq <span class="mi">0</span> j)) default)
    (nth j
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator)
          (foldl
             (compareAndSwap default
                (<span class="nb">compare</span> A comparator)) l 
             (seq <span class="mi">0</span> j)) j) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk7a"><span class="nb">remember</span> (foldl (compareAndSwap default _) l (seq <span class="mi">0</span> j)) <span class="kr">as</span> m <span class="nb">eqn</span>:hM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
foldl
  (compareAndSwap default (<span class="nb">compare</span> A comparator))
  l (seq <span class="mi">0</span> j)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) m j) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk7b"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">easy</span>) : foldl _ _ _ = bubbleSortPassPartial _ _ _ _) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) m j) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk7c"><span class="nb">pose proof</span> bubbleSortPassPartialPreservesLength default (<span class="nb">compare</span> _ comparator) l j <span class="kr">as</span> hPreserve.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l j) =
length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) m j) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk7d"><span class="nb">rewrite</span> &lt;- hM <span class="kr">in</span> hPreserve.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) m j) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk7e"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk7f"><span class="nb">destruct</span> (decide (<span class="nb">compare</span> _ comparator (nth (j + <span class="mi">1</span>) m default) (nth j m default))) <span class="kr">as</span> [hSplit | hSplit].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk80" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (j + <span class="mi">1</span>) m default) 
    (nth j m default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk80"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk81">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk82"><span class="nb">rewrite</span> Is_true_true <span class="kr">in</span> hSplit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk83"><span class="nb">rewrite</span> hSplit, nthSwap; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default) (nth (j + <span class="mi">1</span>) m default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk84"><span class="nb">apply</span> asymmetry.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- Is_true_true <span class="kr">in</span> *.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk85">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (j + <span class="mi">1</span>) m default) 
    (nth j m default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk86"><span class="nb">rewrite</span> Is_true_false <span class="kr">in</span> hSplit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default) = false</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default)
    (nth j
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (j + <span class="mi">1</span>) m default) 
           (nth j m default)
        <span class="kr">then</span> <span class="nb">swap</span> m j (j + <span class="mi">1</span>) default
        <span class="kr">else</span> m) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk87"><span class="nb">rewrite</span> hSplit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S j &lt; length l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hM</var><span class="hyp-type"><b>: </b><span>m =
bubbleSortPassPartial default
  (<span class="nb">compare</span> A comparator) l j</span></span></span><br><span><var>hPreserve</var><span class="hyp-type"><b>: </b><span>length m = length l</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (j + <span class="mi">1</span>) m default)
  (nth j m default) = false</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth j m default) (nth j m default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> irreflexive.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk88"><span class="kn">Lemma</span> <span class="nf">compareAndSwapPreservesPartitioned</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">comparator</span> : Comparator A) (<span class="nv">l</span> : list A) (<span class="nv">partitionPoint</span> <span class="nv">i</span> : nat) (<span class="nv">hPartitioned</span> : partitioned default (<span class="nb">compare</span> A comparator) l partitionPoint) (<span class="nv">hPartitionPoint</span> : partitionPoint &lt; length l) (<span class="nv">hI</span> : S i &lt; length l) : partitioned default (<span class="nb">compare</span> A comparator) (compareAndSwap default (<span class="nb">compare</span> A comparator) l i) partitionPoint.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (compareAndSwap default (<span class="nb">compare</span> A comparator) l i)
  partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk89"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (compareAndSwap default (<span class="nb">compare</span> A comparator) l i)
  partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk8a"><span class="nb">intros</span> <span class="nb">left</span> <span class="nb">right</span> hLeft hRight hCap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk8b"><span class="nb">destruct</span> (decide (<span class="nb">left</span> = <span class="nb">right</span>)) <span class="kr">as</span> [hEq | hEq].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = <span class="nb">right</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk8c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk8c"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk8d">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = <span class="nb">right</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk8e"><span class="nb">subst</span> <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> irreflexive.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk8f">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk90"><span class="nb">destruct</span> (decide (<span class="nb">left</span> = i)) <span class="kr">as</span> [hLeftI | hLeftI].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk91" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk91"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk92">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk93"><span class="nb">pose proof</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : <span class="nb">right</span> = i + <span class="mi">1</span> \/ <span class="nb">right</span> &gt; i + <span class="mi">1</span>) <span class="kr">as</span> [h1 | h1].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk94" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk94"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk95">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk96"><span class="nb">subst</span> <span class="nb">left</span> <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk97"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)
    (nth i
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk98"><span class="nb">remember</span> (<span class="nb">compare</span> _ _ (nth (i + <span class="mi">1</span>) l default) _) <span class="kr">as</span> expr <span class="nb">eqn</span>:hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>expr =
<span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth i
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk99"><span class="nb">symmetry in</span> hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default) = expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth i
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9a"><span class="nb">destruct</span> expr; <span class="nb">rewrite</span> &lt;- <span class="nl">?Is_true_true</span>, &lt;- <span class="nl">?Is_true_false</span> <span class="kr">in</span> *; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>) (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth i (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> !nthSwap, !nthSwapVariant; <span class="bp">now</span> (<span class="bp">lia</span> || <span class="nb">apply</span> asymmetry).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9c"><span class="nb">subst</span> <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9d"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)
    (nth i
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9e"><span class="nb">remember</span> (<span class="nb">compare</span> _ _ (nth (i + <span class="mi">1</span>) l default) _) <span class="kr">as</span> expr <span class="nb">eqn</span>:hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>expr =
<span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth i
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk9f"><span class="nb">symmetry in</span> hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default) = expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth i
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka0"><span class="nb">destruct</span> expr; <span class="nb">rewrite</span> &lt;- <span class="nl">?Is_true_true</span>, &lt;- <span class="nl">?Is_true_false</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth i (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chka1"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth i l default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth i (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka3"><span class="nb">rewrite</span> nthSwap; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka4"><span class="nb">rewrite</span> nthSwapExcept; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka5"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka6"><span class="nb">pose proof</span> hPartitioned i <span class="nb">right</span> <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> step.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (negativelyTransitive _ _ _ _ step (asymmetry _ _ _ _ hExpr)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka7">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth i l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka8"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i â‰  <span class="nb">right</span></span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &gt; i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth i l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hPartitioned i <span class="nb">right</span> <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chka9">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkaa"><span class="nb">destruct</span> (decide (<span class="nb">left</span> = i + <span class="mi">1</span>)) <span class="kr">as</span> [hLeftSI | hLeftSI].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkab" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkab"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkac">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkad"><span class="nb">subst</span> <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth (i + <span class="mi">1</span>)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkae"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkaf"><span class="nb">remember</span> (<span class="nb">compare</span> _ _ (nth (i + <span class="mi">1</span>) l default) _) <span class="kr">as</span> expr <span class="nb">eqn</span>:hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>expr =
<span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb0"><span class="nb">symmetry in</span> hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default) = expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb1"><span class="nb">destruct</span> expr; <span class="nb">rewrite</span> &lt;- <span class="nl">?Is_true_true</span>, &lt;- <span class="nl">?Is_true_false</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth (i + <span class="mi">1</span>) (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkb2"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth (i + <span class="mi">1</span>) (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb4"><span class="nb">rewrite</span> !nthSwapVariant, !nthSwapExcept; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth i l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb5"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth i l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hPartitioned i <span class="nb">right</span> <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb7"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth (i + <span class="mi">1</span>) l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">pose proof</span> hPartitioned (i + <span class="mi">1</span>) <span class="nb">right</span> <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> step.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb8">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkb9"><span class="nb">destruct</span> (decide (<span class="nb">right</span> = i)) <span class="kr">as</span> [hRightI | hRightI].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkba" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkba"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkbb">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> = i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkbc"><span class="nb">subst</span> <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkbd"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)
    (nth <span class="nb">left</span>
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkbe"><span class="nb">remember</span> (<span class="nb">compare</span> _ _ (nth (i + <span class="mi">1</span>) l default) _) <span class="kr">as</span> expr <span class="nb">eqn</span>:hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>expr =
<span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth <span class="nb">left</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkbf"><span class="nb">symmetry in</span> hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default) = expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth <span class="nb">left</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc0"><span class="nb">destruct</span> expr; <span class="nb">rewrite</span> &lt;- <span class="nl">?Is_true_true</span>, &lt;- <span class="nl">?Is_true_false</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth <span class="nb">left</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkc1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkc1"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth i l default) (nth <span class="nb">left</span> l default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth <span class="nb">left</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc3"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt; length l</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth i (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth <span class="nb">left</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc4"><span class="nb">rewrite</span> !nthSwap, !nthSwapExcept; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt; length l</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hPartitioned; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth i l default) (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc6"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i &lt; length l</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth i l default) (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hPartitioned; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc7">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkc8"><span class="nb">destruct</span> (decide (<span class="nb">right</span> = i + <span class="mi">1</span>)) <span class="kr">as</span> [hRightSI | hRightSI].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br><span><var>hRightSI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkc9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br><span><var>hRightSI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkc9"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkca">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br><span><var>hRightSI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkcb"><span class="nb">subst</span> <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkcc"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)
    (nth <span class="nb">left</span>
       (<span class="kr">if</span>
         <span class="nb">compare</span> A comparator 
           (nth (i + <span class="mi">1</span>) l default) 
           (nth i l default)
        <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default
        <span class="kr">else</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkcd"><span class="nb">remember</span> (<span class="nb">compare</span> _ _ (nth (i + <span class="mi">1</span>) l default) _) <span class="kr">as</span> expr <span class="nb">eqn</span>:hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>expr =
<span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth <span class="nb">left</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkce"><span class="nb">symmetry in</span> hExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>expr</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default) = expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>)
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)
    (nth <span class="nb">left</span>
       (<span class="kr">if</span> expr <span class="kr">then</span> <span class="nb">swap</span> l i (i + <span class="mi">1</span>) default <span class="kr">else</span> l)
       default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkcf"><span class="nb">destruct</span> expr; <span class="nb">rewrite</span> &lt;- <span class="nl">?Is_true_true</span>, &lt;- <span class="nl">?Is_true_false</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>) (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth <span class="nb">left</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkd0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkd0"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth <span class="nb">left</span> l default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (i + <span class="mi">1</span>) (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)
    (nth <span class="nb">left</span> (<span class="nb">swap</span> l i (i + <span class="mi">1</span>) default) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd2"><span class="nb">rewrite</span> nthSwapVariant, nthSwapExcept; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth i l default) (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd3"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt; length l</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth i l default) (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd4"><span class="nb">pose proof</span> hPartitioned <span class="nb">left</span> (i + <span class="mi">1</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> step.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt; length l</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator (nth (i + <span class="mi">1</span>) l default)
  (nth i l default)</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default)
    (nth <span class="nb">left</span> l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth i l default) (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (negativelyTransitive _ _ _ _ (asymmetry _ _ _ _ hExpr) step).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰¥ partitionPoint</span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span>i + <span class="mi">1</span> â‰  i</span></span></span><br><span><var>hExpr</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth i l default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth (i + <span class="mi">1</span>) l default) 
    (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hPartitioned; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd6">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt;
length
  (compareAndSwap default
     (<span class="nb">compare</span> A comparator) l i)</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br><span><var>hRightSI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd7"><span class="nb">rewrite</span> compareAndSwapPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br><span><var>hRightSI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth <span class="nb">right</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)
    (nth <span class="nb">left</span>
       (compareAndSwap default 
          (<span class="nb">compare</span> A comparator) l i) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd8"><span class="nb">rewrite</span> !nthCompareAndSwapExcept; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br><span><var>left, right</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hLeft</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰¤ partitionPoint</span></span></span><br><span><var>hRight</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰¥ partitionPoint</span></span></span><br><span><var>hCap</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> &lt; length l</span></span></span><br><span><var>hEq</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  <span class="nb">right</span></span></span></span><br><span><var>hLeftI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i</span></span></span><br><span><var>hLeftSI</var><span class="hyp-type"><b>: </b><span><span class="nb">left</span> â‰  i + <span class="mi">1</span></span></span></span><br><span><var>hRightI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i</span></span></span><br><span><var>hRightSI</var><span class="hyp-type"><b>: </b><span><span class="nb">right</span> â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator 
    (nth <span class="nb">right</span> l default) 
    (nth <span class="nb">left</span> l default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hPartitioned; <span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkd9"><span class="kn">Lemma</span> <span class="nf">bubbleSortPassPartialPreservesPartitioned</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">comparator</span> : Comparator A) (<span class="nv">l</span> : list A) (<span class="nv">partitionPoint</span> <span class="nv">i</span> : nat) (<span class="nv">hPartitioned</span> : partitioned default (<span class="nb">compare</span> A comparator) l partitionPoint) (<span class="nv">hPartitionPoint</span> : partitionPoint &lt; length l) (<span class="nv">hI</span> : S i &lt; length l) : partitioned default (<span class="nb">compare</span> A comparator) (bubbleSortPassPartial default (<span class="nb">compare</span> A comparator) l i) partitionPoint.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l i) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkda"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S i &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l i) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkdb"><span class="nb">induction</span> i <span class="kr">as</span> [| i IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) partitionPoint</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkdc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S (S i) &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>S i &lt; length l
â†’ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkdc"><hr></label><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l 
     (S i)) partitionPoint</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkdd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l <span class="mi">0</span>) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkde">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S (S i) &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>S i &lt; length l
â†’ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l 
     (S i)) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkdf"><span class="nb">pose proof</span> IH <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> past.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S (S i) &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>S i &lt; length l
â†’ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br><span><var>past</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l 
     (S i)) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke0"><span class="nb">unfold</span> bubbleSortPassPartial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S (S i) &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>S i &lt; length l
â†’ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br><span><var>past</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (foldl
     (compareAndSwap default (<span class="nb">compare</span> A comparator)) l
     (seq <span class="mi">0</span> (S i))) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke1"><span class="nb">rewrite</span> seq_S, foldl_app, Nat.add_0_l, foldlSingleton, (<span class="kp">ltac</span>:(<span class="bp">easy</span>) : foldl _ _ _ = bubbleSortPassPartial _ _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>partitionPoint, i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hPartitioned</var><span class="hyp-type"><b>: </b><span>partitioned default
  (<span class="nb">compare</span> A comparator) l
  partitionPoint</span></span></span><br><span><var>hPartitionPoint</var><span class="hyp-type"><b>: </b><span>partitionPoint &lt; length l</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>S (S i) &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>S i &lt; length l
â†’ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortPassPartial default
       (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br><span><var>past</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator) l i) partitionPoint</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (compareAndSwap default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator) l i) i) partitionPoint</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> compareAndSwapPreservesPartitioned; <span class="nb">rewrite</span> <span class="nl">?bubbleSortPassPartialPreservesLength</span>; (<span class="bp">done</span> || <span class="bp">lia</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke2"><span class="kn">Lemma</span> <span class="nf">bubbleSortAuxInvariant</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">comparator</span> : Comparator A) (<span class="nv">l</span> : list A) (<span class="nv">iterationCount</span> : nat) (<span class="nv">hIterationCount</span> : iterationCount &lt;= length l) : suffixSorted default (<span class="nb">compare</span> _ comparator) (bubbleSortAux default (<span class="nb">compare</span> _ comparator) iterationCount l) iterationCount /\ partitioned default (<span class="nb">compare</span> _ comparator) (bubbleSortAux default (<span class="nb">compare</span> _ comparator) iterationCount l) (length l - iterationCount).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator)
     iterationCount l) iterationCount
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default (<span class="nb">compare</span> A comparator)
       iterationCount l) (length l - iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount l)
  iterationCount
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default 
       (<span class="nb">compare</span> A comparator) iterationCount l)
    (length l - iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke4"><span class="nb">induction</span> iterationCount <span class="kr">as</span> [| iterationCount IHiterationCount] <span class="kr">in</span> l, hIterationCount |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) <span class="mi">0</span>
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)
    (length l - <span class="mi">0</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chke5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chke5"><hr></label><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l) 
  (S iterationCount)
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default 
       (<span class="nb">compare</span> A comparator) 
       (S iterationCount) l)
    (length l - S iterationCount)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) <span class="mi">0</span>
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)
    (length l - <span class="mi">0</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke7"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chke8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chke8"><hr></label><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)
  (length l - <span class="mi">0</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chke9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkea"><span class="nb">intros</span> i j hIJ hI hJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) - <span class="mi">0</span> â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt;
length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkeb"><span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - <span class="mi">0</span> â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkec">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)
  (length l - <span class="mi">0</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chked"><span class="nb">intros</span> i j hI hJ hLength.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - <span class="mi">0</span></span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - <span class="mi">0</span></span></span></span><br><span><var>hLength</var><span class="hyp-type"><b>: </b><span>j &lt;
length
  (bubbleSortAux default
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkee"><span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - <span class="mi">0</span></span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - <span class="mi">0</span></span></span></span><br><span><var>hLength</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkef">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l) 
  (S iterationCount)
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default 
       (<span class="nb">compare</span> A comparator) 
       (S iterationCount) l)
    (length l - S iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf0"><span class="nb">pose proof</span> IHiterationCount (bubbleSortPass default (<span class="nb">compare</span> A comparator) l) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> bubbleSortPassPreservesLength; <span class="bp">lia</span>) <span class="kr">as</span> [hS hP].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l) 
  (S iterationCount)
âˆ§ partitioned default (<span class="nb">compare</span> A comparator)
    (bubbleSortAux default 
       (<span class="nb">compare</span> A comparator) 
       (S iterationCount) l)
    (length l - S iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf1"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l) 
  (S iterationCount)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkf2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkf2"><hr></label><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l)
  (length l - S iterationCount)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l) 
  (S iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf4"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default (<span class="nb">compare</span> A comparator) l))
  (S iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf5"><span class="nb">intros</span> i j hIJ hI hJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) -
S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt;
length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf6"><span class="nb">pose proof</span> hS i j <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> partial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) -
S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt;
length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length
  (bubbleSortAux default
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) -
iterationCount â‰¤ i
â†’ j &lt;
  length
    (bubbleSortAux default
       (<span class="nb">compare</span> A comparator) iterationCount
       (bubbleSortPass default
          (<span class="nb">compare</span> A comparator) l))
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf7"><span class="nb">rewrite</span> &lt;- !bubbleSortAuxPreservesLength, !bubbleSortPassPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkf8"><span class="nb">destruct</span> (decide (length l - iterationCount = i + <span class="mi">1</span>)) <span class="kr">as</span> [hSplit | hSplit].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chkf9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰  i + <span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chkf9"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkfa">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount = i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkfb"><span class="nb">pose proof</span> hP (length l - iterationCount - <span class="mi">1</span>) j <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> partial2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount = i + <span class="mi">1</span></span></span></span><br><span><var>partial2</var><span class="hyp-type"><b>: </b><span>j &lt;
length
  (bubbleSortAux default
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth j
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)
      (nth (length l - iterationCount - <span class="mi">1</span>)
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkfc"><span class="nb">rewrite</span> &lt;- !bubbleSortAuxPreservesLength, !bubbleSortPassPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount = i + <span class="mi">1</span></span></span></span><br><span><var>partial2</var><span class="hyp-type"><b>: </b><span>j &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth j
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)
      (nth (length l - iterationCount - <span class="mi">1</span>)
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkfd"><span class="nb">pose proof</span> partial2 <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount = i + <span class="mi">1</span></span></span></span><br><span><var>partial2</var><span class="hyp-type"><b>: </b><span>j &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth j
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)
      (nth (length l - iterationCount - <span class="mi">1</span>)
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default
          (<span class="nb">compare</span> A comparator)
          iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l))
       default)
    (nth (length l - iterationCount - <span class="mi">1</span>)
       (bubbleSortAux default
          (<span class="nb">compare</span> A comparator)
          iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l))
       default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkfe"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : length l - iterationCount - <span class="mi">1</span> = i) <span class="kr">in</span> close.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount = i + <span class="mi">1</span></span></span></span><br><span><var>partial2</var><span class="hyp-type"><b>: </b><span>j &lt; length l
â†’ Â¬ <span class="nb">compare</span> A comparator
      (nth j
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)
      (nth (length l - iterationCount - <span class="mi">1</span>)
         (bubbleSortAux default
            (<span class="nb">compare</span> A comparator)
            iterationCount
            (bubbleSortPass default
               (<span class="nb">compare</span> A comparator) l))
         default)</span></span></span><br><span><var>close</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default
          (<span class="nb">compare</span> A comparator)
          iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l))
       default)
    (nth i
       (bubbleSortAux default
          (<span class="nb">compare</span> A comparator)
          iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l))
       default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chkff">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIJ</var><span class="hyp-type"><b>: </b><span>i &lt; j</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount â‰¤ i</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>partial</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰¤ i
â†’ j &lt; length l
  â†’ Â¬ <span class="nb">compare</span> A comparator
        (nth j
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)
        (nth i
           (bubbleSortAux default
              (<span class="nb">compare</span> A comparator)
              iterationCount
              (bubbleSortPass default
                 (<span class="nb">compare</span> A comparator) l))
           default)</span></span></span><br><span><var>hSplit</var><span class="hyp-type"><b>: </b><span>length l - iterationCount â‰  i + <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (partial <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk100">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l)
  (length l - S iterationCount)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk101"><span class="nb">intros</span> i j hI hJ hL.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt;
length
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) 
     (S iterationCount) l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk102"><span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk103"><span class="nb">destruct</span> (decide (i = j)) <span class="kr">as</span> [hDiff | hDiff].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk104" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk104"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk105">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i = j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk106"><span class="nb">subst</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>j â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> irreflexive.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk107">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk108"><span class="nb">destruct</span> (decide (j &lt;&gt; length l - S iterationCount)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk109" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  length l - S iterationCount</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk109"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk10a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk10b"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk10c"><span class="nb">rewrite</span> bubbleSortPassPreservesLength <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length l - iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hP; <span class="nb">rewrite</span> &lt;- <span class="nl">?bubbleSortAuxPreservesLength</span>, <span class="nl">?bubbleSortPassPreservesLength</span>; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk10d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk10e"><span class="nb">assert</span> (hJEq : j = length l - S iterationCount).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = length l - S iterationCount</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk10f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  length l - S iterationCount</span></span></span><br><span><var>hJEq</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk10f"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk110">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j = length l - S iterationCount</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk111">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j â‰¥ length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  length l - S iterationCount</span></span></span><br><span><var>hJEq</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk112"><span class="nb">subst</span> j.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) 
          (S iterationCount) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk113"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)
    (nth i
       (bubbleSortAux default 
          (<span class="nb">compare</span> A comparator) iterationCount
          (bubbleSortPass default
             (<span class="nb">compare</span> A comparator) l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk114"><span class="nb">rewrite</span> moveBubbleSortPassOut.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk115"><span class="nb">destruct</span> (decide (iterationCount = <span class="mi">0</span>)) <span class="kr">as</span> [hZ | hZ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk116" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk116"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk117">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk118"><span class="nb">subst</span> iterationCount.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) - <span class="mi">0</span>)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) <span class="mi">0</span></span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  <span class="mi">0</span> â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
         _0) <span class="mi">0</span>
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
           _0) (length _0 - <span class="mi">0</span>)</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> â‰¤ length l</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - <span class="mi">1</span> â‰¥ length l - <span class="mi">1</span></span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - <span class="mi">1</span> &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - <span class="mi">1</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - <span class="mi">1</span> â‰  length l - <span class="mi">1</span></span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - <span class="mi">1</span>)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)) default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) <span class="mi">0</span> l)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk119"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) - <span class="mi">0</span>)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) <span class="mi">0</span></span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  <span class="mi">0</span> â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
         _0) <span class="mi">0</span>
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator) <span class="mi">0</span>
           _0) (length _0 - <span class="mi">0</span>)</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> â‰¤ length l</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - <span class="mi">1</span> â‰¥ length l - <span class="mi">1</span></span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - <span class="mi">1</span> &lt; length l</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - <span class="mi">1</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - <span class="mi">1</span> â‰  length l - <span class="mi">1</span></span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - <span class="mi">1</span>)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator) l) default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator) l) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">pose proof</span> bubblingUp default comparator l (length l - <span class="mi">1</span>) i <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11b"><span class="nb">pose proof</span> bubblingUp default comparator (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) (length l - S iterationCount) i <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) <span class="kr">as</span> half.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11c"><span class="nb">pose proof</span> (nthBubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) i (length (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) - <span class="mi">1</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>)) <span class="kr">as</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>nth i
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S i)) default =
nth i
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator) iterationCount
           l) - <span class="mi">1</span>)) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11d"><span class="nb">rewrite</span> !(<span class="kp">ltac</span>:(<span class="bp">easy</span>) : bubbleSortPassPartial _ _ _ _ = bubbleSortPass _ _ _) <span class="kr">in</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>nth i
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S i)) default =
nth i
  (bubbleSortPass default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l))
  default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11e"><span class="nb">rewrite</span> &lt;- s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>nth i
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S i)) default =
nth i
  (bubbleSortPass default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l))
  default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk11f"><span class="nb">clear</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk120"><span class="nb">rewrite</span> &lt;- (nthBubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) i (length l - S iterationCount) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>)) <span class="kr">in</span> half.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk121"><span class="nb">pose proof</span> nthBubbleSortPassPartial default (<span class="nb">compare</span> _ comparator) (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) (length l - S iterationCount) (length (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) - <span class="mi">1</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) <span class="kr">as</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default =
nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator) iterationCount
           l) - <span class="mi">1</span>)) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk122"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">easy</span>) : bubbleSortPassPartial _ _ _ _ = bubbleSortPass _ _ _) <span class="kr">in</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default =
nth (length l - S iterationCount)
  (bubbleSortPass default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l))
  default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPass default 
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk123"><span class="nb">rewrite</span> &lt;- s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>s1</var><span class="hyp-type"><b>: </b><span>nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default =
nth (length l - S iterationCount)
  (bubbleSortPass default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l))
  default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S (length l - S iterationCount))) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk124"><span class="nb">clear</span> s1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S (length l - S iterationCount))) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk125"><span class="nb">assert</span> (hFin : (nth (length l - S iterationCount) (bubbleSortPassPartial default (<span class="nb">compare</span> A comparator) (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) (length l - S iterationCount)) default) = (nth (length l - S iterationCount) (bubbleSortPassPartial default (<span class="nb">compare</span> A comparator) (bubbleSortAux default (<span class="nb">compare</span> A comparator) iterationCount l) (S (length l - S iterationCount))) default)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length l - S iterationCount)) default =
nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk126" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>hFin</var><span class="hyp-type"><b>: </b><span>nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length l - S iterationCount)) default =
nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk126"><hr></label><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S (length l - S iterationCount))) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk127">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length l - S iterationCount)) default =
nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk128"><span class="nb">clear</span> hJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length l - S iterationCount)) default =
nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk129"><span class="nb">remember</span> (length l - S iterationCount) <span class="kr">as</span> j <span class="nb">eqn</span>:hJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default =
nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) 
     (S j)) default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk12a"><span class="nb">unfold</span> bubbleSortPassPartial.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (foldl
     (compareAndSwap default (<span class="nb">compare</span> A comparator))
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (seq <span class="mi">0</span> j)) default =
nth j
  (foldl
     (compareAndSwap default (<span class="nb">compare</span> A comparator))
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (seq <span class="mi">0</span> (S j))) default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk12b"><span class="nb">rewrite</span> seq_S, foldl_app, foldlSingleton, Nat.add_0_l, (<span class="kp">ltac</span>:(<span class="bp">easy</span>) : foldl _ _ _ = bubbleSortPassPartial _ _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default =
nth j
  (compareAndSwap default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default 
           (<span class="nb">compare</span> A comparator) iterationCount l) j)
     j) default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk12c"><span class="nb">pose proof</span> proj2 (IHiterationCount l <span class="kp">ltac</span>:(<span class="bp">lia</span>)) <span class="kr">as</span> e.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount l)
  (length l - iterationCount)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default =
nth j
  (compareAndSwap default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default 
           (<span class="nb">compare</span> A comparator) iterationCount l) j)
     j) default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk12d"><span class="nb">pose proof</span> bubbleSortPassPartialPreservesPartitioned default comparator _ _ j e <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) j (j + <span class="mi">1</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> bubbleSortPassPartialPreservesLength, &lt;- bubbleSortAuxPreservesLength; <span class="bp">lia</span>) <span class="kr">as</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount l)
  (length l - iterationCount)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (j + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount
             l) j) default)
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount
             l) j) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default =
nth j
  (compareAndSwap default 
     (<span class="nb">compare</span> A comparator)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default 
           (<span class="nb">compare</span> A comparator) iterationCount l) j)
     j) default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk12e"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount l)
  (length l - iterationCount)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (j + <span class="mi">1</span>)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount
             l) j) default)
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount
             l) j) default)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default =
nth j
  (<span class="kr">if</span>
    <span class="nb">compare</span> A comparator
      (nth (j + <span class="mi">1</span>)
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator)
            (bubbleSortAux default
               (<span class="nb">compare</span> A comparator) iterationCount l)
            j) default)
      (nth j
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator)
            (bubbleSortAux default
               (<span class="nb">compare</span> A comparator) iterationCount l)
            j) default)
   <span class="kr">then</span>
    <span class="nb">swap</span>
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator)
         (bubbleSortAux default 
            (<span class="nb">compare</span> A comparator) iterationCount l) j)
      j (j + <span class="mi">1</span>) default
   <span class="kr">else</span>
    bubbleSortPassPartial default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default 
         (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk12f"><span class="nb">rewrite</span> Is_true_false <span class="kr">in</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i, j</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>j = length l - S iterationCount</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ j</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ j â‰  j</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  j</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>j &lt; length l</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth j
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) j) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount l)
  (length l - iterationCount)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="nb">compare</span> A comparator
  (nth (j + <span class="mi">1</span>)
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator) iterationCount l)
        j) default)
  (nth j
     (bubbleSortPassPartial default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator) iterationCount l)
        j) default) = false</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth j
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default 
        (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default =
nth j
  (<span class="kr">if</span>
    <span class="nb">compare</span> A comparator
      (nth (j + <span class="mi">1</span>)
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator)
            (bubbleSortAux default
               (<span class="nb">compare</span> A comparator) iterationCount l)
            j) default)
      (nth j
         (bubbleSortPassPartial default
            (<span class="nb">compare</span> A comparator)
            (bubbleSortAux default
               (<span class="nb">compare</span> A comparator) iterationCount l)
            j) default)
   <span class="kr">then</span>
    <span class="nb">swap</span>
      (bubbleSortPassPartial default
         (<span class="nb">compare</span> A comparator)
         (bubbleSortAux default 
            (<span class="nb">compare</span> A comparator) iterationCount l) j)
      j (j + <span class="mi">1</span>) default
   <span class="kr">else</span>
    bubbleSortPassPartial default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default 
         (<span class="nb">compare</span> A comparator) iterationCount l) j)
  default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> f.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk130">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>comparator</var><span class="hyp-type"><b>: </b><span>Comparator A</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ suffixSorted default
      (<span class="nb">compare</span> A comparator)
      (bubbleSortAux default
         (<span class="nb">compare</span> A comparator)
         iterationCount _0)
      iterationCount
    âˆ§ partitioned default
        (<span class="nb">compare</span> A comparator)
        (bubbleSortAux default
           (<span class="nb">compare</span> A comparator)
           iterationCount _0)
        (length _0 - iterationCount)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span>suffixSorted default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l)) iterationCount</span></span></span><br><span><var>hP</var><span class="hyp-type"><b>: </b><span>partitioned default (<span class="nb">compare</span> A comparator)
  (bubbleSortAux default 
     (<span class="nb">compare</span> A comparator) iterationCount
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l))
  (length
     (bubbleSortPass default
        (<span class="nb">compare</span> A comparator) l) -
   iterationCount)</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hI</var><span class="hyp-type"><b>: </b><span>i â‰¤ length l - S iterationCount</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>Â¬ length l - S iterationCount
  â‰  length l - S iterationCount</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>i â‰  length l - S iterationCount</span></span></span><br><span><var>hL</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount &lt; length l</span></span></span><br><span><var>hJ</var><span class="hyp-type"><b>: </b><span>length l - S iterationCount
â‰¥ length l - S iterationCount</span></span></span><br><span><var>hZ</var><span class="hyp-type"><b>: </b><span>iterationCount â‰  <span class="mi">0</span></span></span></span><br><span><var>half</var><span class="hyp-type"><b>: </b><span>Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l)
          (length l - S iterationCount))
       default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator)
             iterationCount l) 
          (S i)) default)</span></span></span><br><span><var>hFin</var><span class="hyp-type"><b>: </b><span>nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (length l - S iterationCount)) default =
nth (length l - S iterationCount)
  (bubbleSortPassPartial default
     (<span class="nb">compare</span> A comparator)
     (bubbleSortAux default
        (<span class="nb">compare</span> A comparator) iterationCount l)
     (S (length l - S iterationCount))) default</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Â¬ <span class="nb">compare</span> A comparator
    (nth (length l - S iterationCount)
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S (length l - S iterationCount))) default)
    (nth i
       (bubbleSortPassPartial default
          (<span class="nb">compare</span> A comparator)
          (bubbleSortAux default
             (<span class="nb">compare</span> A comparator) iterationCount l)
          (S i)) default)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> hFin <span class="kr">in</span> half.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk131"><span class="kn">Lemma</span> <span class="nf">bubbleSortPermutation</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">default</span> : A) (<span class="nv">compare</span> : A -&gt; A -&gt; bool) (<span class="nv">l</span> : list A) : Permutation l (bubbleSort default <span class="nb">compare</span> l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSort default <span class="nb">compare</span> l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk132"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSort default <span class="nb">compare</span> l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk133"><span class="nb">unfold</span> bubbleSort.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> (length l) l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk134"><span class="nb">remember</span> (length l) <span class="kr">as</span> iterationCount <span class="nb">eqn</span>:HeqiterationCount.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqiterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk135"><span class="nb">assert</span> (hIterationCount : iterationCount &lt;= length l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqiterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iterationCount â‰¤ length l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk136" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqiterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount = length l</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount â‰¤ length l</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk136"><hr></label><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount l</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk137">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqiterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount = length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iterationCount â‰¤ length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk138">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>HeqiterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount = length l</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk139"><span class="nb">clear</span> HeqiterationCount.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>iterationCount â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk13a"><span class="nb">induction</span> iterationCount <span class="kr">as</span> [| iterationCount IHiterationCount] <span class="kr">in</span> l, hIterationCount |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> <span class="mi">0</span> l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk13b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk13b"><hr></label><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> (S iterationCount) l</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk13c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> â‰¤ length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> <span class="mi">0</span> l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk13d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> (S iterationCount) l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk13e"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (bubbleSortPass default <span class="nb">compare</span> l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk13f"><span class="nb">remember</span> (bubbleSortAux default <span class="nb">compare</span> iterationCount l) <span class="kr">as</span> pastIteration <span class="nb">eqn</span>:HeqpastIteration.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (bubbleSortPass default <span class="nb">compare</span> l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk140"><span class="nb">pose proof</span> (IHiterationCount l <span class="kp">ltac</span>:(<span class="bp">lia</span>)) <span class="kr">as</span> step.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (bubbleSortPass default <span class="nb">compare</span> l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk141"><span class="nb">unfold</span> bubbleSortPass.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk142"><span class="nb">assert</span> (hCompareAndSwapLength : <span class="kr">forall</span> <span class="nv">t</span> (<span class="nv">m</span> : list A), length m = length (compareAndSwap default <span class="nb">compare</span> m t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length (compareAndSwap default <span class="nb">compare</span> _1 _0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk143" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk143"><hr></label><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk144">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length (compareAndSwap default <span class="nb">compare</span> _1 _0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk145"><span class="nb">intros</span> m t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length t = length (compareAndSwap default <span class="nb">compare</span> t m)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk146"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length t =
length
  (<span class="kr">if</span>
    <span class="nb">compare</span> (nth (m + <span class="mi">1</span>) t default) (nth m t default)
   <span class="kr">then</span> <span class="nb">swap</span> t m (m + <span class="mi">1</span>) default
   <span class="kr">else</span> t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk147"><span class="nb">destruct</span> (<span class="nb">compare</span> _ _); <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length t = length (<span class="nb">swap</span> t m (m + <span class="mi">1</span>) default)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> swapPreservesLength.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk148">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk149"><span class="nb">assert</span> (hFoldl : <span class="kr">forall</span> <span class="nv">k</span>, length l = length (foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> k))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk14a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk14a"><hr></label><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk14b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk14c"><span class="nb">clear</span> HeqpastIteration pastIteration.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk14d"><span class="nb">intro</span> k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> k))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk14e"><span class="nb">induction</span> k <span class="kr">as</span> [| k hK]; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hK</var><span class="hyp-type"><b>: </b><span>length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S k)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk14f"><span class="nb">rewrite</span> seq_S, Nat.add_0_l, foldl_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hK</var><span class="hyp-type"><b>: </b><span>length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>)
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) [k])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk150"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hK</var><span class="hyp-type"><b>: </b><span>length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l =
length
  (compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- hCompareAndSwapLength.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk151">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk152"><span class="nb">assert</span> (hGoal : <span class="kr">forall</span> <span class="nv">k</span>, k &lt; length l -&gt; Permutation l (foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> k))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
         (seq <span class="mi">0</span> _0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk153" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk153"><hr></label><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk154">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
         (seq <span class="mi">0</span> _0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk155"><span class="nb">intros</span> k h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>k &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> k)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk156"><span class="nb">clear</span> hIterationCount IHiterationCount HeqpastIteration step iterationCount.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>k &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> k)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk157"><span class="nb">induction</span> k <span class="kr">as</span> [| k IH] <span class="kr">in</span> l, h, hFoldl |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> <span class="mi">0</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk158" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk158"><hr></label><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S k))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk159">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt; length l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> <span class="mi">0</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk15a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (S k))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk15b"><span class="nb">rewrite</span> seq_S, Nat.add_0_l, foldl_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) [k]</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk15c"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk15d"><span class="nb">pose proof</span> IH l hFoldl <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> bridge.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk15e"><span class="nb">assert</span> (hS : <span class="kr">forall</span> <span class="nv">l</span> : list A, k + <span class="mi">1</span> &lt; length l -&gt; Permutation l (compareAndSwap default <span class="nb">compare</span> l k)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  k + <span class="mi">1</span> &lt; length _0
  â†’ _0 â‰¡â‚š compareAndSwap default <span class="nb">compare</span> _0 k</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk15f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  k + <span class="mi">1</span> &lt; length _0
  â†’ _0 â‰¡â‚š compareAndSwap default <span class="nb">compare</span> _0 k</span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk15f"><hr></label><div class="goal-conclusion">l
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk160">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  k + <span class="mi">1</span> &lt; length _0
  â†’ _0 â‰¡â‚š compareAndSwap default <span class="nb">compare</span> _0 k</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk161"><span class="nb">intros</span> m hK.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hK</var><span class="hyp-type"><b>: </b><span>k + <span class="mi">1</span> &lt; length m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m â‰¡â‚š compareAndSwap default <span class="nb">compare</span> m k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk162"><span class="nb">unfold</span> compareAndSwap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hK</var><span class="hyp-type"><b>: </b><span>k + <span class="mi">1</span> &lt; length m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m
â‰¡â‚š (<span class="kr">if</span>
     <span class="nb">compare</span> (nth (k + <span class="mi">1</span>) m default) (nth k m default)
    <span class="kr">then</span> <span class="nb">swap</span> m k (k + <span class="mi">1</span>) default
    <span class="kr">else</span> m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk163"><span class="nb">destruct</span> (<span class="nb">compare</span> (nth (k + <span class="mi">1</span>) m default) (nth k m default)); <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hK</var><span class="hyp-type"><b>: </b><span>k + <span class="mi">1</span> &lt; length m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">m â‰¡â‚š <span class="nb">swap</span> m k (k + <span class="mi">1</span>) default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (swapPermutation default m k (k + <span class="mi">1</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>)).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk164">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  k + <span class="mi">1</span> &lt; length _0
  â†’ _0 â‰¡â‚š compareAndSwap default <span class="nb">compare</span> _0 k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk165"><span class="nb">pose proof</span> hFoldl k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  k + <span class="mi">1</span> &lt; length _0
  â†’ _0 â‰¡â‚š compareAndSwap default <span class="nb">compare</span> _0 k</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk166"><span class="nb">pose proof</span> hS (foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> k)) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> final.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l, pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>S k &lt; length l</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  (<span class="kr">âˆ€</span> <span class="nv">_1</span> : nat,
     length _0 =
     length
       (foldl (compareAndSwap default <span class="nb">compare</span>) _0
          (seq <span class="mi">0</span> _1)))
  â†’ k &lt; length _0
    â†’ _0
      â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
           _0 (seq <span class="mi">0</span> k)</span></span></span><br><span><var>bridge</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k)</span></span></span><br><span><var>hS</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  k + <span class="mi">1</span> &lt; length _0
  â†’ _0 â‰¡â‚š compareAndSwap default <span class="nb">compare</span> _0 k</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>length l =
length
  (foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> k))</span></span></span><br><span><var>final</var><span class="hyp-type"><b>: </b><span>foldl (compareAndSwap default <span class="nb">compare</span>) l
  (seq <span class="mi">0</span> k)
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š compareAndSwap default <span class="nb">compare</span>
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> k)) k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- final.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk167">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk168"><span class="nb">destruct</span> (decide (length l = <span class="mi">0</span>)) <span class="kr">as</span> [hNil | hNil].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="BubbleSortProperties-v-chk169" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l â‰  <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="BubbleSortProperties-v-chk169"><hr></label><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk16a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk16b"><span class="nb">rewrite</span> hNil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (<span class="mi">0</span> - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk16c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l â‰  <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk16d"><span class="nb">pose proof</span> hGoal (length l - <span class="mi">1</span>) <span class="kp">ltac</span>:(<span class="bp">lia</span>) <span class="kr">as</span> inch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l â‰  <span class="mi">0</span></span></span></span><br><span><var>inch</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk16e"><span class="nb">pose proof</span> IHiterationCount (foldl (compareAndSwap default <span class="nb">compare</span>) l (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))) <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- hFoldl; <span class="bp">lia</span>) <span class="kr">as</span> more.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l â‰  <span class="mi">0</span></span></span></span><br><span><var>inch</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))</span></span></span><br><span><var>more</var><span class="hyp-type"><b>: </b><span>foldl (compareAndSwap default <span class="nb">compare</span>) l
  (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk16f"><span class="nb">rewrite</span> &lt;- more.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l â‰  <span class="mi">0</span></span></span></span><br><span><var>inch</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))</span></span></span><br><span><var>more</var><span class="hyp-type"><b>: </b><span>foldl (compareAndSwap default <span class="nb">compare</span>) l
  (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="BubbleSortProperties-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="BubbleSortProperties-v-chk170"><span class="nb">apply</span> hGoal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>compare</var><span class="hyp-type"><b>: </b><span>A â†’ A â†’ bool</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>iterationCount</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hIterationCount</var><span class="hyp-type"><b>: </b><span>S iterationCount â‰¤ length l</span></span></span><br><span><var>IHiterationCount</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : list A,
  iterationCount â‰¤ length _0
  â†’ _0
    â‰¡â‚š bubbleSortAux default
         <span class="nb">compare</span> iterationCount _0</span></span></span><br><span><var>pastIteration</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>HeqpastIteration</var><span class="hyp-type"><b>: </b><span>pastIteration =
bubbleSortAux default <span class="nb">compare</span>
  iterationCount l</span></span></span><br><span><var>step</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     l</span></span></span><br><span><var>hCompareAndSwapLength</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> (<span class="nv">_0</span> : nat) (<span class="nv">_1</span> : list A),
  length _1 =
  length
    (compareAndSwap default
       <span class="nb">compare</span> _1 _0)</span></span></span><br><span><var>hFoldl</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  length l =
  length
    (foldl (compareAndSwap default <span class="nb">compare</span>) l
       (seq <span class="mi">0</span> _0))</span></span></span><br><span><var>hGoal</var><span class="hyp-type"><b>: </b><span><span class="kr">âˆ€</span> <span class="nv">_0</span> : nat,
  _0 &lt; length l
  â†’ l
    â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>)
         l (seq <span class="mi">0</span> _0)</span></span></span><br><span><var>hNil</var><span class="hyp-type"><b>: </b><span>length l â‰  <span class="mi">0</span></span></span></span><br><span><var>inch</var><span class="hyp-type"><b>: </b><span>l
â‰¡â‚š foldl (compareAndSwap default <span class="nb">compare</span>) l
     (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))</span></span></span><br><span><var>more</var><span class="hyp-type"><b>: </b><span>foldl (compareAndSwap default <span class="nb">compare</span>) l
  (seq <span class="mi">0</span> (length l - <span class="mi">1</span>))
â‰¡â‚š bubbleSortAux default <span class="nb">compare</span> iterationCount
     (foldl (compareAndSwap default <span class="nb">compare</span>) l
        (seq <span class="mi">0</span> (length l - <span class="mi">1</span>)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length l - <span class="mi">1</span> &lt; length l</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span></pre>
    </article>
  </body>
</html>
