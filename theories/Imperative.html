<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>Imperative.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> CoqCP <span class="kn">Require Import</span> Options.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk0"><span class="kn">From</span> stdpp <span class="kn">Require Import</span> strings.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file ssrmatching_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file ssreflect_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Coq.Lists.List.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Coq.Logic.Eqdep_dec.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> ZArith.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Coq.Strings.Ascii.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Coq.Logic.FunctionalExtensionality.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Open Scope</span> Z_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">Environment</span> (<span class="nv">arrayIndex</span> : <span class="kt">Type</span>) := { arrayType: arrayIndex -&gt; <span class="kt">Type</span>; arrays: <span class="kr">forall</span> (<span class="nv">name</span> : arrayIndex), list (arrayType name) }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">Locals</span> (<span class="nv">variableIndex</span> : <span class="kt">Type</span>) := { numbers: variableIndex -&gt; Z; booleans: variableIndex -&gt; bool }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">Action</span> (<span class="nv">effectType</span> : <span class="kt">Type</span>) (<span class="nv">effectResponse</span> : effectType -&gt; <span class="kt">Type</span>) (<span class="nv">returnType</span> : <span class="kt">Type</span>) :=
| Done (returnValue : returnType)
| Dispatch (effect : effectType) (continuation : effectResponse effect -&gt; Action effectType effectResponse returnType).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">bind</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span> <span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">a</span> : Action effectType effectResponse A) (<span class="nv">f</span> : A -&gt; Action effectType effectResponse B) : Action effectType effectResponse B :=
  <span class="kr">match</span> a <span class="kr">with</span>
  | Done _ _ _ value =&gt; f value
  | Dispatch _ _ _ effect continuation =&gt; Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">response</span> =&gt; bind (continuation response) f)
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;x &gt;&gt;= f&quot;</span> := (bind x f) (<span class="kn">at level</span> <span class="mi">50</span>, <span class="kn">left associativity</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1"><span class="kn">Lemma</span> <span class="nf">bindDispatch</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span> <span class="nv">A</span> <span class="nv">B</span>} <span class="nv">effect</span> (<span class="nv">continuation</span> : effectResponse effect -&gt; Action effectType effectResponse A) (<span class="nv">f</span> : A -&gt; Action effectType effectResponse B) : Dispatch _ _ _ effect continuation &gt;&gt;= f = Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">response</span> =&gt; continuation response &gt;&gt;= f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>effectResponse effect
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch effectType effectResponse A effect
  continuation &gt;&gt;= f =
Dispatch effectType effectResponse B effect
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse effect, continuation _0 &gt;&gt;= f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>effectResponse effect
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch effectType effectResponse A effect
  continuation &gt;&gt;= f =
Dispatch effectType effectResponse B effect
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse effect, continuation _0 &gt;&gt;= f)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk3"><span class="kn">Lemma</span> <span class="nf">leftIdentity</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span> <span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">x</span> : A) (<span class="nv">f</span> : A -&gt; Action effectType effectResponse B) : bind (Done _ _ _ x) f = f x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Done effectType effectResponse A x &gt;&gt;= f = f x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Done effectType effectResponse A x &gt;&gt;= f = f x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk5"><span class="kn">Lemma</span> <span class="nf">rightIdentity</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span> <span class="nv">A</span>} (<span class="nv">x</span> : Action effectType effectResponse A) : bind x (Done _ _ _) = x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action effectType effectResponse A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &gt;&gt;= Done effectType effectResponse A = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action effectType effectResponse A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &gt;&gt;= Done effectType effectResponse A = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7"><span class="nb">induction</span> x <span class="kr">as</span> [| a next IH]; <span class="kp">try</span> <span class="bp">easy</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch effectType effectResponse A a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
     next _0 &gt;&gt;= Done effectType effectResponse A) =
Dispatch effectType effectResponse A a next</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk8"><span class="nb">assert</span> (h : (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= Done effectType effectResponse A) = next).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= Done effectType effectResponse A) =
next</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= Done effectType effectResponse A) =
next</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk9"><hr></label><div class="goal-conclusion">Dispatch effectType effectResponse A a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
     next _0 &gt;&gt;= Done effectType effectResponse A) =
Dispatch effectType effectResponse A a next</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= Done effectType effectResponse A) =
next</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb"><span class="nb">apply</span> functional_extensionality.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= Done effectType effectResponse A =
  next _0</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= Done effectType effectResponse A) =
next</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch effectType effectResponse A a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
     next _0 &gt;&gt;= Done effectType effectResponse A) =
Dispatch effectType effectResponse A a next</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd"><span class="kn">Lemma</span> <span class="nf">bindAssoc</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>} (<span class="nv">x</span> : Action effectType effectResponse A) (<span class="nv">f</span> : A -&gt; Action effectType effectResponse B) (<span class="nv">g</span> : B -&gt; Action effectType effectResponse C) : (bind x (<span class="kr">fun</span> <span class="nv">x</span> =&gt; bind (f x) g)) = (bind (bind x f) g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_0</span> : A, f _0 &gt;&gt;= g) = x &gt;&gt;= f &gt;&gt;= g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_0</span> : A, f _0 &gt;&gt;= g) = x &gt;&gt;= f &gt;&gt;= g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf"><span class="nb">induction</span> x <span class="kr">as</span> [| a next IH]; <span class="kp">try</span> <span class="bp">easy</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch effectType effectResponse C a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
     next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
Dispatch effectType effectResponse C a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk10"><span class="nb">assert</span> (h : (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) = (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk11" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk11"><hr></label><div class="goal-conclusion">Dispatch effectType effectResponse C a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
     next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
Dispatch effectType effectResponse C a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk12">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13"><span class="nb">apply</span> functional_extensionality.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>effectType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effectResponse</var><span class="hyp-type"><b>: </b><span>effectType ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>effectType</span></span></span><br><span><var>next</var><span class="hyp-type"><b>: </b><span>effectResponse a
‚Üí Action effectType effectResponse A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A ‚Üí Action effectType effectResponse B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B ‚Üí Action effectType effectResponse C</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : effectResponse a,
  next _0 &gt;&gt;= (<span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
  next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>(<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
   next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch effectType effectResponse C a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a,
     next _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : A, f _1 &gt;&gt;= g) =
Dispatch effectType effectResponse C a
  (<span class="kr">Œª</span> <span class="nv">_0</span> : effectResponse a, next _0 &gt;&gt;= f &gt;&gt;= g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">shortCircuitAnd</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action effectType effectResponse bool) := bind a (<span class="kr">fun</span> <span class="nv">x</span> =&gt; <span class="kr">match</span> x <span class="kr">with</span>
  | false =&gt; Done _ _ _ false
  | true =&gt; b
  <span class="kr">end</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">shortCircuitOr</span> {<span class="nv">effectType</span> <span class="nv">effectResponse</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action effectType effectResponse bool) := bind a (<span class="kr">fun</span> <span class="nv">x</span> =&gt; <span class="kr">match</span> x <span class="kr">with</span>
  | true =&gt; Done _ _ _ true
  | false =&gt; b
  <span class="kr">end</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">BasicEffect</span> :=
| Trap
| Flush
| ReadChar
| WriteChar (value : Z)
| Donate (money : Z) (address : list Z)
| Invoke (money : Z) (address : list Z) (array : list Z)
| GetSender
| GetMoney
| GetCommunicationSize
| ReadByte (index : Z)
| SetByte (index value : Z).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">basicEffectEqualityDecidable</span> : EqDecision BasicEffect := <span class="kp">ltac</span>:(solve_decision).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">basicEffectReturnValue</span> (<span class="nv">effect</span> : BasicEffect): <span class="kt">Type</span> :=
  <span class="kr">match</span> effect <span class="kr">with</span>
  | Trap =&gt; <span class="kt">False</span>
  | Flush =&gt; unit
  | ReadChar =&gt; Z
  | WriteChar _ =&gt; unit
  | Donate _ _ =&gt; unit
  | Invoke _ _ _ =&gt; list Z
  | GetSender =&gt; list Z
  | GetMoney =&gt; Z
  | GetCommunicationSize =&gt; Z
  | ReadByte _ =&gt; Z
  | SetByte _ _ =&gt; unit
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Unfold lemmas for each constructor *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15"><span class="kn">Lemma</span> <span class="nf">unfold_Trap</span> :
  basicEffectReturnValue Trap = <span class="kt">False</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue Trap = <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue Trap = <span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk17"><span class="kn">Lemma</span> <span class="nf">unfold_Flush</span> :
  basicEffectReturnValue Flush = unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue Flush = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk18"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue Flush = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk19"><span class="kn">Lemma</span> <span class="nf">unfold_ReadChar</span> :
  basicEffectReturnValue ReadChar = Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue ReadChar = Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue ReadChar = Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1b"><span class="kn">Lemma</span> <span class="nf">unfold_WriteChar</span> <span class="nv">c</span> :
  basicEffectReturnValue (WriteChar c) = unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (WriteChar c) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (WriteChar c) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1d"><span class="kn">Lemma</span> <span class="nf">unfold_Donate</span> <span class="nv">a</span> <span class="nv">b</span> :
  basicEffectReturnValue (Donate a b) = unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (Donate a b) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (Donate a b) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk1f"><span class="kn">Lemma</span> <span class="nf">unfold_Invoke</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> :
  basicEffectReturnValue (Invoke a b c) = list Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (Invoke a b c) = list Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk20"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (Invoke a b c) = list Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk21"><span class="kn">Lemma</span> <span class="nf">unfold_GetSender</span> :
  basicEffectReturnValue GetSender = list Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue GetSender = list Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue GetSender = list Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk23"><span class="kn">Lemma</span> <span class="nf">unfold_GetMoney</span> :
  basicEffectReturnValue GetMoney = Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue GetMoney = Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk24"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue GetMoney = Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk25"><span class="kn">Lemma</span> <span class="nf">unfold_GetCommunicationSize</span> :
  basicEffectReturnValue GetCommunicationSize = Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue GetCommunicationSize = Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk26"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue GetCommunicationSize = Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk27"><span class="kn">Lemma</span> <span class="nf">unfold_ReadByte</span> <span class="nv">b</span> :
  basicEffectReturnValue (ReadByte b) = Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (ReadByte b) = Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk28"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (ReadByte b) = Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk29"><span class="kn">Lemma</span> <span class="nf">unfold_SetByte</span> <span class="nv">a</span> <span class="nv">b</span> :
  basicEffectReturnValue (SetByte a b) = unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (SetByte a b) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk2a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>a, b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">basicEffectReturnValue (SetByte a b) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Autorewrite database *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Trap : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Flush : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_ReadChar : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_WriteChar : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Donate : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Invoke : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_GetSender : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_GetMoney : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_GetCommunicationSize : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_ReadByte : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_SetByte : basicEffectReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">WithArrays</span> (<span class="nv">arrayIndex</span> : <span class="kt">Type</span>) (<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>) :=
| DoBasicEffect (effect : BasicEffect)
| Retrieve (arrayName : arrayIndex) (index : Z)
| Store (arrayName : arrayIndex) (index : Z) (value : arrayType arrayName).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk2b">#[export] <span class="kn">Instance</span> <span class="nf">withArraysEqualityDecidable</span> {<span class="nv">arrayIndex</span> : <span class="kt">Type</span>} {<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>} (<span class="nv">hIndexEq</span> : EqDecision arrayIndex) (<span class="nv">hArrayType</span> : <span class="kr">forall</span> <span class="nv">name</span>, EqDecision (arrayType name)) : EqDecision (WithArrays arrayIndex arrayType).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">EqDecision (WithArrays arrayIndex arrayType)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk2c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">EqDecision (WithArrays arrayIndex arrayType)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk2d"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision (a = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk2e"><span class="nb">destruct</span> a <span class="kr">as</span> [e | a i | a i v]; <span class="nb">destruct</span> b <span class="kr">as</span> [e1 | a1 i1 | a1 i1 v1]; <span class="kp">try</span> ((<span class="nb">left</span>; <span class="bp">easy</span>) || (<span class="nb">right</span>; <span class="bp">easy</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e, e1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk2f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk2f"><hr></label><div class="goal-conclusion">Decision
  (Retrieve arrayIndex arrayType a i =
   Retrieve arrayIndex arrayType a1 i1)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk30" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>arrayType a1</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk30"><hr></label><div class="goal-conclusion">Decision
  (Store arrayIndex arrayType a i v =
   Store arrayIndex arrayType a1 i1 v1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk31">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e, e1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk32"><span class="nb">destruct</span> (decide (e = e1)) <span class="kr">as</span> [h | h]; <span class="kp">try</span> <span class="nb">subst</span> e1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk33" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e, e1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>e ‚â† e1</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk33"><hr></label><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk34">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">left</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk35">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e, e1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>e ‚â† e1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk36">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>e, e1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>e ‚â† e1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (DoBasicEffect arrayIndex arrayType e =
   DoBasicEffect arrayIndex arrayType e1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="nb">intro</span> x; <span class="bp">now</span> <span class="nb">inversion</span> x.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk37">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Retrieve arrayIndex arrayType a i =
   Retrieve arrayIndex arrayType a1 i1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk38"><span class="nb">destruct</span> (decide (a = a1)) <span class="kr">as</span> [h | h]; <span class="kp">try</span> <span class="nb">subst</span> a1; <span class="nb">destruct</span> (decide (i = i1)) <span class="kr">as</span> [h1 | h1]; <span class="kp">try</span> <span class="nb">subst</span> i1; <span class="kp">try</span> <span class="bp">now</span> <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i, i1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>i ‚â† i1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Retrieve arrayIndex arrayType a i =
   Retrieve arrayIndex arrayType a i1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk39" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>a ‚â† a1</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk39"><hr></label><div class="goal-conclusion">Decision
  (Retrieve arrayIndex arrayType a i =
   Retrieve arrayIndex arrayType a1 i)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk3a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>a ‚â† a1</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>i ‚â† i1</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk3a"><hr></label><div class="goal-conclusion">Decision
  (Retrieve arrayIndex arrayType a i =
   Retrieve arrayIndex arrayType a1 i1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">all</span>: <span class="nb">right</span>; <span class="nb">intro</span> x; <span class="bp">now</span> <span class="nb">inversion</span> x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk3b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>arrayType a1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Store arrayIndex arrayType a i v =
   Store arrayIndex arrayType a1 i1 v1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk3c"><span class="nb">destruct</span> (decide (a = a1)) <span class="kr">as</span> [h | h]; <span class="kp">try</span> <span class="nb">subst</span> a1; <span class="nb">destruct</span> (decide (i = i1)) <span class="kr">as</span> [h1 | h1]; <span class="kp">try</span> <span class="nb">subst</span> i1; <span class="kp">try</span> (<span class="nb">right</span>; <span class="nb">intro</span> x; <span class="bp">now</span> <span class="nb">inversion</span> x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v, v1</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Store arrayIndex arrayType a i v =
   Store arrayIndex arrayType a i v1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk3d"><span class="nb">destruct</span> (hArrayType a v v1) <span class="kr">as</span> [h | h]; <span class="kp">try</span> (<span class="nb">subst</span> v1; <span class="bp">now</span> <span class="nb">left</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v, v1</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>v ‚â† v1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decision
  (Store arrayIndex arrayType a i v =
   Store arrayIndex arrayType a i v1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk3e"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v, v1</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>v ‚â† v1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Store arrayIndex arrayType a i v
‚â† Store arrayIndex arrayType a i v1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk3f"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v, v1</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>v ‚â† v1</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Store arrayIndex arrayType a i v =
Store arrayIndex arrayType a i v1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk40"><span class="nb">inversion</span> x <span class="kr">as</span> [x1].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>hIndexEq</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>hArrayType</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex,
  EqDecision (arrayType _0)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>v, v1</var><span class="hyp-type"><b>: </b><span>arrayType a</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>v ‚â† v1</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Store arrayIndex arrayType a i v =
Store arrayIndex arrayType a i v1</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>existT a v = existT a v1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inj_pair2_eq_dec <span class="kr">in</span> x1; <span class="kp">try</span> <span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">withArraysReturnValue</span> {<span class="nv">arrayIndex</span>} {<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>} (<span class="nv">effect</span> : WithArrays arrayIndex arrayType) : <span class="kt">Type</span> :=
  <span class="kr">match</span> effect <span class="kr">with</span>
  | DoBasicEffect _ _ effect =&gt; basicEffectReturnValue effect
  | Retrieve _ _ arrayName _ =&gt; arrayType arrayName
  | Store _ _ _ _ _ =&gt; unit
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Unfold lemmas for each constructor *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk41"><span class="kn">Lemma</span> <span class="nf">unfold_DoBasicEffect</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">effect1</span> :
  @withArraysReturnValue arrayIndex arrayType (DoBasicEffect _ _ effect1) =
  basicEffectReturnValue effect1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType effect1) =
basicEffectReturnValue effect1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk42"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect1</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType effect1) =
basicEffectReturnValue effect1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk43"><span class="kn">Lemma</span> <span class="nf">unfold_Retrieve</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">arrayName</span> <span class="nv">b</span> :
  @withArraysReturnValue arrayIndex arrayType (Retrieve _ _ arrayName b) =
  arrayType arrayName.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName b) =
arrayType arrayName</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk44"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName b) =
arrayType arrayName</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk45"><span class="kn">Lemma</span> <span class="nf">unfold_Store</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> :
  @withArraysReturnValue arrayIndex arrayType (Store _ _ c d e) =
  unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>arrayType c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Store arrayIndex arrayType c d e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk46"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>arrayType c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Store arrayIndex arrayType c d e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Autorewrite database *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> withArraysReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_DoBasicEffect : withArraysReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Retrieve : withArraysReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Store :
 withArraysReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">WithLocalVariables</span> (<span class="nv">arrayIndex</span> : <span class="kt">Type</span>) (<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>) (<span class="nv">variableIndex</span> : <span class="kt">Type</span>) :=
| DoWithArrays (effect : WithArrays arrayIndex arrayType)
| BooleanLocalGet (name : variableIndex)
| BooleanLocalSet (name : variableIndex) (value : bool)
| NumberLocalGet (name : variableIndex)
| NumberLocalSet (name : variableIndex) (value : Z)
| AddressLocalGet (name : variableIndex)
| AddressLocalSet (name : variableIndex) (value : list Z).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">withLocalVariablesEqualityDecidable</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">hArrayIndex</span> : EqDecision arrayIndex) (<span class="nv">hArrayType</span> : <span class="kr">forall</span> <span class="nv">name</span>, EqDecision (arrayType name)) (<span class="nv">hVariableIndex</span> : EqDecision variableIndex) : EqDecision (WithLocalVariables arrayIndex arrayType variableIndex) := <span class="kp">ltac</span>:(solve_decision).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">withLocalVariablesReturnValue</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">effect</span> : WithLocalVariables arrayIndex arrayType variableIndex) : <span class="kt">Type</span> :=
  <span class="kr">match</span> effect <span class="kr">with</span>
  | DoWithArrays _ _ _ effect =&gt; withArraysReturnValue effect
  | BooleanLocalGet _ _ _ _ =&gt; bool
  | BooleanLocalSet _ _ _ _ _ =&gt; unit
  | NumberLocalGet _ _ _ _ =&gt; Z
  | NumberLocalSet _ _ _ _ _ =&gt; unit
  | AddressLocalGet _ _ _ _ =&gt; list Z
  | AddressLocalSet _ _ _ _ _ =&gt; unit
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Unfold lemmas for each constructor *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk47"><span class="kn">Lemma</span> <span class="nf">unfold_DoWithArrays</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">effect</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (DoWithArrays _ _ _ effect) =
  withArraysReturnValue effect.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType variableIndex
     effect) = withArraysReturnValue effect</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk48"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType variableIndex
     effect) = withArraysReturnValue effect</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk49"><span class="kn">Lemma</span> <span class="nf">unfold_BooleanLocalGet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">d</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (BooleanLocalGet _ _ _ d) =
  bool.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType variableIndex
     d) = bool</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType variableIndex
     d) = bool</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4b"><span class="kn">Lemma</span> <span class="nf">unfold_BooleanLocalSet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">d</span> <span class="nv">e</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (BooleanLocalSet _ _ _ d e) =
  unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType variableIndex
     d e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType variableIndex
     d e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4d"><span class="kn">Lemma</span> <span class="nf">unfold_NumberLocalGet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">d</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (NumberLocalGet _ _ _ d) =
  Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType variableIndex d) =
Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType variableIndex d) =
Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk4f"><span class="kn">Lemma</span> <span class="nf">unfold_NumberLocalSet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">d</span> <span class="nv">e</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (NumberLocalSet _ _ _ d e) =
  unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType variableIndex d
     e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk50"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType variableIndex d
     e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk51"><span class="kn">Lemma</span> <span class="nf">unfold_AddressLocalGet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">d</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (AddressLocalGet _ _ _ d) =
  list Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType variableIndex
     d) = list Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk52"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType variableIndex
     d) = list Z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk53"><span class="kn">Lemma</span> <span class="nf">unfold_AddressLocalSet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">d</span> <span class="nv">e</span> :
  @withLocalVariablesReturnValue arrayIndex arrayType variableIndex (AddressLocalSet _ _ _ d e) =
  unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType variableIndex
     d e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk54"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType variableIndex
     d e) = ()%type</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Autorewrite database *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_DoWithArrays : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_BooleanLocalGet : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_BooleanLocalSet : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_NumberLocalGet : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_NumberLocalSet : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_AddressLocalGet : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_AddressLocalSet : withLocalVariablesReturnValue_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* To automatically rewrite using these lemmas, you can use: *)</span>

<span class="c">(* autorewrite with withLocalVariablesReturnValue_unfold. *)</span>

<span class="c">(* Combined autorewrite database *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_DoWithArrays : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_BooleanLocalGet : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_BooleanLocalSet : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_NumberLocalGet : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_NumberLocalSet : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_AddressLocalGet : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_AddressLocalSet : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_DoBasicEffect : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Retrieve : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Store : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Trap : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Flush : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_ReadChar : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_WriteChar : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Donate : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_Invoke : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_GetSender : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_GetMoney : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_GetCommunicationSize : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_ReadByte : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfold_SetByte : combined_unfold.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* To automatically rewrite using all the lemmas, use: *)</span>
<span class="c">(* autorewrite with combined_unfold. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">LoopOutcome</span> :=
| KeepGoing
| Stop.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">WithinLoop</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> :=
| DoWithLocalVariables (effect : WithLocalVariables arrayIndex arrayType variableIndex)
| DoContinue
| DoBreak.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">withinLoopEqualityDecidable</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">hArrayType</span> : <span class="kr">forall</span> <span class="nv">name</span>, EqDecision (arrayType name)) (<span class="nv">hArrayIndex</span> : EqDecision arrayIndex) (<span class="nv">hVariableIndex</span> : EqDecision variableIndex): EqDecision (WithinLoop arrayIndex arrayType variableIndex) := <span class="kp">ltac</span>:(solve_decision).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">withinLoopReturnValue</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">effect</span> : WithinLoop arrayIndex arrayType variableIndex) : <span class="kt">Type</span> :=
  <span class="kr">match</span> effect <span class="kr">with</span>
  | DoWithLocalVariables _ _ _ effect =&gt; withLocalVariablesReturnValue effect
  | DoContinue _ _ _ =&gt; false
  | DoBreak _ _ _ =&gt; false
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk55"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">action</span> : Action (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue ()) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue LoopOutcome.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>action</var><span class="hyp-type"><b>: </b><span>Action
  (WithinLoop arrayIndex arrayType
     variableIndex) withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk56"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>action</var><span class="hyp-type"><b>: </b><span>Action
  (WithinLoop arrayIndex arrayType
     variableIndex) withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk57"><span class="nb">induction</span> action <span class="kr">as</span> [| effect continuation IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk58" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithinLoop arrayIndex arrayType variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue effect
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue effect
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk58"><hr></label><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk59">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ KeepGoing).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk5a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithinLoop arrayIndex arrayType variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue effect
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue effect
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk5b"><span class="nb">destruct</span> effect <span class="kr">as</span> [effect | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex
     arrayType variableIndex effect)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk5c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoContinue arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoContinue arrayIndex arrayType variableIndex)
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk5c"><hr></label><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk5d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoBreak arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoBreak arrayIndex arrayType variableIndex)
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk5d"><hr></label><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk5e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex
     arrayType variableIndex effect)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ effect IH).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk5f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoContinue arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoContinue arrayIndex arrayType variableIndex)
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ KeepGoing).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk60">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoBreak arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoBreak arrayIndex arrayType variableIndex)
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ Stop).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk61"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_1</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> : dropWithinLoop (Done (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue () tt) = Done _ _ _ KeepGoing.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Done
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue () ()) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome KeepGoing</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk62"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Done
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue () ()) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome KeepGoing</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk63"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_2</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">effect</span> <span class="nv">continuation</span> : dropWithinLoop (Dispatch (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue () (DoWithLocalVariables _ _ _ effect) continuation) = Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">x</span> =&gt; dropWithinLoop (continuation x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex
     arrayType variableIndex effect)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue ()
     (DoWithLocalVariables arrayIndex arrayType
        variableIndex effect) continuation) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome effect
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue effect,
     dropWithinLoop (continuation _0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk64"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex
     arrayType variableIndex effect)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue ()
     (DoWithLocalVariables arrayIndex arrayType
        variableIndex effect) continuation) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome effect
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue effect,
     dropWithinLoop (continuation _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk65"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_2&#39;</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">effect</span> <span class="nv">continuation</span> : dropWithinLoop (Dispatch (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue _ (DoWithLocalVariables _ _ _ effect) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x) &gt;&gt;= continuation) = Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">x</span> =&gt; dropWithinLoop (continuation x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex
     arrayType variableIndex effect)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue
     (withinLoopReturnValue
        (DoWithLocalVariables arrayIndex arrayType
           variableIndex effect))
     (DoWithLocalVariables arrayIndex arrayType
        variableIndex effect)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withinLoopReturnValue
               (DoWithLocalVariables arrayIndex
                  arrayType variableIndex effect),
        Done
          (WithinLoop arrayIndex arrayType
             variableIndex) withinLoopReturnValue
          (withinLoopReturnValue
             (DoWithLocalVariables arrayIndex
                arrayType variableIndex effect)) _0) &gt;&gt;=
   continuation) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome effect
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue effect,
     dropWithinLoop (continuation _0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk66"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoWithLocalVariables arrayIndex
     arrayType variableIndex effect)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue
     (withinLoopReturnValue
        (DoWithLocalVariables arrayIndex arrayType
           variableIndex effect))
     (DoWithLocalVariables arrayIndex arrayType
        variableIndex effect)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withinLoopReturnValue
               (DoWithLocalVariables arrayIndex
                  arrayType variableIndex effect),
        Done
          (WithinLoop arrayIndex arrayType
             variableIndex) withinLoopReturnValue
          (withinLoopReturnValue
             (DoWithLocalVariables arrayIndex
                arrayType variableIndex effect)) _0) &gt;&gt;=
   continuation) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome effect
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue effect,
     dropWithinLoop (continuation _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk67"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_3</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">continuation</span> : dropWithinLoop (Dispatch (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue () (DoContinue _ _ _) continuation) = Done _ _ _ KeepGoing.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoContinue arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue ()
     (DoContinue arrayIndex arrayType variableIndex)
     continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome KeepGoing</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk68"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoContinue arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue ()
     (DoContinue arrayIndex arrayType variableIndex)
     continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome KeepGoing</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk69"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_4</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">continuation</span> : dropWithinLoop (Dispatch (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue () (DoBreak _ _ _) continuation) = Done _ _ _ Stop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoBreak arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue ()
     (DoBreak arrayIndex arrayType variableIndex)
     continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome Stop</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withinLoopReturnValue
  (DoBreak arrayIndex arrayType
     variableIndex)
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (Dispatch
     (WithinLoop arrayIndex arrayType variableIndex)
     withinLoopReturnValue ()
     (DoBreak arrayIndex arrayType variableIndex)
     continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome Stop</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">loop</span> (<span class="nv">n</span> : nat) {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">body</span> : nat -&gt; Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue LoopOutcome) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue unit :=
  <span class="kr">match</span> n <span class="kr">with</span>
  | O =&gt; Done _ _ unit tt
  | S n =&gt; bind (body n) (<span class="kr">fun</span> <span class="nv">outcome</span> =&gt; <span class="kr">match</span> outcome <span class="kr">with</span>
    | KeepGoing =&gt; loop n body
    | Stop =&gt; Done _ _ unit tt
    <span class="kr">end</span>)
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6b"><span class="kn">Lemma</span> <span class="nf">loop_S</span> (<span class="nv">n</span> : nat) {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">body</span> : nat -&gt; Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue LoopOutcome) : loop (S n) body = bind (body n) (<span class="kr">fun</span> <span class="nv">outcome</span> =&gt; <span class="kr">match</span> outcome <span class="kr">with</span> | KeepGoing =&gt; loop n body | Stop =&gt; Done _ _ unit tt <span class="kr">end</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>body</var><span class="hyp-type"><b>: </b><span>nat
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">loop (S n) body =
body n &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : LoopOutcome,
  <span class="kr">match</span> _0 <span class="kr">with</span>
  | KeepGoing =&gt; loop n body
  | Stop =&gt;
      Done
        (WithLocalVariables arrayIndex arrayType
           variableIndex)
        withLocalVariablesReturnValue () ()
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>body</var><span class="hyp-type"><b>: </b><span>nat
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue LoopOutcome</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">loop (S n) body =
body n &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : LoopOutcome,
  <span class="kr">match</span> _0 <span class="kr">with</span>
  | KeepGoing =&gt; loop n body
  | Stop =&gt;
      Done
        (WithLocalVariables arrayIndex arrayType
           variableIndex)
        withLocalVariablesReturnValue () ()
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">loopString</span> (<span class="nv">s</span> : string) {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">body</span> : Z -&gt; Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue LoopOutcome) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue unit :=
  <span class="kr">match</span> s <span class="kr">with</span>
  | EmptyString =&gt; Done _ _ unit tt
  | String x tail =&gt; bind (body (Z.of_N (N_of_ascii x))) (<span class="kr">fun</span> <span class="nv">outcome</span> =&gt;
    <span class="kr">match</span> outcome <span class="kr">with</span>
    | KeepGoing =&gt; loopString tail body
    | Stop =&gt; Done _ _ unit tt
    <span class="kr">end</span>)
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">update</span> {<span class="nv">indexType</span> : <span class="kt">Type</span>} {<span class="nv">A</span>} (<span class="nv">map</span> : indexType -&gt; A) (<span class="nv">key</span> : indexType) (<span class="nv">value</span> : A) `{EqDecision indexType} := <span class="kr">fun</span> <span class="nv">x</span> =&gt; <span class="kr">if</span> decide (x = key) <span class="kr">then</span> value <span class="kr">else</span> map x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6d"><span class="kn">Lemma</span> <span class="nf">lookupSame</span> {<span class="nv">indexType</span> : <span class="kt">Type</span>} {<span class="nv">A</span>} (<span class="nv">map</span> : indexType -&gt; A) (<span class="nv">key</span> : indexType) (<span class="nv">value</span> : A) `{EqDecision indexType} : update map key value key = value.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update map key value key = value</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update map key value key = value</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk6f"><span class="nb">unfold</span> update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (key = key) <span class="kr">then</span> value <span class="kr">else</span> map key) =
value</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">case_decide; <span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk70"><span class="kn">Lemma</span> <span class="nf">lookupDifferent</span> {<span class="nv">indexType</span> : <span class="kt">Type</span>} {<span class="nv">A</span>} (<span class="nv">map</span> : indexType -&gt; A) (<span class="nv">key</span> <span class="nv">key&#39;</span> : indexType) (<span class="nv">hdiff</span> : key &lt;&gt; key&#39;) (<span class="nv">value</span> : A) `{EqDecision indexType} : update map key value key&#39; = map key&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>hdiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update map key value key&#39; = map key&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk71"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>hdiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update map key value key&#39; = map key&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk72"><span class="nb">unfold</span> update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>hdiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (key&#39; = key) <span class="kr">then</span> value <span class="kr">else</span> map key&#39;) =
map key&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk73">case_decide <span class="kr">as</span> f; [| <span class="bp">easy</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>hdiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>key&#39; = key</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">value = map key&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk74"><span class="nb">exfalso</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>hdiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>key&#39; = key</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hdiff <span class="kp">ltac</span>:(<span class="nb">symmetry</span>; <span class="bp">exact</span> f)).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk75"><span class="kn">Lemma</span> <span class="nf">updateSame</span> {<span class="nv">indexType</span> : <span class="kt">Type</span>} {<span class="nv">A</span>} (<span class="nv">map</span> : indexType -&gt; A) (<span class="nv">key</span> : indexType) (<span class="nv">value</span> <span class="nv">value&#39;</span> : A) `{EqDecision indexType} : update (update map key value) key value&#39; = update map key value&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update (update map key value) key value&#39; =
update map key value&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk76"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update (update map key value) key value&#39; =
update map key value&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk77"><span class="nb">unfold</span> update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">_1</span> : indexType,
   <span class="kr">if</span> decide (_1 = key)
   <span class="kr">then</span> value&#39;
   <span class="kr">else</span> <span class="kr">if</span> decide (_1 = key) <span class="kr">then</span> value <span class="kr">else</span> map _1) =
<span class="kr">Œª</span> <span class="nv">_1</span> : indexType,
  <span class="kr">if</span> decide (_1 = key) <span class="kr">then</span> value&#39; <span class="kr">else</span> map _1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk78"><span class="nb">apply</span> functional_extensionality_dep.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">_1</span> : indexType,
  (<span class="kr">if</span> decide (_1 = key)
   <span class="kr">then</span> value&#39;
   <span class="kr">else</span> <span class="kr">if</span> decide (_1 = key) <span class="kr">then</span> value <span class="kr">else</span> map _1) =
  (<span class="kr">if</span> decide (_1 = key) <span class="kr">then</span> value&#39; <span class="kr">else</span> map _1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk79"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = key)
 <span class="kr">then</span> value&#39;
 <span class="kr">else</span> <span class="kr">if</span> decide (x = key) <span class="kr">then</span> value <span class="kr">else</span> map x) =
(<span class="kr">if</span> decide (x = key) <span class="kr">then</span> value&#39; <span class="kr">else</span> map x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">case_decide <span class="kr">as</span> r; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7a"><span class="kn">Lemma</span> <span class="nf">updateDifferent</span> {<span class="nv">indexType</span> : <span class="kt">Type</span>} {<span class="nv">A</span>} (<span class="nv">map</span> : indexType -&gt; A) (<span class="nv">key</span> <span class="nv">key&#39;</span> : indexType) (<span class="nv">value</span> <span class="nv">value&#39;</span> : A) (<span class="nv">hDiff</span> : key &lt;&gt; key&#39;) `{EqDecision indexType} : update (update map key value) key&#39; value&#39; = update (update map key&#39; value&#39;) key value.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update (update map key value) key&#39; value&#39; =
update (update map key&#39; value&#39;) key value</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">update (update map key value) key&#39; value&#39; =
update (update map key&#39; value&#39;) key value</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7c"><span class="nb">unfold</span> update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">Œª</span> <span class="nv">_1</span> : indexType,
   <span class="kr">if</span> decide (_1 = key&#39;)
   <span class="kr">then</span> value&#39;
   <span class="kr">else</span> <span class="kr">if</span> decide (_1 = key) <span class="kr">then</span> value <span class="kr">else</span> map _1) =
<span class="kr">Œª</span> <span class="nv">_1</span> : indexType,
  <span class="kr">if</span> decide (_1 = key)
  <span class="kr">then</span> value
  <span class="kr">else</span> <span class="kr">if</span> decide (_1 = key&#39;) <span class="kr">then</span> value&#39; <span class="kr">else</span> map _1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7d"><span class="nb">apply</span> functional_extensionality_dep.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">_1</span> : indexType,
  (<span class="kr">if</span> decide (_1 = key&#39;)
   <span class="kr">then</span> value&#39;
   <span class="kr">else</span> <span class="kr">if</span> decide (_1 = key) <span class="kr">then</span> value <span class="kr">else</span> map _1) =
  (<span class="kr">if</span> decide (_1 = key)
   <span class="kr">then</span> value
   <span class="kr">else</span> <span class="kr">if</span> decide (_1 = key&#39;) <span class="kr">then</span> value&#39; <span class="kr">else</span> map _1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7e"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> decide (x = key&#39;)
 <span class="kr">then</span> value&#39;
 <span class="kr">else</span> <span class="kr">if</span> decide (x = key) <span class="kr">then</span> value <span class="kr">else</span> map x) =
(<span class="kr">if</span> decide (x = key)
 <span class="kr">then</span> value
 <span class="kr">else</span> <span class="kr">if</span> decide (x = key&#39;) <span class="kr">then</span> value&#39; <span class="kr">else</span> map x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk7f">case_decide <span class="kr">as</span> r; case_decide <span class="kr">as</span> s; <span class="kp">try</span> <span class="bp">easy</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>x = key&#39;</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>x = key</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">value&#39; = value</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk80"><span class="nb">rewrite</span> s <span class="kr">in</span> r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>key = key&#39;</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>x = key</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">value&#39; = value</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk81"><span class="nb">exfalso</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>indexType, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>map</var><span class="hyp-type"><b>: </b><span>indexType ‚Üí A</span></span></span><br><span><var>key, key'</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>value, value'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hDiff</var><span class="hyp-type"><b>: </b><span>key ‚â† key&#39;</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision indexType</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>indexType</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>key = key&#39;</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>x = key</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hDiff r).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk82"><span class="kn">Lemma</span> <span class="nf">eliminateLocalVariables</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) (action : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue unit) : Action (WithArrays arrayIndex arrayType) withArraysReturnValue unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>action</var><span class="hyp-type"><b>: </b><span>Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex)
  withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk83"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>action</var><span class="hyp-type"><b>: </b><span>Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex)
  withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk84"><span class="nb">induction</span> action <span class="kr">as</span> [x | effect continuation IH] <span class="kr">in</span> bools, numbers, addresses |- *;
  [<span class="bp">exact</span> (Done _ _ _ x) |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue effect
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue effect
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk85"><span class="nb">destruct</span> effect <span class="kr">as</span> [effect | name | name value | name | name value | name | name value].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk86" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk86"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk87" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk87"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk88" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk88"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk89" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk89"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk8a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk8a"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk8b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk8b"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk8c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk8d"><span class="nb">apply</span> (Dispatch (WithArrays arrayIndex arrayType) withArraysReturnValue unit effect).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue effect
‚Üí Action (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk8e"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue effect
‚Üí Action (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk8f"><span class="nb">intro</span> value.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH value bools numbers addresses).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk90">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk91"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>bool
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>bool
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH (bools name) bools numbers addresses).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk92">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk93"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>()
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH tt (update bools name value) numbers addresses).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk94">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk95"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>Z
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>Z
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH (numbers name) bools numbers addresses).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk96">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk97"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>()
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH tt bools (update numbers name value) addresses).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk98">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk99"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>list Z
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>list Z
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH (addresses name) bools numbers addresses).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk9a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk9b"><span class="nb">simpl</span> <span class="kr">in</span> IH, continuation.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>()
‚Üí (variableIndex ‚Üí bool)
  ‚Üí (variableIndex ‚Üí Z)
    ‚Üí (variableIndex ‚Üí list Z)
      ‚Üí Action (WithArrays arrayIndex arrayType)
          withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH tt bools numbers (update addresses name value)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk9c"><span class="kn">Lemma</span> <span class="nf">pushDispatch</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) effect continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (DoWithArrays arrayIndex arrayType _ effect) continuation) = Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">x</span> =&gt; eliminateLocalVariables bools numbers addresses (continuation x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (DoWithArrays arrayIndex arrayType variableIndex
        effect) continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () effect
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue effect,
     eliminateLocalVariables bools numbers addresses
       (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk9d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (DoWithArrays arrayIndex arrayType variableIndex
        effect) continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () effect
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue effect,
     eliminateLocalVariables bools numbers addresses
       (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk9e"><span class="kn">Lemma</span> <span class="nf">pushDispatch2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) effect continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (DoWithArrays arrayIndex arrayType _ effect) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">x</span> =&gt; eliminateLocalVariables bools numbers addresses (continuation x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (DoWithArrays arrayIndex arrayType
           variableIndex effect))
     (DoWithArrays arrayIndex arrayType variableIndex
        effect)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (DoWithArrays arrayIndex arrayType
                  variableIndex effect),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (DoWithArrays arrayIndex arrayType
                variableIndex effect)) _0) &gt;&gt;=
   continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () effect
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue effect,
     eliminateLocalVariables bools numbers addresses
       (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk9f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (DoWithArrays arrayIndex arrayType
     variableIndex effect)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (DoWithArrays arrayIndex arrayType
           variableIndex effect))
     (DoWithArrays arrayIndex arrayType variableIndex
        effect)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (DoWithArrays arrayIndex arrayType
                  variableIndex effect),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (DoWithArrays arrayIndex arrayType
                variableIndex effect)) _0) &gt;&gt;=
   continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () effect
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue effect,
     eliminateLocalVariables bools numbers addresses
       (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka0"><span class="kn">Lemma</span> <span class="nf">pushDispatch3</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) effect continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (DoWithArrays arrayIndex arrayType _ effect) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; dropWithinLoop (Done _ _ _ tt))) &gt;&gt;= continuation) = Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">x</span> =&gt; eliminateLocalVariables bools numbers addresses (continuation KeepGoing)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>LoopOutcome
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     LoopOutcome
     (DoWithArrays arrayIndex arrayType variableIndex
        effect)
     (<span class="kr">Œª</span> <span class="nv">_</span> : withLocalVariablesReturnValue
              (DoWithArrays arrayIndex arrayType
                 variableIndex effect),
        dropWithinLoop
          (Done
             (WithinLoop arrayIndex arrayType
                variableIndex) withinLoopReturnValue
             () ())) &gt;&gt;= continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () effect
  (<span class="kr">Œª</span> <span class="nv">_</span> : withArraysReturnValue effect,
     eliminateLocalVariables bools numbers addresses
       (continuation KeepGoing))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>LoopOutcome
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     LoopOutcome
     (DoWithArrays arrayIndex arrayType variableIndex
        effect)
     (<span class="kr">Œª</span> <span class="nv">_</span> : withLocalVariablesReturnValue
              (DoWithArrays arrayIndex arrayType
                 variableIndex effect),
        dropWithinLoop
          (Done
             (WithinLoop arrayIndex arrayType
                variableIndex) withinLoopReturnValue
             () ())) &gt;&gt;= continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () effect
  (<span class="kr">Œª</span> <span class="nv">_</span> : withArraysReturnValue effect,
     eliminateLocalVariables bools numbers addresses
       (continuation KeepGoing))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka2"><span class="kn">Lemma</span> <span class="nf">pushBooleanGet</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (BooleanLocalGet arrayIndex arrayType _ name) continuation) = eliminateLocalVariables bools numbers addresses (continuation (bools name)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (BooleanLocalGet arrayIndex arrayType
        variableIndex name) continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (bools name))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (BooleanLocalGet arrayIndex arrayType
        variableIndex name) continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (bools name))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka4"><span class="kn">Lemma</span> <span class="nf">pushBooleanGet2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (BooleanLocalGet arrayIndex arrayType _ name) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = eliminateLocalVariables bools numbers addresses (continuation (bools name)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (BooleanLocalGet arrayIndex arrayType
           variableIndex name))
     (BooleanLocalGet arrayIndex arrayType
        variableIndex name)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (BooleanLocalGet arrayIndex arrayType
                  variableIndex name),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (BooleanLocalGet arrayIndex arrayType
                variableIndex name)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (bools name))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (BooleanLocalGet arrayIndex arrayType
           variableIndex name))
     (BooleanLocalGet arrayIndex arrayType
        variableIndex name)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (BooleanLocalGet arrayIndex arrayType
                  variableIndex name),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (BooleanLocalGet arrayIndex arrayType
                variableIndex name)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (bools name))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka6"><span class="kn">Lemma</span> <span class="nf">pushNumberGet</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (NumberLocalGet arrayIndex arrayType _ name) continuation) = eliminateLocalVariables bools numbers addresses (continuation (numbers name)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (NumberLocalGet arrayIndex arrayType
        variableIndex name) continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (numbers name))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (NumberLocalGet arrayIndex arrayType
        variableIndex name) continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (numbers name))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka8"><span class="kn">Lemma</span> <span class="nf">pushNumberGet2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (NumberLocalGet arrayIndex arrayType _ name) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = eliminateLocalVariables bools numbers addresses (continuation (numbers name)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (NumberLocalGet arrayIndex arrayType
           variableIndex name))
     (NumberLocalGet arrayIndex arrayType
        variableIndex name)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (NumberLocalGet arrayIndex arrayType
                  variableIndex name),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (NumberLocalGet arrayIndex arrayType
                variableIndex name)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (numbers name))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chka9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (NumberLocalGet arrayIndex arrayType
           variableIndex name))
     (NumberLocalGet arrayIndex arrayType
        variableIndex name)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (NumberLocalGet arrayIndex arrayType
                  variableIndex name),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (NumberLocalGet arrayIndex arrayType
                variableIndex name)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (numbers name))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkaa"><span class="kn">Lemma</span> <span class="nf">pushAddressGet</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (AddressLocalGet arrayIndex arrayType _ name) continuation) = eliminateLocalVariables bools numbers addresses (continuation (addresses name)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (AddressLocalGet arrayIndex arrayType
        variableIndex name) continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (addresses name))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (AddressLocalGet arrayIndex arrayType
        variableIndex name) continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (addresses name))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkac"><span class="kn">Lemma</span> <span class="nf">pushAddressGet2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (AddressLocalGet arrayIndex arrayType _ name) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = eliminateLocalVariables bools numbers addresses (continuation (addresses name)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (AddressLocalGet arrayIndex arrayType
           variableIndex name))
     (AddressLocalGet arrayIndex arrayType
        variableIndex name)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (AddressLocalGet arrayIndex arrayType
                  variableIndex name),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (AddressLocalGet arrayIndex arrayType
                variableIndex name)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (addresses name))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkad"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalGet arrayIndex arrayType
     variableIndex name)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (AddressLocalGet arrayIndex arrayType
           variableIndex name))
     (AddressLocalGet arrayIndex arrayType
        variableIndex name)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (AddressLocalGet arrayIndex arrayType
                  variableIndex name),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (AddressLocalGet arrayIndex arrayType
                variableIndex name)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers addresses
  (continuation (addresses name))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkae"><span class="kn">Lemma</span> <span class="nf">pushBooleanSet</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name value continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (BooleanLocalSet arrayIndex arrayType _ name value) continuation) = eliminateLocalVariables (update bools name value) numbers addresses (continuation tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (BooleanLocalSet arrayIndex arrayType
        variableIndex name value) continuation) =
eliminateLocalVariables (update bools name value)
  numbers addresses (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkaf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (BooleanLocalSet arrayIndex arrayType
        variableIndex name value) continuation) =
eliminateLocalVariables 
  (update bools name value) numbers addresses
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb0"><span class="kn">Lemma</span> <span class="nf">pushBooleanSet2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name value continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (BooleanLocalSet arrayIndex arrayType _ name value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = eliminateLocalVariables (update bools name value) numbers addresses (continuation tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (BooleanLocalSet arrayIndex arrayType
           variableIndex name value))
     (BooleanLocalSet arrayIndex arrayType
        variableIndex name value)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (BooleanLocalSet arrayIndex arrayType
                  variableIndex name value),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (BooleanLocalSet arrayIndex arrayType
                variableIndex name value)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables (update bools name value)
  numbers addresses (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (BooleanLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (BooleanLocalSet arrayIndex arrayType
           variableIndex name value))
     (BooleanLocalSet arrayIndex arrayType
        variableIndex name value)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (BooleanLocalSet arrayIndex arrayType
                  variableIndex name value),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (BooleanLocalSet arrayIndex arrayType
                variableIndex name value)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables 
  (update bools name value) numbers addresses
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb2"><span class="kn">Lemma</span> <span class="nf">pushNumberSet</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name value continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (NumberLocalSet arrayIndex arrayType _ name value) continuation) = eliminateLocalVariables bools (update numbers name value) addresses (continuation tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (NumberLocalSet arrayIndex arrayType
        variableIndex name value) continuation) =
eliminateLocalVariables bools
  (update numbers name value) addresses
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (NumberLocalSet arrayIndex arrayType
        variableIndex name value) continuation) =
eliminateLocalVariables bools
  (update numbers name value) addresses
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb4"><span class="kn">Lemma</span> <span class="nf">pushNumberSet2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name value continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (NumberLocalSet arrayIndex arrayType _ name value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = eliminateLocalVariables bools (update numbers name value) addresses (continuation tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (NumberLocalSet arrayIndex arrayType
           variableIndex name value))
     (NumberLocalSet arrayIndex arrayType
        variableIndex name value)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (NumberLocalSet arrayIndex arrayType
                  variableIndex name value),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (NumberLocalSet arrayIndex arrayType
                variableIndex name value)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools
  (update numbers name value) addresses
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (NumberLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (NumberLocalSet arrayIndex arrayType
           variableIndex name value))
     (NumberLocalSet arrayIndex arrayType
        variableIndex name value)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (NumberLocalSet arrayIndex arrayType
                  variableIndex name value),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (NumberLocalSet arrayIndex arrayType
                variableIndex name value)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools
  (update numbers name value) addresses
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb6"><span class="kn">Lemma</span> <span class="nf">pushAddressSet</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name value continuation : eliminateLocalVariables bools numbers addresses (Dispatch _ _ _ (AddressLocalSet arrayIndex arrayType _ name value) continuation) = eliminateLocalVariables bools numbers (update addresses name value) (continuation tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (AddressLocalSet arrayIndex arrayType
        variableIndex name value) continuation) =
eliminateLocalVariables bools numbers
  (update addresses name value) (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     ()
     (AddressLocalSet arrayIndex arrayType
        variableIndex name value) continuation) =
eliminateLocalVariables bools numbers
  (update addresses name value) 
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb8"><span class="kn">Lemma</span> <span class="nf">pushAddressSet2</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) name value continuation : eliminateLocalVariables bools numbers addresses ((Dispatch _ _ _ (AddressLocalSet arrayIndex arrayType _ name value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x)) &gt;&gt;= continuation) = eliminateLocalVariables bools numbers (update addresses name value) (continuation tt).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (AddressLocalSet arrayIndex arrayType
           variableIndex name value))
     (AddressLocalSet arrayIndex arrayType
        variableIndex name value)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (AddressLocalSet arrayIndex arrayType
                  variableIndex name value),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (AddressLocalSet arrayIndex arrayType
                variableIndex name value)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers
  (update addresses name value) (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkb9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>name</var><span class="hyp-type"><b>: </b><span>variableIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue
  (AddressLocalSet arrayIndex arrayType
     variableIndex name value)
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     (withLocalVariablesReturnValue
        (AddressLocalSet arrayIndex arrayType
           variableIndex name value))
     (AddressLocalSet arrayIndex arrayType
        variableIndex name value)
     (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue
               (AddressLocalSet arrayIndex arrayType
                  variableIndex name value),
        Done
          (WithLocalVariables arrayIndex arrayType
             variableIndex)
          withLocalVariablesReturnValue
          (withLocalVariablesReturnValue
             (AddressLocalSet arrayIndex arrayType
                variableIndex name value)) _0) &gt;&gt;=
   continuation) =
eliminateLocalVariables bools numbers
  (update addresses name value) 
  (continuation ())</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">readChar</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z (DoWithArrays _ _ _ (DoBasicEffect _ _ ReadChar)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ Z x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">writeChar</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">x</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ (WriteChar x))) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">flush</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ Flush)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trap</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">returnType</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue returnType (DoWithArrays _ _ _ (DoBasicEffect _ _ Trap)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; False_rect _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">readByte</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">index</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ (ReadByte index))) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">setByte</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">index</span> <span class="nv">value</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ (SetByte index value))) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">getSender</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ GetSender)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">getMoney</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ GetMoney)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">getCommunicationSize</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ GetCommunicationSize)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">donate</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">money</span> <span class="nv">address</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ (Donate money address))) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">invoke</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">money</span> <span class="nv">address</span> <span class="nv">array</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (DoBasicEffect _ _ (Invoke money address array))) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">booleanLocalSet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> <span class="nv">value</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (BooleanLocalSet _ _ _ name value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">booleanLocalGet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (BooleanLocalGet _ _ _ name) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">addressLocalSet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> <span class="nv">value</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (AddressLocalSet _ _ _ name value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">addressLocalGet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (AddressLocalGet _ _ _ name) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">numberLocalSet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> <span class="nv">value</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (NumberLocalSet _ _ _ name value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">numberLocalGet</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (NumberLocalGet _ _ _ name) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">retrieve</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> <span class="nv">index</span> := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (Retrieve arrayIndex arrayType name index)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">store</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">name</span> <span class="nv">index</span> (<span class="nv">value</span> : arrayType name) := Dispatch (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue _ (DoWithArrays _ _ _ (Store _ _ name index value)) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">continue</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue () (DoContinue _ _ _) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ tt).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkba"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_continue</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">continuation</span> : dropWithinLoop (continue arrayIndex arrayType variableIndex &gt;&gt;= continuation) = Done _ _ _ KeepGoing.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (continue arrayIndex arrayType variableIndex &gt;&gt;=
   continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome KeepGoing</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkbb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (continue arrayIndex arrayType variableIndex &gt;&gt;=
   continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome KeepGoing</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">break</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> := Dispatch (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue () (DoBreak _ _ _) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Done _ _ _ tt).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkbc"><span class="kn">Lemma</span> <span class="nf">dropWithinLoop_break</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">continuation</span> : dropWithinLoop (break arrayIndex arrayType variableIndex &gt;&gt;= continuation) = Done _ _ _ Stop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (break arrayIndex arrayType variableIndex &gt;&gt;=
   continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome Stop</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkbd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>()
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (break arrayIndex arrayType variableIndex &gt;&gt;=
   continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome Stop</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">divIntUnsigned</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; <span class="kr">if</span> decide (b = <span class="mi">0</span>) <span class="kr">then</span> trap arrayIndex arrayType variableIndex Z <span class="kr">else</span> Done _ _ _ (a / b))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">modIntUnsigned</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; <span class="kr">if</span> decide (b = <span class="mi">0</span>) <span class="kr">then</span> trap arrayIndex arrayType variableIndex Z <span class="kr">else</span> Done _ _ _ (a mod b))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Bitwise operations for any bit width *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">andBits</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action u v Z) : Action u v Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; Done _ _ _ (Z.land a b))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">orBits</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action u v Z) : Action u v Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; Done _ _ _ (Z.lor a b))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">xorBits</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">a</span> <span class="nv">b</span> : Action u v Z) : Action u v Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; Done _ _ _ (Z.lxor a b))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Operations for specified bit width *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">shiftLeft</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> <span class="nv">amount</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z :=
  bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind amount (<span class="kr">fun</span> <span class="nv">amount</span> =&gt;
    <span class="kr">if</span> decide (amount &gt;= bitWidth) <span class="kr">then</span> trap arrayIndex arrayType variableIndex Z <span class="kr">else</span> Done _ _ _ (Z.land (Z.shiftl a amount) (Z.ones bitWidth))
  )).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">shiftRight</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> <span class="nv">amount</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z :=
  bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind amount (<span class="kr">fun</span> <span class="nv">amount</span> =&gt;
    <span class="kr">if</span> decide (amount &gt;= bitWidth) <span class="kr">then</span> trap arrayIndex arrayType variableIndex Z <span class="kr">else</span> Done _ _ _ (Z.land (Z.shiftr a amount) (Z.ones bitWidth))
  )).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">notBits</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> : Action u v Z) : Action u v Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; Done _ _ _ (Z.land (Z.lnot a) (Z.ones bitWidth))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">coerceBool</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">a</span> : Action u v bool) : Action u v Z := bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt;
  <span class="kr">if</span> a <span class="kr">then</span> Done _ _ _ <span class="mi">1</span> <span class="kr">else</span> Done _ _ _ <span class="mi">0</span>
).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Generic coercion function based on bit width *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">coerceInt</span> (<span class="nv">n</span> <span class="nv">bitWidth</span> : Z) : Z :=
  n mod (<span class="mi">2</span> ^ bitWidth).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Helper function for signed conversion based on bit width *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">toSigned</span> (<span class="nv">n</span> <span class="nv">bitWidth</span> : Z) : Z :=
  <span class="kr">let</span> <span class="nv">half</span> := <span class="mi">2</span> ^ (bitWidth - <span class="mi">1</span>) <span class="kr">in</span>
  <span class="kr">if</span> decide (n &lt; half) <span class="kr">then</span> n <span class="kr">else</span> n - <span class="mi">2</span> ^ bitWidth.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Generic arithmetic operations *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">addInt</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> <span class="nv">b</span> : Action u v Z) : Action u v Z :=
  bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; Done _ _ _ (coerceInt (a + b) bitWidth))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">subInt</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> <span class="nv">b</span> : Action u v Z) : Action u v Z :=
  bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; Done _ _ _ (coerceInt (a - b) bitWidth))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">multInt</span> {<span class="nv">u</span> <span class="nv">v</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> <span class="nv">b</span> : Action u v Z) : Action u v Z :=
  bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt; Done _ _ _ (coerceInt (a * b) bitWidth))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">divIntSigned</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">bitWidth</span> : Z) (<span class="nv">a</span> <span class="nv">b</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue Z :=
  bind a (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bind b (<span class="kr">fun</span> <span class="nv">b</span> =&gt;
    <span class="kr">let</span> <span class="nv">signedA</span> := toSigned a bitWidth <span class="kr">in</span>
    <span class="kr">let</span> <span class="nv">signedB</span> := toSigned b bitWidth <span class="kr">in</span>
    <span class="kr">if</span> decide (b = <span class="mi">0</span>) <span class="kr">then</span> trap arrayIndex arrayType variableIndex Z
    <span class="kr">else</span> <span class="kr">if</span> decide (signedA = - (<span class="mi">2</span> ^ (bitWidth - <span class="mi">1</span>)) /\ signedB = -<span class="mi">1</span>) <span class="kr">then</span> trap arrayIndex arrayType variableIndex Z
    <span class="kr">else</span> Done _ _ _ (coerceInt (a / b) bitWidth))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">liftToWithLocalVariables</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">r</span>} (<span class="nv">x</span> : Action (WithArrays arrayIndex arrayType) withArraysReturnValue r) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue r :=
  <span class="kr">match</span> x <span class="kr">with</span>
  | Done _ _ _ x =&gt; Done _ _ _ x
  | Dispatch _ _ _ effect continuation =&gt; Dispatch _ _ _ (DoWithArrays _ _ _ effect) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; liftToWithLocalVariables (continuation x))
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkbe"><span class="kn">Lemma</span> <span class="nf">eliminateLift</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">returnType</span>} `{EqDecision variableIndex} (bools : variableIndex -&gt; bool) (numbers : variableIndex -&gt; Z) (addresses : variableIndex -&gt; list Z) (action : Action (WithArrays arrayIndex arrayType) withArraysReturnValue returnType) continuation : eliminateLocalVariables bools numbers addresses (liftToWithLocalVariables action &gt;&gt;= continuation) = action &gt;&gt;= <span class="kr">fun</span> <span class="nv">x</span> =&gt; eliminateLocalVariables bools numbers addresses (continuation x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>action</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables action &gt;&gt;= continuation) =
action &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : returnType,
  eliminateLocalVariables bools numbers addresses
    (continuation _1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkbf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>action</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables action &gt;&gt;= continuation) =
action &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : returnType,
  eliminateLocalVariables bools numbers addresses
    (continuation _1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc0"><span class="nb">induction</span> action <span class="kr">as</span> [a | a b IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables
     (Done (WithArrays arrayIndex arrayType)
        withArraysReturnValue returnType a) &gt;&gt;=
   continuation) =
Done (WithArrays arrayIndex arrayType)
  withArraysReturnValue returnType a &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : returnType,
  eliminateLocalVariables bools numbers addresses
    (continuation _1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkc1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue a
‚Üí Action (WithArrays arrayIndex arrayType)
    withArraysReturnValue returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_1</span> : withArraysReturnValue a,
  eliminateLocalVariables bools numbers addresses
    (liftToWithLocalVariables (b _1) &gt;&gt;=
     continuation) =
  b _1 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
    eliminateLocalVariables bools numbers
      addresses (continuation _2)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkc1"><hr></label><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables
     (Dispatch (WithArrays arrayIndex arrayType)
        withArraysReturnValue returnType a b) &gt;&gt;=
   continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue returnType a b &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : returnType,
  eliminateLocalVariables bools numbers addresses
    (continuation _1)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc2">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables
     (Done (WithArrays arrayIndex arrayType)
        withArraysReturnValue returnType a) &gt;&gt;=
   continuation) =
Done (WithArrays arrayIndex arrayType)
  withArraysReturnValue returnType a &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : returnType,
  eliminateLocalVariables bools numbers addresses
    (continuation _1)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc3">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue a
‚Üí Action (WithArrays arrayIndex arrayType)
    withArraysReturnValue returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_1</span> : withArraysReturnValue a,
  eliminateLocalVariables bools numbers addresses
    (liftToWithLocalVariables (b _1) &gt;&gt;=
     continuation) =
  b _1 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
    eliminateLocalVariables bools numbers
      addresses (continuation _2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables
     (Dispatch (WithArrays arrayIndex arrayType)
        withArraysReturnValue returnType a b) &gt;&gt;=
   continuation) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue returnType a b &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : returnType,
  eliminateLocalVariables bools numbers addresses
    (continuation _1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc4"><span class="nb">change</span> (Dispatch (WithArrays arrayIndex arrayType) withArraysReturnValue
  () a
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue a,
  eliminateLocalVariables bools numbers addresses
  (liftToWithLocalVariables (b _1) &gt;&gt;= continuation)) =
Dispatch (WithArrays arrayIndex arrayType) withArraysReturnValue
  () a
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue a,
  b _1 &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
  eliminateLocalVariables bools numbers addresses
  (continuation _2))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue a
‚Üí Action (WithArrays arrayIndex arrayType)
    withArraysReturnValue returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_1</span> : withArraysReturnValue a,
  eliminateLocalVariables bools numbers addresses
    (liftToWithLocalVariables (b _1) &gt;&gt;=
     continuation) =
  b _1 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
    eliminateLocalVariables bools numbers
      addresses (continuation _2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () a
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue a,
     eliminateLocalVariables bools numbers addresses
       (liftToWithLocalVariables (b _1) &gt;&gt;=
        continuation)) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () a
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue a,
     b _1 &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
       eliminateLocalVariables bools numbers addresses
         (continuation _2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc5"><span class="nb">rewrite</span> (functional_extensionality_dep _ _ IH).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, returnType</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>EqDecision variableIndex</span></span></span><br><span><var>bools</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí bool</span></span></span><br><span><var>numbers</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí Z</span></span></span><br><span><var>addresses</var><span class="hyp-type"><b>: </b><span>variableIndex ‚Üí list Z</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue a
‚Üí Action (WithArrays arrayIndex arrayType)
    withArraysReturnValue returnType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>returnType
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_1</span> : withArraysReturnValue a,
  eliminateLocalVariables bools numbers addresses
    (liftToWithLocalVariables (b _1) &gt;&gt;=
     continuation) =
  b _1 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
    eliminateLocalVariables bools numbers
      addresses (continuation _2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () a
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue a,
     b _1 &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
       eliminateLocalVariables bools numbers addresses
         (continuation _2)) =
Dispatch (WithArrays arrayIndex arrayType)
  withArraysReturnValue () a
  (<span class="kr">Œª</span> <span class="nv">_1</span> : withArraysReturnValue a,
     b _1 &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_2</span> : returnType,
       eliminateLocalVariables bools numbers addresses
         (continuation _2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">liftToWithinLoop</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">r</span>} (<span class="nv">x</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue r) : Action (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue r :=
  <span class="kr">match</span> x <span class="kr">with</span>
  | Done _ _ _ x =&gt; Done _ _ _ x
  | Dispatch _ _ _ effect continuation =&gt; Dispatch _ _ _ (DoWithLocalVariables _ _ _ effect) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; liftToWithinLoop (continuation x))
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc6"><span class="kn">Lemma</span> <span class="nf">liftToWithinLoopBind</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">r1</span> <span class="nv">r2</span>} (<span class="nv">x</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue r1) (<span class="nv">continuation</span> : r1 -&gt; Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue r2) : liftToWithinLoop (x &gt;&gt;= continuation) = liftToWithinLoop x &gt;&gt;= <span class="kr">fun</span> <span class="nv">t</span> =&gt; liftToWithinLoop (continuation t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">liftToWithinLoop (x &gt;&gt;= continuation) =
liftToWithinLoop x &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r1, liftToWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">liftToWithinLoop (x &gt;&gt;= continuation) =
liftToWithinLoop x &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r1, liftToWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkc8"><span class="nb">induction</span> x <span class="kr">as</span> [g | g g1 IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">liftToWithinLoop
  (Done
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g &gt;&gt;= continuation) =
liftToWithinLoop
  (Done
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g) &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r1, liftToWithinLoop (continuation _0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkc9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue g
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
  liftToWithinLoop (g1 _0 &gt;&gt;= continuation) =
  liftToWithinLoop (g1 _0) &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkc9"><hr></label><div class="goal-conclusion">liftToWithinLoop
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g g1 &gt;&gt;= continuation) =
liftToWithinLoop
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g g1) &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r1, liftToWithinLoop (continuation _0)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkca">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">liftToWithinLoop
  (Done
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g &gt;&gt;= continuation) =
liftToWithinLoop
  (Done
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g) &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r1, liftToWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkcb">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue g
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
  liftToWithinLoop (g1 _0 &gt;&gt;= continuation) =
  liftToWithinLoop (g1 _0) &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">liftToWithinLoop
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g g1 &gt;&gt;= continuation) =
liftToWithinLoop
  (Dispatch
     (WithLocalVariables arrayIndex arrayType
        variableIndex) withLocalVariablesReturnValue
     r1 g g1) &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r1, liftToWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkcc"><span class="nb">change</span> (Dispatch (WithinLoop arrayIndex arrayType variableIndex)
  withinLoopReturnValue r2
  (DoWithLocalVariables arrayIndex arrayType variableIndex g)
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
  liftToWithinLoop (g1 _0 &gt;&gt;= continuation)) =
Dispatch (WithinLoop arrayIndex arrayType variableIndex)
  withinLoopReturnValue r2
  (DoWithLocalVariables arrayIndex arrayType variableIndex g)
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
  liftToWithinLoop (g1 _0) &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue g
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
  liftToWithinLoop (g1 _0 &gt;&gt;= continuation) =
  liftToWithinLoop (g1 _0) &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch
  (WithinLoop arrayIndex arrayType variableIndex)
  withinLoopReturnValue r2
  (DoWithLocalVariables arrayIndex arrayType
     variableIndex g)
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
     liftToWithinLoop (g1 _0 &gt;&gt;= continuation)) =
Dispatch
  (WithinLoop arrayIndex arrayType variableIndex)
  withinLoopReturnValue r2
  (DoWithLocalVariables arrayIndex arrayType
     variableIndex g)
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
     liftToWithinLoop (g1 _0) &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkcd"><span class="nb">rewrite</span> (functional_extensionality_dep _ _ IH).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r1, r2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue g
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r1</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r1
‚Üí Action
    (WithLocalVariables arrayIndex
       arrayType variableIndex)
    withLocalVariablesReturnValue r2</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
  liftToWithinLoop (g1 _0 &gt;&gt;= continuation) =
  liftToWithinLoop (g1 _0) &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch
  (WithinLoop arrayIndex arrayType variableIndex)
  withinLoopReturnValue r2
  (DoWithLocalVariables arrayIndex arrayType
     variableIndex g)
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
     liftToWithinLoop (g1 _0) &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1)) =
Dispatch
  (WithinLoop arrayIndex arrayType variableIndex)
  withinLoopReturnValue r2
  (DoWithLocalVariables arrayIndex arrayType
     variableIndex g)
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue g,
     liftToWithinLoop (g1 _0) &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_1</span> : r1, liftToWithinLoop (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkce"><span class="kn">Lemma</span> <span class="nf">dropWithinLoopLiftToWithinLoop</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span> <span class="nv">r</span>} (<span class="nv">x</span> : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue r) (<span class="nv">continuation</span> : r -&gt; Action (WithinLoop arrayIndex arrayType variableIndex) withinLoopReturnValue ()) : dropWithinLoop (liftToWithinLoop x &gt;&gt;= continuation) = x &gt;&gt;= <span class="kr">fun</span> <span class="nv">v</span> =&gt; dropWithinLoop (continuation v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop (liftToWithinLoop x &gt;&gt;= continuation) =
x &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_0</span> : r, dropWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkcf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop (liftToWithinLoop x &gt;&gt;= continuation) =
x &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_0</span> : r, dropWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd0"><span class="nb">induction</span> x <span class="kr">as</span> [x | x x1 IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (liftToWithinLoop
     (Done
        (WithLocalVariables arrayIndex arrayType
           variableIndex)
        withLocalVariablesReturnValue r x) &gt;&gt;=
   continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue r x &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r, dropWithinLoop (continuation _0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkd1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue x
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
  dropWithinLoop
    (liftToWithinLoop (x1 _0) &gt;&gt;= continuation) =
  x1 _0 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkd1"><hr></label><div class="goal-conclusion">dropWithinLoop
  (liftToWithinLoop
     (Dispatch
        (WithLocalVariables arrayIndex arrayType
           variableIndex)
        withLocalVariablesReturnValue r x x1) &gt;&gt;=
   continuation) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue r x
  x1 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_0</span> : r, dropWithinLoop (continuation _0)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd2">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (liftToWithinLoop
     (Done
        (WithLocalVariables arrayIndex arrayType
           variableIndex)
        withLocalVariablesReturnValue r x) &gt;&gt;=
   continuation) =
Done
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue r x &gt;&gt;=
<span class="kr">Œª</span> <span class="nv">_0</span> : r, dropWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd3">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue x
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
  dropWithinLoop
    (liftToWithinLoop (x1 _0) &gt;&gt;= continuation) =
  x1 _0 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">dropWithinLoop
  (liftToWithinLoop
     (Dispatch
        (WithLocalVariables arrayIndex arrayType
           variableIndex)
        withLocalVariablesReturnValue r x x1) &gt;&gt;=
   continuation) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue r x
  x1 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_0</span> : r, dropWithinLoop (continuation _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd4"><span class="nb">change</span> (Dispatch (WithLocalVariables arrayIndex arrayType variableIndex)
  withLocalVariablesReturnValue LoopOutcome x
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
  dropWithinLoop (liftToWithinLoop (x1 _0) &gt;&gt;= continuation)) =
Dispatch (WithLocalVariables arrayIndex arrayType variableIndex)
  withLocalVariablesReturnValue LoopOutcome x
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
  x1 _0 &gt;&gt;= <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue x
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
  dropWithinLoop
    (liftToWithinLoop (x1 _0) &gt;&gt;= continuation) =
  x1 _0 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome x
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
     dropWithinLoop
       (liftToWithinLoop (x1 _0) &gt;&gt;= continuation)) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome x
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
     x1 _0 &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd5"><span class="nb">rewrite</span> (functional_extensionality_dep _ _ IH).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>WithLocalVariables arrayIndex arrayType
  variableIndex</span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>withLocalVariablesReturnValue x
‚Üí Action
    (WithLocalVariables arrayIndex arrayType
       variableIndex)
    withLocalVariablesReturnValue r</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>r
‚Üí Action
    (WithinLoop arrayIndex arrayType
       variableIndex)
    withinLoopReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
  dropWithinLoop
    (liftToWithinLoop (x1 _0) &gt;&gt;= continuation) =
  x1 _0 &gt;&gt;=
  <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome x
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
     x1 _0 &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1)) =
Dispatch
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue
  LoopOutcome x
  (<span class="kr">Œª</span> <span class="nv">_0</span> : withLocalVariablesReturnValue x,
     x1 _0 &gt;&gt;=
     <span class="kr">Œª</span> <span class="nv">_1</span> : r, dropWithinLoop (continuation _1))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd6"><span class="kn">Lemma</span> <span class="nf">nth_lt</span> {<span class="nv">A</span>} (<span class="nv">l</span> : list A) (<span class="nv">n</span> : nat) (<span class="nv">isLess</span> : Nat.lt n (length l)) : A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n (strings.length l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n (strings.length l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> l <span class="kr">as</span> [| head tail]; <span class="nb">simpl</span> <span class="kr">in</span> *; (<span class="bp">lia</span> || <span class="bp">exact</span> (nth n (head :: tail) head)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd8"><span class="kn">Lemma</span> <span class="nf">nth_lt_default</span> {<span class="nv">A</span>} (<span class="nv">l</span> : list A) (<span class="nv">n</span> : nat) (<span class="nv">isLess</span> : Nat.lt n (length l)) (<span class="nv">default</span> : A) : nth_lt l n isLess = nth n l default.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n (strings.length l)</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth_lt l n isLess = nth n l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkd9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n (strings.length l)</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth_lt l n isLess = nth n l default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkda"><span class="nb">destruct</span> l <span class="kr">as</span> [| head tail]; <span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n <span class="mi">0</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">False_rect A
  (ZMicromega.ZTautoChecker_sound
     (Tauto.IMPL
        (Tauto.A Tauto.isProp
           {|
             RingMicromega.Flhs := EnvRing.PEc <span class="mi">0</span>;
             RingMicromega.Fop := RingMicromega.OpLe;
             RingMicromega.Frhs := EnvRing.PEX <span class="mi">1</span>
           |} ()) None
        (Tauto.IMPL
           (Tauto.A Tauto.isProp
              {|
                RingMicromega.Flhs := EnvRing.PEX <span class="mi">1</span>;
                RingMicromega.Fop :=
                  RingMicromega.OpLt;
                RingMicromega.Frhs := EnvRing.PEc <span class="mi">0</span>
              |} ()) None 
           (Tauto.X Tauto.isProp <span class="kt">False</span>))) [] eq_refl
     (<span class="kr">Œª</span> <span class="nv">_</span> : positive, Z.of_nat n) 
     (Nat2Z.is_nonneg n)
     (ZifyClasses.rew_iff 
        (Nat.lt n <span class="mi">0</span>) (Z.of_nat n &lt; <span class="mi">0</span>)
        (ZifyClasses.mkrel nat Z lt Z.of_nat Z.lt
           Nat2Z.inj_lt n 
           (Z.of_nat n) eq_refl <span class="mi">0</span>%nat <span class="mi">0</span> eq_refl)
        isLess)) =
<span class="kr">match</span> n <span class="kr">with</span>
| <span class="mi">0</span>%nat | _ =&gt; default
<span class="kr">end</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkdb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkdb"><hr></label><div class="goal-conclusion"><span class="kr">match</span> n <span class="kr">with</span>
| <span class="mi">0</span>%nat =&gt; head
| S _0 =&gt; nth _0 tail head
<span class="kr">end</span> =
<span class="kr">match</span> n <span class="kr">with</span>
| <span class="mi">0</span>%nat =&gt; head
| S _0 =&gt; nth _0 tail default
<span class="kr">end</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkdc">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n <span class="mi">0</span></span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">False_rect A
  (ZMicromega.ZTautoChecker_sound
     (Tauto.IMPL
        (Tauto.A Tauto.isProp
           {|
             RingMicromega.Flhs := EnvRing.PEc <span class="mi">0</span>;
             RingMicromega.Fop := RingMicromega.OpLe;
             RingMicromega.Frhs := EnvRing.PEX <span class="mi">1</span>
           |} ()) None
        (Tauto.IMPL
           (Tauto.A Tauto.isProp
              {|
                RingMicromega.Flhs := EnvRing.PEX <span class="mi">1</span>;
                RingMicromega.Fop :=
                  RingMicromega.OpLt;
                RingMicromega.Frhs := EnvRing.PEc <span class="mi">0</span>
              |} ()) None 
           (Tauto.X Tauto.isProp <span class="kt">False</span>))) [] eq_refl
     (<span class="kr">Œª</span> <span class="nv">_</span> : positive, Z.of_nat n) 
     (Nat2Z.is_nonneg n)
     (ZifyClasses.rew_iff 
        (Nat.lt n <span class="mi">0</span>) (Z.of_nat n &lt; <span class="mi">0</span>)
        (ZifyClasses.mkrel nat Z lt Z.of_nat Z.lt
           Nat2Z.inj_lt n 
           (Z.of_nat n) eq_refl <span class="mi">0</span>%nat <span class="mi">0</span> eq_refl)
        isLess)) =
<span class="kr">match</span> n <span class="kr">with</span>
| <span class="mi">0</span>%nat | _ =&gt; default
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkdd">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt n (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span> n <span class="kr">with</span>
| <span class="mi">0</span>%nat =&gt; head
| S _0 =&gt; nth _0 tail head
<span class="kr">end</span> =
<span class="kr">match</span> n <span class="kr">with</span>
| <span class="mi">0</span>%nat =&gt; head
| S _0 =&gt; nth _0 tail default
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkde"><span class="nb">destruct</span> n <span class="kr">as</span> [| n].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt <span class="mi">0</span> (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">head = head</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkdf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt (S n) (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkdf"><hr></label><div class="goal-conclusion">nth n tail head = nth n tail default</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke0">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt <span class="mi">0</span> (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">head = head</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke1">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt (S n) (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth n tail head = nth n tail default</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke2"><span class="nb">rewrite</span> (nth_indep _ _ default).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt (S n) (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth n tail default = nth n tail default</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chke3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt (S n) (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chke3"><hr></label><div class="goal-conclusion">(n &lt; strings.length tail)%nat</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke4">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt (S n) (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">nth n tail default = nth n tail default</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke5">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>head</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>isLess</var><span class="hyp-type"><b>: </b><span>Nat.lt (S n) (S (strings.length tail))</span></span></span><br><span><var>default</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(n &lt; strings.length tail)%nat</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke6"><span class="kn">Lemma</span> <span class="nf">nthTrap</span> {<span class="nv">A</span> <span class="nv">arrayIndex</span> <span class="nv">arrayType</span> <span class="nv">variableIndex</span>} (<span class="nv">l</span> : list A) (<span class="nv">n</span> : Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chke8"><span class="nb">destruct</span> (decide (Nat.lt (Z.to_nat n) (length l))) <span class="kr">as</span> [h |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Nat.lt (Z.to_nat n) (strings.length l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue A</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chke9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>¬¨ Nat.lt (Z.to_nat n) (strings.length l)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chke9"><hr></label><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue A</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkea">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Nat.lt (Z.to_nat n) (strings.length l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ (nth_lt l (Z.to_nat n) h)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkeb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>variableIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>_0</var><span class="hyp-type"><b>: </b><span>¬¨ Nat.lt (Z.to_nat n) (strings.length l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action
  (WithLocalVariables arrayIndex arrayType
     variableIndex) withLocalVariablesReturnValue A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (trap _ _ _ _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">getArray</span> {<span class="nv">arrayIndex</span>} {<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>} {<span class="nv">variableIndex</span>} (<span class="nv">arrayName</span> : arrayIndex) (<span class="nv">length</span> : nat) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue (list (arrayType arrayName)) :=
  <span class="kr">match</span> length <span class="kr">with</span>
  | O =&gt; Done _ _ _ []
  | S length =&gt; retrieve _ _ _ arrayName (Z.of_nat length) &gt;&gt;= <span class="kr">fun</span> <span class="nv">x</span> =&gt; getArray arrayName length &gt;&gt;= <span class="kr">fun</span> <span class="nv">y</span> =&gt; Done _ _ _ (y ++ [x])
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">applyArray</span> {<span class="nv">arrayIndex</span>} {<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>} {<span class="nv">variableIndex</span>} (<span class="nv">arrayName</span> : arrayIndex) (<span class="nv">l</span> : list (arrayType arrayName)) (<span class="nv">startIndex</span> : Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue () :=
  <span class="kr">match</span> l <span class="kr">with</span>
  | [] =&gt; Done _ _ _ tt
  | head :: tail =&gt; store _ _ _ arrayName startIndex head &gt;&gt;= <span class="kr">fun</span> <span class="nv">x</span> =&gt; applyArray arrayName tail (startIndex + <span class="mi">1</span>)
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">invokeWithArrays</span> {<span class="nv">arrayIndex</span>} {<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>} {<span class="nv">variableIndex</span>} (<span class="nv">money</span> : Z) (<span class="nv">address</span> : list Z) (<span class="nv">arrayName</span> : arrayIndex) (<span class="nv">length</span> : Z) (<span class="nv">hEq</span> : arrayType arrayName = Z) : Action (WithLocalVariables arrayIndex arrayType variableIndex) withLocalVariablesReturnValue () := getArray arrayName (Z.to_nat length) &gt;&gt;= <span class="kr">fun</span> <span class="nv">array</span> =&gt; invoke arrayIndex arrayType variableIndex money address <span class="kp">ltac</span>:(<span class="nb">rewrite</span> hEq <span class="kr">in</span> *; <span class="bp">exact</span> array) &gt;&gt;= <span class="kr">fun</span> <span class="nv">array</span> =&gt; applyArray arrayName <span class="kp">ltac</span>:(<span class="nb">rewrite</span> hEq <span class="kr">in</span> *; <span class="bp">exact</span> array) <span class="mi">0</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkec"><span class="kn">Lemma</span> <span class="nf">getNewArrays</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span>} `{EqDecision arrayIndex} (x : Action (WithArrays arrayIndex arrayType) withArraysReturnValue ()) (arrays : <span class="kr">forall</span> <span class="nv">x</span>, list (arrayType x)) : (Action BasicEffect basicEffectReturnValue (<span class="kr">forall</span> <span class="nv">x</span>, list (arrayType x))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chked"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkee"><span class="nb">induction</span> x <span class="kr">as</span> [x | effect continuation IH] <span class="kr">in</span> arrays |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkef" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkef"><hr></label><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ arrays).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf2"><span class="nb">destruct</span> effect <span class="kr">as</span> [effect | arrayName index | arrayName index value].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType effect)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkf3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkf3"><hr></label><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkf4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkf4"><hr></label><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf5">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType effect)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ effect (<span class="kr">fun</span> <span class="nv">x</span> =&gt; (IH <span class="kp">ltac</span>:(<span class="nb">simpl</span> <span class="kr">in</span> *; <span class="bp">exact</span> x) arrays))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf7"><span class="nb">destruct</span> (decide (Nat.lt (Z.to_nat index) (length (arrays arrayName)))) <span class="kr">as</span> [H | H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Nat.lt (Z.to_nat index)
  (strings.length (arrays arrayName))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkf8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ Nat.lt (Z.to_nat index)
    (strings.length (arrays arrayName))</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkf8"><hr></label><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkf9">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Nat.lt (Z.to_nat index)
  (strings.length (arrays arrayName))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH <span class="kp">ltac</span>:(<span class="nb">simpl</span> <span class="kr">in</span> *; <span class="bp">exact</span> (nth_lt (arrays arrayName) (Z.to_nat index) H)) arrays).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkfa">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ Nat.lt (Z.to_nat index)
    (strings.length (arrays arrayName))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ Trap (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Done _ _ _ arrays)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkfb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkfc"><span class="nb">destruct</span> (decide (Nat.lt (Z.to_nat index) (length (arrays arrayName)))) <span class="kr">as</span> [H | H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Nat.lt (Z.to_nat index)
  (strings.length (arrays arrayName))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chkfd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ Nat.lt (Z.to_nat index)
    (strings.length (arrays arrayName))</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chkfd"><hr></label><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkfe">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Nat.lt (Z.to_nat index)
  (strings.length (arrays arrayName))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IH tt (<span class="kr">fun</span> <span class="nv">name</span> =&gt; <span class="kp">ltac</span>:(<span class="nb">destruct</span> (decide (name = arrayName)) <span class="kr">as</span> [H&#39; |]; [<span class="nb">subst</span> arrayName; <span class="bp">exact</span> (&lt;[(Z.to_nat index):=value]&gt;(arrays name)) | <span class="bp">exact</span> (arrays name)]))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chkff">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))
  ‚Üí Action BasicEffect basicEffectReturnValue
      (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>¬¨ Nat.lt (Z.to_nat index)
    (strings.length (arrays arrayName))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action BasicEffect basicEffectReturnValue
  (<span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ Trap (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Done _ _ _ arrays)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk100"><span class="kn">Lemma</span> <span class="nf">withArraysReturnValueDoBasicEffectArrayType</span> <span class="nv">arrayIndex1</span> <span class="nv">arrayIndex2</span> <span class="nv">arrayType1</span> <span class="nv">arrayType2</span> (<span class="nv">effect</span> : BasicEffect) : withArraysReturnValue (DoBasicEffect arrayIndex1 arrayType1 effect) = withArraysReturnValue (DoBasicEffect arrayIndex2 arrayType2 effect).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType1</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayType2</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType1 effect) =
withArraysReturnValue
  (DoBasicEffect arrayIndex2 arrayType2 effect)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk101"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType1</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayType2</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType1 effect) =
withArraysReturnValue
  (DoBasicEffect arrayIndex2 arrayType2 effect)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk102"><span class="kn">Lemma</span> <span class="nf">translateArrays</span> {<span class="nv">arrayIndex1</span> <span class="nv">arrayIndex2</span> <span class="nv">arrayType</span>} (<span class="nv">x</span> : Action (WithArrays arrayIndex1 arrayType) withArraysReturnValue ()) (<span class="nv">destinationArrayType</span> : arrayIndex2 -&gt; <span class="kt">Type</span>) (<span class="nv">mapping</span> : arrayIndex1 -&gt; arrayIndex2) (<span class="nv">hCongruent</span> : <span class="kr">forall</span> <span class="nv">x</span>, arrayType x = destinationArrayType (mapping x)) : Action (WithArrays arrayIndex2 destinationArrayType) withArraysReturnValue ().</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex1 arrayType)
  withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk103"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex1 arrayType)
  withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk104"><span class="nb">induction</span> x <span class="kr">as</span> [x | effect continuation IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk105" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex1 arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk105"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk106">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ tt).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk107">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex1 arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk108"><span class="nb">destruct</span> effect <span class="kr">as</span> [effect | arrayName index | arrayName index value].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType effect)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk109" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk109"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk10a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk10a"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk10b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType effect)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk10c"><span class="nb">rewrite</span> (withArraysReturnValueDoBasicEffectArrayType arrayIndex1 arrayIndex2 arrayType destinationArrayType) <span class="kr">in</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex1 arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex2 destinationArrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ destinationArrayType effect) IH).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk10d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk10e"><span class="nb">assert</span> (h : withArraysReturnValue (Retrieve arrayIndex1 arrayType arrayName index) = withArraysReturnValue (Retrieve arrayIndex2 destinationArrayType (mapping arrayName) index)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index) =
withArraysReturnValue
  (Retrieve arrayIndex2 destinationArrayType
     (mapping arrayName) index)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk10f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index) =
withArraysReturnValue
  (Retrieve arrayIndex2 destinationArrayType
     (mapping arrayName) index)</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk10f"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk110">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index) =
withArraysReturnValue
  (Retrieve arrayIndex2 destinationArrayType
     (mapping arrayName) index)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk111">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index) =
withArraysReturnValue
  (Retrieve arrayIndex2 destinationArrayType
     (mapping arrayName) index)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk112"><span class="nb">rewrite</span> h <span class="kr">in</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex2 destinationArrayType
     (mapping arrayName) index)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex1 arrayType arrayName index) =
withArraysReturnValue
  (Retrieve arrayIndex2 destinationArrayType
     (mapping arrayName) index)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (Retrieve _ destinationArrayType (mapping arrayName) index) IH).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk113">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk114"><span class="nb">assert</span> (h : withArraysReturnValue (Store arrayIndex1 arrayType arrayName index value) = withArraysReturnValue (Store _ destinationArrayType (mapping arrayName) index <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- hCongruent; <span class="bp">exact</span> value))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index value) =
withArraysReturnValue
  (Store arrayIndex2 destinationArrayType
     (mapping arrayName) index
     (eq_rect (arrayType arrayName) 
        (<span class="kr">Œª</span> <span class="nv">_0</span> : <span class="kt">Type</span>, _0) value
        (destinationArrayType (mapping arrayName))
        (hCongruent arrayName)))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk115" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value) =
withArraysReturnValue
  (Store arrayIndex2 destinationArrayType
     (mapping arrayName) index
     (eq_rect (arrayType arrayName)
        (<span class="kr">Œª</span> <span class="nv">_0</span> : <span class="kt">Type</span>, _0) value
        (destinationArrayType (mapping arrayName))
        (hCongruent arrayName)))</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk115"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk116">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index value) =
withArraysReturnValue
  (Store arrayIndex2 destinationArrayType
     (mapping arrayName) index
     (eq_rect (arrayType arrayName) 
        (<span class="kr">Œª</span> <span class="nv">_0</span> : <span class="kt">Type</span>, _0) value
        (destinationArrayType (mapping arrayName))
        (hCongruent arrayName)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk117">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value)
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value) =
withArraysReturnValue
  (Store arrayIndex2 destinationArrayType
     (mapping arrayName) index
     (eq_rect (arrayType arrayName)
        (<span class="kr">Œª</span> <span class="nv">_0</span> : <span class="kt">Type</span>, _0) value
        (destinationArrayType (mapping arrayName))
        (hCongruent arrayName)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk118"><span class="nb">rewrite</span> h <span class="kr">in</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex1, arrayIndex2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex1</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType
     arrayName index value)
‚Üí Action
    (WithArrays arrayIndex1 arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>destinationArrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex2 ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>mapping</var><span class="hyp-type"><b>: </b><span>arrayIndex1 ‚Üí arrayIndex2</span></span></span><br><span><var>hCongruent</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex1,
  arrayType _0 =
  destinationArrayType (mapping _0)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex2 destinationArrayType
     (mapping arrayName) index
     (eq_rect (arrayType arrayName)
        (<span class="kr">Œª</span> <span class="nv">_0</span> : <span class="kt">Type</span>, _0) value
        (destinationArrayType (mapping arrayName))
        (hCongruent arrayName)))
‚Üí Action
    (WithArrays arrayIndex2 destinationArrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex1 arrayType arrayName index
     value) =
withArraysReturnValue
  (Store arrayIndex2 destinationArrayType
     (mapping arrayName) index
     (eq_rect (arrayType arrayName)
        (<span class="kr">Œª</span> <span class="nv">_0</span> : <span class="kt">Type</span>, _0) value
        (destinationArrayType (mapping arrayName))
        (hCongruent arrayName)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex2 destinationArrayType)
  withArraysReturnValue ()</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (Store _ destinationArrayType (mapping arrayName) index <span class="kp">ltac</span>:(<span class="nb">rewrite</span> &lt;- hCongruent; <span class="bp">exact</span> value)) IH).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk119"><span class="kn">Lemma</span> <span class="nf">modifyArray</span> {<span class="nv">arrayIndex</span>} `{EqDecision arrayIndex} {arrayType : arrayIndex -&gt; <span class="kt">Type</span>} (arrays : <span class="kr">forall</span> <span class="nv">x</span>, list (arrayType x)) (toBeModified : arrayIndex) (index : nat) (value : arrayType toBeModified) : <span class="kr">forall</span> <span class="nv">x</span>, list (arrayType x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk11a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk11b"><span class="nb">intro</span> arrayName.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">list (arrayType arrayName)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk11c"><span class="nb">destruct</span> (decide (arrayName = toBeModified)) <span class="kr">as</span> [H | H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>arrayName = toBeModified</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">list (arrayType arrayName)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk11d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>arrayName ‚â† toBeModified</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk11d"><hr></label><div class="goal-conclusion">list (arrayType arrayName)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk11e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>arrayName = toBeModified</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">list (arrayType arrayName)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk11f"><span class="nb">rewrite</span> &lt;- H <span class="kr">in</span> value.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>arrayName = toBeModified</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">list (arrayType arrayName)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (&lt;[index:=value]&gt;(arrays arrayName)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk120">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>EqDecision arrayIndex</span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrays</var><span class="hyp-type"><b>: </b><span><span class="kr">‚àÄ</span> <span class="nv">_0</span> : arrayIndex, list (arrayType _0)</span></span></span><br><span><var>toBeModified</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType toBeModified</span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>arrayName ‚â† toBeModified</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">list (arrayType arrayName)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (arrays arrayName).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk121"><span class="kn">Lemma</span> <span class="nf">getAllCharacters</span> {<span class="nv">arrayIndex</span> <span class="nv">arrayType</span>} (<span class="nv">x</span> : Action (WithArrays arrayIndex arrayType) withArraysReturnValue ()) (<span class="nv">captured</span> : list Z) : Action (WithArrays arrayIndex arrayType) withArraysReturnValue (list Z).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk122"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue ()</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk123"><span class="nb">induction</span> x <span class="kr">as</span> [x | effect continuation IH] <span class="kr">in</span> captured |- *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk124" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk124"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk125">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>()%type</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Done _ _ _ captured).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk126">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>WithArrays arrayIndex arrayType</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue effect
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk127"><span class="nb">destruct</span> effect <span class="kr">as</span> [effect | arrayName index | arrayName index value].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType effect)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk128" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk128"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk129" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk129"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk12a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>effect</var><span class="hyp-type"><b>: </b><span>BasicEffect</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     effect)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType effect)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk12b"><span class="nb">destruct</span> effect <span class="kr">as</span> [| | | x | | | | | | |].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     Trap)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType Trap)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk12c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     Flush)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType Flush)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk12c"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk12d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     ReadChar)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType ReadChar)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk12d"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk12e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (WriteChar x))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (WriteChar x))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk12e"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk12f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>_2</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Donate _1 _2))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Donate _1 _2))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk12f"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk130" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>_2, _3</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Invoke _1 _2 _3))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Invoke _1 _2 _3))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk130"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk131" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetSender)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType GetSender)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk131"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk132" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetMoney)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType GetMoney)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk132"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk133" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetCommunicationSize)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetCommunicationSize)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk133"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (ReadByte _1))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (ReadByte _1))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk134"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Imperative-v-chk135" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1, _2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (SetByte _1 _2))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (SetByte _1 _2))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><label class="goal-separator" for="Imperative-v-chk135"><hr></label><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk136">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     Trap)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType Trap)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; IH returnValue captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk137">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     Flush)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType Flush)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Flush) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; IH returnValue captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk138">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     ReadChar)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType ReadChar)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ ReadChar) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; IH returnValue captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk139">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (WriteChar x))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (WriteChar x))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ (WriteChar x)) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; IH returnValue (captured ++ [x]))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13a">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>_2</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Donate _1 _2))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Donate _1 _2))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13b">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>_2, _3</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Invoke _1 _2 _3))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (Invoke _1 _2 _3))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13c">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetSender)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType GetSender)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13d">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetMoney)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType GetMoney)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13e">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetCommunicationSize)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     GetCommunicationSize)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk13f">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (ReadByte _1))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (ReadByte _1))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk140">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>_1, _2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (SetByte _1 _2))
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (DoBasicEffect arrayIndex arrayType
     (SetByte _1 _2))
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (DoBasicEffect _ _ Trap) (<span class="kr">fun</span> <span class="nv">returnValue</span> =&gt; Done _ _ _ captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk141">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType
     arrayName index)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Retrieve arrayIndex arrayType arrayName index)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (Retrieve _ arrayType arrayName index) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; IH x captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk142">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>arrayIndex</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>arrayType</var><span class="hyp-type"><b>: </b><span>arrayIndex ‚Üí <span class="kt">Type</span></span></span></span><br><span><var>arrayName</var><span class="hyp-type"><b>: </b><span>arrayIndex</span></span></span><br><span><var>index</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>value</var><span class="hyp-type"><b>: </b><span>arrayType arrayName</span></span></span><br><span><var>continuation</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName
     index value)
‚Üí Action
    (WithArrays arrayIndex arrayType)
    withArraysReturnValue ()</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>withArraysReturnValue
  (Store arrayIndex arrayType arrayName index
     value)
‚Üí list Z
  ‚Üí Action (WithArrays arrayIndex arrayType)
      withArraysReturnValue 
      (list Z)</span></span></span><br><span><var>captured</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Action (WithArrays arrayIndex arrayType)
  withArraysReturnValue 
  (list Z)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Dispatch _ _ _ (Store _ arrayType arrayName index value) (<span class="kr">fun</span> <span class="nv">x</span> =&gt; IH x captured)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">BlockchainAccount</span> :=
| ExternallyOwned (money : Z)
| BlockchainContract (arrayIndex : <span class="kt">Type</span>) (arrayIndexEqualityDecidable : EqDecision arrayIndex) (arrayType : arrayIndex -&gt; <span class="kt">Type</span>) (arrays : <span class="kr">forall</span> (<span class="nv">name</span> : arrayIndex), list (arrayType name)) (money : Z) (code : Action (WithArrays arrayIndex arrayType) withArraysReturnValue ()).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">BlockchainState</span> := list Z -&gt; BlockchainAccount.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">getBalance</span> (<span class="nv">x</span> : BlockchainAccount) : Z :=
  <span class="kr">match</span> x <span class="kr">with</span>
  | ExternallyOwned money =&gt; money
  | BlockchainContract _ _ _ _ balance _ =&gt; balance
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">updateBalance</span> (<span class="nv">x</span> : BlockchainAccount) (<span class="nv">newBalance</span> : Z) : BlockchainAccount :=
  <span class="kr">match</span> x <span class="kr">with</span>
  | ExternallyOwned _ =&gt; ExternallyOwned newBalance
  | BlockchainContract a b c d _ e =&gt; BlockchainContract a b c d newBalance e
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">transferMoney</span> (<span class="nv">state</span> : BlockchainState) (<span class="nv">sender</span> <span class="nv">target</span> : list Z) (<span class="nv">money</span> : Z) :=
  <span class="kr">let</span> <span class="nv">intermediateState</span> := update state sender (updateBalance (state sender) (getBalance (state sender) - money)) <span class="kr">in</span>
  update intermediateState target (updateBalance (state target) (getBalance (state target) + money)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* this assumes the money has already been transferred before the contract gets invoked *)</span>
<span class="c">(* so initially this function doesn&#39;t deduct the balance of the sender and credit the balance of the target *)</span>
<span class="c">(* revertTo: state before the money transfer and the subsequent contract invocation, state: current state *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">invokeContractAux</span> (<span class="nv">sender</span> <span class="nv">target</span> : list Z) (<span class="nv">money</span> : Z) (<span class="nv">revertTo</span> <span class="nv">state</span> : BlockchainState) (<span class="nv">communication</span> : list Z) (<span class="nv">fuel</span> : nat) (<span class="nv">arrayIndex</span> : <span class="kt">Type</span>) (<span class="nv">arrayIndexEqualityDecidable</span> : EqDecision arrayIndex) (<span class="nv">arrayType</span> : arrayIndex -&gt; <span class="kt">Type</span>) (<span class="nv">arrays</span> : <span class="kr">forall</span> (<span class="nv">name</span> : arrayIndex), list (arrayType name)) (<span class="nv">originalCode</span> <span class="nv">code</span> : Action (WithArrays arrayIndex arrayType) withArraysReturnValue ()): option (list Z * BlockchainState) :=
  <span class="kr">match</span> fuel <span class="kr">with</span>
  | O =&gt; None
  | S fuel =&gt; (<span class="kr">fix</span> inner (code : Action (WithArrays arrayIndex arrayType) withArraysReturnValue ()) (communication : list Z) (arrays : <span class="kr">forall</span> (<span class="nv">name</span> : arrayIndex), list (arrayType name)) (state : BlockchainState) :=
    <span class="kr">match</span> code <span class="kr">with</span>
    | Done _ _ _ _ =&gt; Some (communication, update state target (BlockchainContract arrayIndex _ arrayType arrays (getBalance (state target)) originalCode))
    | Dispatch _ _ _ (Retrieve _ _ arrayName index) continuation =&gt;
      <span class="kr">match</span> decide (Nat.lt (Z.to_nat index) (length (arrays arrayName))) <span class="kr">with</span>
      | <span class="nb">left</span> h =&gt; inner (continuation (nth_lt (arrays arrayName) (Z.to_nat index) h)) communication arrays state
      | <span class="nb">right</span> _ =&gt; Some ([], revertTo)
      <span class="kr">end</span>
    | Dispatch _ _ _ (Store _ _ arrayName index value) continuation =&gt;
      <span class="kr">match</span> decide (Nat.lt (Z.to_nat index) (length (arrays arrayName))) <span class="kr">with</span>
      | <span class="nb">left</span> h =&gt; inner (continuation tt) communication (<span class="kr">fun</span> <span class="nv">currentName</span> =&gt;
        <span class="kr">match</span> decide (currentName = arrayName) <span class="kr">with</span>
        | <span class="nb">left</span> h =&gt; <span class="kp">ltac</span>:(<span class="nb">rewrite</span> h; <span class="bp">exact</span> (&lt;[Z.to_nat index := value]&gt; (arrays arrayName)))
        | <span class="nb">right</span> _ =&gt; arrays currentName
        <span class="kr">end</span>) state
      | <span class="nb">right</span> _ =&gt; Some ([], revertTo)
      <span class="kr">end</span>
      | Dispatch _ _ _ (DoBasicEffect _ _ Trap) continuation =&gt; Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ Flush) continuation =&gt; Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ ReadChar) continuation =&gt; Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ (WriteChar _)) continuation =&gt; Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ (Donate money address)) continuation =&gt;
        <span class="kr">if</span> decide (money &lt;= getBalance (state target) /\ <span class="mi">0</span> &lt;= money /\ money &lt; <span class="mi">2</span>^<span class="mi">256</span>) <span class="kr">then</span>
          inner (continuation tt) communication arrays (transferMoney state target address money)
        <span class="kr">else</span> Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ (Invoke money address passedArray)) continuation =&gt;
        <span class="kr">if</span> decide (money &lt;= getBalance (state target) /\ <span class="mi">0</span> &lt;= money /\ money &lt; <span class="mi">2</span>^<span class="mi">256</span>) <span class="kr">then</span>
          <span class="kr">let</span> <span class="nv">alteredState</span> := update state target (BlockchainContract arrayIndex _ arrayType arrays (getBalance (state target)) originalCode) <span class="kr">in</span>
          <span class="kr">match</span> (state address) <span class="kr">with</span>
          | ExternallyOwned _ =&gt; inner (continuation []) communication arrays (transferMoney alteredState target address money)
          | BlockchainContract arrayIndex arrayIndexEqualityDecidable arrayType arrays2 balance code =&gt; <span class="kr">match</span> invokeContractAux target address money alteredState (transferMoney alteredState target address money) passedArray fuel arrayIndex arrayIndexEqualityDecidable arrayType arrays2 code code <span class="kr">with</span>
            | None =&gt; None
            | Some (newArray, newState) =&gt; inner (continuation newArray) communication arrays newState
            <span class="kr">end</span>
          <span class="kr">end</span>
        <span class="kr">else</span> Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ GetSender) continuation =&gt; inner (continuation sender) communication arrays state
      | Dispatch _ _ _ (DoBasicEffect _ _ GetMoney) continuation =&gt; inner (continuation money) communication arrays state
      | Dispatch _ _ _ (DoBasicEffect _ _ GetCommunicationSize) continuation =&gt; inner (continuation (Z.of_nat (length communication))) communication arrays state
      | Dispatch _ _ _ (DoBasicEffect _ _ (ReadByte index)) continuation =&gt;
        <span class="kr">if</span> decide (Nat.lt (Z.to_nat index) (length communication)) <span class="kr">then</span>
          inner (continuation (nth (Z.to_nat index) communication <span class="mi">0</span>)) communication arrays state
        <span class="kr">else</span> Some ([], revertTo)
      | Dispatch _ _ _ (DoBasicEffect _ _ (SetByte index value)) continuation =&gt;
        <span class="kr">if</span> decide (Nat.lt (Z.to_nat index) (length communication)) <span class="kr">then</span>
          inner (continuation tt) (&lt;[Z.to_nat index := value]&gt; communication) arrays state
        <span class="kr">else</span> Some ([], revertTo)
      <span class="kr">end</span>) code communication arrays state
    <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">invokeContract</span> (<span class="nv">sender</span> <span class="nv">target</span> : list Z) (<span class="nv">money</span> : Z) (<span class="nv">revertTo</span> <span class="nv">state</span> : BlockchainState) (<span class="nv">communication</span> : list Z) (<span class="nv">fuel</span> : nat) :=
  <span class="kr">match</span> state target <span class="kr">with</span>
  | ExternallyOwned _ =&gt; Some ([], state)
  | BlockchainContract arrayIndex arrayIndexEqualityDecidable arrayType arrays balance code =&gt; invokeContractAux sender target money revertTo state communication fuel arrayIndex arrayIndexEqualityDecidable arrayType arrays code code
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk143"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_0</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">code</span>,
    invokeContractAux sender target money revertTo state communication <span class="mi">0</span> arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode code = None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : <span class="kt">Type</span>) (<span class="nv">_7</span> : EqDecision _6) (<span class="nv">_8</span> : 
                                                 _6
                                                 ‚Üí <span class="kt">Type</span>) 
  (<span class="nv">_9</span> : <span class="kr">‚àÄ</span> <span class="nv">_9</span> : _6, list (_8 _9)) (<span class="nv">_10</span>
                                  <span class="nv">_11</span> : Action
                                          (WithArrays
                                             _6 _8)
                                          withArraysReturnValue
                                          ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 <span class="mi">0</span> _6 _7 _8 _9
    _10 _11 = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk144"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : <span class="kt">Type</span>) (<span class="nv">_7</span> : EqDecision _6) (<span class="nv">_8</span> : 
                                                 _6
                                                 ‚Üí <span class="kt">Type</span>) 
  (<span class="nv">_9</span> : <span class="kr">‚àÄ</span> <span class="nv">_9</span> : _6, list (_8 _9)) (<span class="nv">_10</span>
                                  <span class="nv">_11</span> : Action
                                          (WithArrays
                                             _6 _8)
                                          withArraysReturnValue
                                          ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 <span class="mi">0</span> _6 _7 _8 _9
    _10 _11 = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk145"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Done</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">returnValue</span> <span class="nv">originalCode</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Done _ _ _ returnValue) =
      Some (communication, update state target (BlockchainContract arrayIndex _ arrayType arrays (getBalance (state target)) originalCode)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : ()) (<span class="nv">_12</span> : Action (WithArrays _7 _9)
                      withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _12
    (Done (WithArrays _7 _9) withArraysReturnValue ()
       _11) =
  Some
    (_5,
     update _4 _1
       (BlockchainContract _7 _8 _9 _10
          (getBalance (_4 _1)) _12))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk146"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : ()) (<span class="nv">_12</span> : Action (WithArrays _7 _9)
                      withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _12
    (Done (WithArrays _7 _9) withArraysReturnValue ()
       _11) =
  Some
    (_5,
     update _4 _1
       (BlockchainContract _7 _8 _9 _10
          (getBalance (_4 _1)) _12))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk147"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Retrieve</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">arrayName</span> <span class="nv">index</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (Retrieve _ _ arrayName index) continuation) =
      <span class="kr">match</span> decide (Nat.lt (Z.to_nat index) (length (arrays arrayName))) <span class="kr">with</span>
      | <span class="nb">left</span> h =&gt; invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation (nth_lt (arrays arrayName) (Z.to_nat index) h))
      | <span class="nb">right</span> _ =&gt; Some ([], revertTo)
      <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : _7) (<span class="nv">_13</span> : Z) 
  (<span class="nv">_14</span> : withArraysReturnValue
           (Retrieve _7 _9 _12 _13)
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (Retrieve _7 _9 _12 _13) _14) =
  <span class="kr">match</span>
    decide
      (Nat.lt (Z.to_nat _13)
         (strings.length (_10 _12)))
  <span class="kr">with</span>
  | <span class="nb">left</span> _15 =&gt;
      invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8
        _9 _10 _11
        (_14 (nth_lt (_10 _12) (Z.to_nat _13) _15))
  | <span class="nb">right</span> _ =&gt; Some ([], _3)
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk148"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : _7) (<span class="nv">_13</span> : Z) 
  (<span class="nv">_14</span> : withArraysReturnValue
           (Retrieve _7 _9 _12 _13)
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (Retrieve _7 _9 _12 _13) _14) =
  <span class="kr">match</span>
    decide
      (Nat.lt (Z.to_nat _13)
         (strings.length (_10 _12)))
  <span class="kr">with</span>
  | <span class="nb">left</span> _15 =&gt;
      invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8
        _9 _10 _11
        (_14 (nth_lt (_10 _12) (Z.to_nat _13) _15))
  | <span class="nb">right</span> _ =&gt; Some ([], _3)
  <span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk149"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Store</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">arrayName</span> <span class="nv">index</span> <span class="nv">value</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (Store _ _ arrayName index value) continuation) =
      <span class="kr">match</span> decide (Nat.lt (Z.to_nat index) (length (arrays arrayName))) <span class="kr">with</span>
      | <span class="nb">left</span> h =&gt;
          invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType 
            (<span class="kr">fun</span> <span class="nv">currentName</span> =&gt; <span class="kr">match</span> decide (currentName = arrayName) <span class="kr">with</span>
              | <span class="nb">left</span> h =&gt; <span class="kp">ltac</span>:(<span class="nb">rewrite</span> h; <span class="bp">exact</span> (&lt;[Z.to_nat index := value]&gt; (arrays arrayName)))
              | <span class="nb">right</span> _ =&gt; arrays currentName
              <span class="kr">end</span>)
            originalCode (continuation tt)
      | <span class="nb">right</span> _ =&gt; Some ([], revertTo)
      <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : _7) (<span class="nv">_13</span> : Z) 
  (<span class="nv">_14</span> : _9 _12) (<span class="nv">_15</span> : withArraysReturnValue
                          (Store _7 _9 _12 _13 _14)
                        ‚Üí Action (WithArrays _7 _9)
                            withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (Store _7 _9 _12 _13 _14) _15) =
  (<span class="kr">if</span>
    decide
      (Nat.lt (Z.to_nat _13)
         (strings.length (_10 _12)))
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8
      _9
      (<span class="kr">Œª</span> <span class="nv">_16</span> : _7,
         <span class="kr">match</span> decide (_16 = _12) <span class="kr">with</span>
         | <span class="nb">left</span> _17 =&gt;
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">_18</span> : _7, list (_9 _18))
               (&lt;[Z.to_nat _13:=_14]&gt; (_10 _12)) _17
         | <span class="nb">right</span> _ =&gt; _10 _16
         <span class="kr">end</span>) _11 (_15 ())
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : _7) (<span class="nv">_13</span> : Z) 
  (<span class="nv">_14</span> : _9 _12) (<span class="nv">_15</span> : withArraysReturnValue
                          (Store _7 _9 _12 _13 _14)
                        ‚Üí Action (WithArrays _7 _9)
                            withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (Store _7 _9 _12 _13 _14) _15) =
  (<span class="kr">if</span>
    decide
      (Nat.lt (Z.to_nat _13)
         (strings.length (_10 _12)))
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8
      _9
      (<span class="kr">Œª</span> <span class="nv">_16</span> : _7,
         <span class="kr">match</span> decide (_16 = _12) <span class="kr">with</span>
         | <span class="nb">left</span> _17 =&gt;
             eq_rect_r (<span class="kr">Œª</span> <span class="nv">_18</span> : _7, list (_9 _18))
               (&lt;[Z.to_nat _13:=_14]&gt; (_10 _12)) _17
         | <span class="nb">right</span> _ =&gt; _10 _16
         <span class="kr">end</span>) _11 (_15 ())
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14b"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Trap</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ Trap) continuation) = 
      Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 Trap)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 Trap) _12) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 Trap)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 Trap) _12) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14d"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Flush</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ Flush) continuation) = 
      Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 Flush)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 Flush) _12) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 Flush)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 Flush) _12) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk14f"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_ReadChar</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ ReadChar) continuation) = 
      Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 ReadChar)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 ReadChar) _12) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk150"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 ReadChar)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 ReadChar) _12) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk151"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_WriteChar</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">value</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ (WriteChar value)) continuation) = 
      Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span> : 
                                                withArraysReturnValue
                                                 (DoBasicEffect
                                                 _7 _9
                                                 (WriteChar
                                                 _12))
                                                ‚Üí 
                                                Action
                                                 (WithArrays
                                                 _7 _9)
                                                 withArraysReturnValue
                                                 ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (WriteChar _12)) _13) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk152"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span> : 
                                                withArraysReturnValue
                                                 (DoBasicEffect
                                                 _7 _9
                                                 (WriteChar
                                                 _12))
                                                ‚Üí 
                                                Action
                                                 (WithArrays
                                                 _7 _9)
                                                 withArraysReturnValue
                                                 ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (WriteChar _12)) _13) =
  Some ([], _3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk153"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Donate</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">donationMoney</span> <span class="nv">address</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ (Donate donationMoney address)) continuation) = 
      <span class="kr">if</span> decide (donationMoney &lt;= getBalance (state target) /\ <span class="mi">0</span> &lt;= donationMoney /\ donationMoney &lt; <span class="mi">2</span>^<span class="mi">256</span>) <span class="kr">then</span>
        invokeContractAux sender target money revertTo (transferMoney state target address donationMoney) communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation tt)
      <span class="kr">else</span> Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span> : 
                                                list Z) 
  (<span class="nv">_14</span> : withArraysReturnValue
           (DoBasicEffect _7 _9 (Donate _12 _13))
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (Donate _12 _13)) _14) =
  (<span class="kr">if</span>
    decide
      (_12 &lt;= getBalance (_4 _1) ‚àß <span class="mi">0</span> &lt;= _12 &lt; <span class="mi">2</span> ^ <span class="mi">256</span>)
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3
      (transferMoney _4 _1 _13 _12) _5 (S _6) _7 _8 _9
      _10 _11 (_14 ())
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk154"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span> : 
                                                list Z) 
  (<span class="nv">_14</span> : withArraysReturnValue
           (DoBasicEffect _7 _9 (Donate _12 _13))
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (Donate _12 _13)) _14) =
  (<span class="kr">if</span>
    decide
      (_12 &lt;= getBalance (_4 _1) ‚àß <span class="mi">0</span> &lt;= _12 &lt; <span class="mi">2</span> ^ <span class="mi">256</span>)
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3
      (transferMoney _4 _1 _13 _12) _5 (S _6) _7 _8 _9
      _10 _11 (_14 ())
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk155"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_Invoke</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">invokeMoney</span> <span class="nv">address</span> <span class="nv">passedArray</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ (Invoke invokeMoney address passedArray)) continuation) = 
      <span class="kr">if</span> decide (invokeMoney &lt;= getBalance (state target) /\ <span class="mi">0</span> &lt;= invokeMoney /\ invokeMoney &lt; <span class="mi">2</span>^<span class="mi">256</span>) <span class="kr">then</span>
        <span class="kr">let</span> <span class="nv">alteredState</span> := update state target (BlockchainContract arrayIndex _ arrayType arrays (getBalance (state target)) originalCode) <span class="kr">in</span>
        <span class="kr">match</span> (state address) <span class="kr">with</span>
        | ExternallyOwned _ =&gt; invokeContractAux sender target money revertTo (transferMoney alteredState target address invokeMoney) communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation [])
        | BlockchainContract arrayIndex2 arrayIndexEqualityDecidable2 arrayType2 arrays2 _ code =&gt;
          <span class="kr">match</span> invokeContractAux target address invokeMoney alteredState (transferMoney alteredState target address invokeMoney) passedArray fuel arrayIndex2 arrayIndexEqualityDecidable2 arrayType2 arrays2 code code <span class="kr">with</span>
          | None =&gt; None
          | Some (newArray, newState) =&gt; invokeContractAux sender target money revertTo newState communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation newArray)
          <span class="kr">end</span>
        <span class="kr">end</span>
      <span class="kr">else</span> Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span>
                                                <span class="nv">_14</span> : 
                                                list Z) 
  (<span class="nv">_15</span> : withArraysReturnValue
           (DoBasicEffect _7 _9 (Invoke _12 _13 _14))
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (Invoke _12 _13 _14))
       _15) =
  (<span class="kr">if</span>
    decide
      (_12 &lt;= getBalance (_4 _1) ‚àß <span class="mi">0</span> &lt;= _12 &lt; <span class="mi">2</span> ^ <span class="mi">256</span>)
   <span class="kr">then</span>
    <span class="kr">let</span> <span class="nv">_16</span> :=
      update _4 _1
        (BlockchainContract _7 _8 _9 _10
           (getBalance (_4 _1)) _11) <span class="kr">in</span>
    <span class="kr">match</span> _4 _13 <span class="kr">with</span>
    | ExternallyOwned _ =&gt;
        invokeContractAux _0 _1 _2 _3
          (transferMoney _16 _1 _13 _12) _5 (S _6) _7
          _8 _9 _10 _11 (_15 [])
    | BlockchainContract _17 _18 _19 _20 _ _22 =&gt;
        <span class="kr">match</span>
          invokeContractAux _1 _13 _12 _16
            (transferMoney _16 _1 _13 _12) _14 _6 _17
            _18 _19 _20 _22 _22
        <span class="kr">with</span>
        | Some (_24, _25) =&gt;
            invokeContractAux _0 _1 _2 _3 _25 _5
              (S _6) _7 _8 _9 _10 _11 (_15 _24)
        | None =&gt; None
        <span class="kr">end</span>
    <span class="kr">end</span>
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk156"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span>
                                                <span class="nv">_14</span> : 
                                                list Z) 
  (<span class="nv">_15</span> : withArraysReturnValue
           (DoBasicEffect _7 _9 (Invoke _12 _13 _14))
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (Invoke _12 _13 _14))
       _15) =
  (<span class="kr">if</span>
    decide
      (_12 &lt;= getBalance (_4 _1) ‚àß <span class="mi">0</span> &lt;= _12 &lt; <span class="mi">2</span> ^ <span class="mi">256</span>)
   <span class="kr">then</span>
    <span class="kr">let</span> <span class="nv">_16</span> :=
      update _4 _1
        (BlockchainContract _7 _8 _9 _10
           (getBalance (_4 _1)) _11) <span class="kr">in</span>
    <span class="kr">match</span> _4 _13 <span class="kr">with</span>
    | ExternallyOwned _ =&gt;
        invokeContractAux _0 _1 _2 _3
          (transferMoney _16 _1 _13 _12) _5 (S _6) _7
          _8 _9 _10 _11 (_15 [])
    | BlockchainContract _17 _18 _19 _20 _ _22 =&gt;
        <span class="kr">match</span>
          invokeContractAux _1 _13 _12 _16
            (transferMoney _16 _1 _13 _12) _14 _6 _17
            _18 _19 _20 _22 _22
        <span class="kr">with</span>
        | Some (_24, _25) =&gt;
            invokeContractAux _0 _1 _2 _3 _25 _5
              (S _6) _7 _8 _9 _10 _11 (_15 _24)
        | None =&gt; None
        <span class="kr">end</span>
    <span class="kr">end</span>
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk157"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_GetSender</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ GetSender) continuation) = invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation sender).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 GetSender)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 GetSender) _12) =
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11 (_12 _0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk158"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 GetSender)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 GetSender) _12) =
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11 (_12 _0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk159"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_GetMoney</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ GetMoney) continuation) = invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation money).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 GetMoney)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 GetMoney) _12) =
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11 (_12 _2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 GetMoney)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 GetMoney) _12) =
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11 (_12 _2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15b"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_GetCommunicationSize</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ GetCommunicationSize) continuation) = invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation (Z.of_nat (length communication))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 GetCommunicationSize)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 GetCommunicationSize)
       _12) =
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11 (_12 (Z.of_nat (strings.length _5)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : withArraysReturnValue
                                              (DoBasicEffect
                                                 _7 _9
                                                 GetCommunicationSize)
                                            ‚Üí Action
                                                (WithArrays
                                                 _7 _9)
                                                withArraysReturnValue
                                                ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 GetCommunicationSize)
       _12) =
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11 (_12 (Z.of_nat (strings.length _5)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15d"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_ReadByte</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">index</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ (ReadByte index)) continuation) =
    <span class="kr">if</span> decide (Nat.lt (Z.to_nat index) (length communication)) <span class="kr">then</span>
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation (nth (Z.to_nat index) communication <span class="mi">0</span>))
    <span class="kr">else</span> Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span> : 
                                                withArraysReturnValue
                                                 (DoBasicEffect
                                                 _7 _9
                                                 (ReadByte
                                                 _12))
                                                ‚Üí 
                                                Action
                                                 (WithArrays
                                                 _7 _9)
                                                 withArraysReturnValue
                                                 ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (ReadByte _12)) _13) =
  (<span class="kr">if</span>
    decide (Nat.lt (Z.to_nat _12) (strings.length _5))
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8
      _9 _10 _11 (_13 (nth (Z.to_nat _12) _5 <span class="mi">0</span>))
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> : Z) (<span class="nv">_13</span> : 
                                                withArraysReturnValue
                                                 (DoBasicEffect
                                                 _7 _9
                                                 (ReadByte
                                                 _12))
                                                ‚Üí 
                                                Action
                                                 (WithArrays
                                                 _7 _9)
                                                 withArraysReturnValue
                                                 ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (ReadByte _12)) _13) =
  (<span class="kr">if</span>
    decide (Nat.lt (Z.to_nat _12) (strings.length _5))
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8
      _9 _10 _11 (_13 (nth (Z.to_nat _12) _5 <span class="mi">0</span>))
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk15f"><span class="kn">Lemma</span> <span class="nf">unfoldInvoke_S_SetByte</span> : 
  <span class="kr">forall</span> <span class="nv">sender</span> <span class="nv">target</span> <span class="nv">money</span> <span class="nv">revertTo</span> <span class="nv">state</span> <span class="nv">communication</span> <span class="nv">fuel</span> <span class="nv">arrayIndex</span> <span class="nv">arrayIndexEqualityDecidable</span> <span class="nv">arrayType</span> <span class="nv">arrays</span> <span class="nv">originalCode</span> <span class="nv">index</span> <span class="nv">value</span> <span class="nv">continuation</span>,
    invokeContractAux sender target money revertTo state communication (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (Dispatch _ _ _ (DoBasicEffect _ _ (SetByte index value)) continuation) =
    <span class="kr">if</span> decide (Nat.lt (Z.to_nat index) (length communication)) <span class="kr">then</span>
    invokeContractAux sender target money revertTo state (&lt;[Z.to_nat index := value]&gt; communication) (S fuel) arrayIndex arrayIndexEqualityDecidable arrayType arrays originalCode (continuation tt)
    <span class="kr">else</span> Some ([], revertTo).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> <span class="nv">_13</span> : Z) 
  (<span class="nv">_14</span> : withArraysReturnValue
           (DoBasicEffect _7 _9 (SetByte _12 _13))
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (SetByte _12 _13)) _14) =
  (<span class="kr">if</span>
    decide (Nat.lt (Z.to_nat _12) (strings.length _5))
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3 _4
      (&lt;[Z.to_nat _12:=_13]&gt; _5) (S _6) _7 _8 _9 _10
      _11 (_14 ())
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Imperative-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="Imperative-v-chk160"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">‚àÄ</span> (<span class="nv">_0</span> <span class="nv">_1</span> : list Z) (<span class="nv">_2</span> : Z) (<span class="nv">_3</span> <span class="nv">_4</span> : BlockchainState) 
  (<span class="nv">_5</span> : list Z) (<span class="nv">_6</span> : nat) (<span class="nv">_7</span> : <span class="kt">Type</span>) (<span class="nv">_8</span> : EqDecision
                                               _7) 
  (<span class="nv">_9</span> : _7 ‚Üí <span class="kt">Type</span>) (<span class="nv">_10</span> : <span class="kr">‚àÄ</span> <span class="nv">_10</span> : _7, list (_9 _10)) 
  (<span class="nv">_11</span> : Action (WithArrays _7 _9)
           withArraysReturnValue ()) (<span class="nv">_12</span> <span class="nv">_13</span> : Z) 
  (<span class="nv">_14</span> : withArraysReturnValue
           (DoBasicEffect _7 _9 (SetByte _12 _13))
         ‚Üí Action (WithArrays _7 _9)
             withArraysReturnValue ()),
  invokeContractAux _0 _1 _2 _3 _4 _5 (S _6) _7 _8 _9
    _10 _11
    (Dispatch (WithArrays _7 _9) withArraysReturnValue
       () (DoBasicEffect _7 _9 (SetByte _12 _13)) _14) =
  (<span class="kr">if</span>
    decide (Nat.lt (Z.to_nat _12) (strings.length _5))
   <span class="kr">then</span>
    invokeContractAux _0 _1 _2 _3 _4
      (&lt;[Z.to_nat _12:=_13]&gt; _5) (S _6) _7 _8 _9 _10
      _11 (_14 ())
   <span class="kr">else</span> Some ([], _3))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Create HintDb</span> advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_0 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Done : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Retrieve : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Store : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Trap : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Flush : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_ReadChar : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_WriteChar : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Donate : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_Invoke : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_GetSender : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_GetMoney : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_GetCommunicationSize : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_ReadByte : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> unfoldInvoke_S_SetByte : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushDispatch : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushDispatch2 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushBooleanGet : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushBooleanGet2 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushNumberGet : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushNumberGet2 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushAddressGet : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushAddressGet2 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushBooleanSet : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushBooleanSet2 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushNumberSet : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushNumberSet2 : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushAddressSet : advance_program.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Hint Rewrite</span> @pushAddressSet2 : advance_program.</span><span class="alectryon-wsp">
</span></span></pre></article></body></html>