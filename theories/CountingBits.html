<!doctype html>
<html class="alectryon-standalone">
  <head>
    <title>CountingBits.v</title>
    <meta charset="utf-8" />
    <meta content="Alectryon" name="generator" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="alectryon.css" rel="stylesheet" />
    <link href="pygments.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css"
      integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw=="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css"
      integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA=="
      crossorigin="anonymous"
    />
    <script src="alectryon.js"></script>
  </head>
  <body>
    <article class="alectryon-root alectryon-centered">
      <div class="alectryon-banner">
        Built with
        <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>,
        running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span
          class="alectryon-bubble"
        ></span
        >) indicate interactive fragments: hover for details, tap to reveal
        contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate,
        <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of
        <kbd>Ctrl</kbd>.
      </div>
      <pre
        class="alectryon-io highlight"
      ><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> List.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk0"><span class="kn">Require Import</span> NArith.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1"><span class="kn">Require Import</span> Lia.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> ListNotations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">to_binary_positive</span> (<span class="nv">n</span> : positive) := <span class="kr">match</span> n <span class="kr">with</span>
  | xI a =&gt; to_binary_positive a ++ [true]
  | xO a =&gt; to_binary_positive a ++ [false]
  | xH =&gt; [true]
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_binary_N</span> (<span class="nv">n</span> : N) := <span class="kr">match</span> n <span class="kr">with</span>
  | N0 =&gt; [false]
  | Npos x =&gt; to_binary_positive x
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Helper function to convert natural number to list of bools representing binary digits *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">to_binary</span> (<span class="nv">n</span> : nat) : list bool :=
  to_binary_N (N.of_nat n).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Definition of popcount (population count) *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">popcount</span> (<span class="nv">l</span> : list bool) : nat :=
  <span class="kr">match</span> l <span class="kr">with</span>
  | [] =&gt; <span class="mi">0</span>
  | true :: the_rest =&gt; <span class="mi">1</span> + popcount the_rest
  | false :: the_rest =&gt; popcount the_rest
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Definition of total_popcount *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">total_popcount</span> (<span class="nv">n</span> : nat) : nat :=
  <span class="kr">match</span> n <span class="kr">with</span>
  | <span class="mi">0</span> =&gt; <span class="mi">0</span>
  | S n&#39; =&gt; total_popcount n&#39; + popcount (to_binary n&#39;)
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Hypothesis 1: H_even (placeholder proof) *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2"><span class="kn">Lemma</span> <span class="nf">H_even</span> : <span class="kr">forall</span> <span class="nv">n</span> : nat, total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat,
total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat,
total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk4"><span class="nb">intro</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk5"><span class="nb">induction</span> n <span class="kr">as</span> [| n IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * <span class="mi">0</span>) = <span class="mi">0</span> + <span class="mi">2</span> * total_popcount <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk6"><hr></label><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * S n) =
S n + <span class="mi">2</span> * total_popcount (S n)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk7">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * <span class="mi">0</span>) = <span class="mi">0</span> + <span class="mi">2</span> * total_popcount <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk8">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * S n) =
S n + <span class="mi">2</span> * total_popcount (S n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk9"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : <span class="mi">2</span> * S n = S (S (<span class="mi">2</span> * n))), !(<span class="kp">ltac</span>:(<span class="nb">simpl</span>; <span class="bp">reflexivity</span>) : total_popcount (S _) = _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) + popcount (to_binary (<span class="mi">2</span> * n)) +
popcount (to_binary (S (<span class="mi">2</span> * n))) =
S n + <span class="mi">2</span> * (total_popcount n + popcount (to_binary n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chka"><span class="nb">unfold</span> to_binary.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount (to_binary_N (N.of_nat (<span class="mi">2</span> * n))) +
popcount (to_binary_N (N.of_nat (S (<span class="mi">2</span> * n)))) =
S n +
<span class="mi">2</span> *
(total_popcount n +
 popcount (to_binary_N (N.of_nat n)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chkb"><span class="nb">rewrite</span> Nat2N.inj_double, Nat2N.inj_succ_double.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount (to_binary_N (N.double (N.of_nat n))) +
popcount (to_binary_N (N.succ_double (N.of_nat n))) =
S n +
<span class="mi">2</span> *
(total_popcount n +
 popcount (to_binary_N (N.of_nat n)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chkc"><span class="nb">unfold</span> N.double.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount
  (to_binary_N
     <span class="kr">match</span> N.of_nat n <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">0</span>
     | N.pos p =&gt; N.pos p~<span class="mi">0</span>
     <span class="kr">end</span>) +
popcount (to_binary_N (N.succ_double (N.of_nat n))) =
S n +
<span class="mi">2</span> *
(total_popcount n +
 popcount (to_binary_N (N.of_nat n)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chkd"><span class="nb">unfold</span> N.succ_double.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount
  (to_binary_N
     <span class="kr">match</span> N.of_nat n <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">0</span>
     | N.pos p =&gt; N.pos p~<span class="mi">0</span>
     <span class="kr">end</span>) +
popcount
  (to_binary_N
     <span class="kr">match</span> N.of_nat n <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">1</span>
     | N.pos p =&gt; N.pos p~<span class="mi">1</span>
     <span class="kr">end</span>) =
S n +
<span class="mi">2</span> *
(total_popcount n +
 popcount (to_binary_N (N.of_nat n)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chke"><span class="nb">remember</span> (N.of_nat n) <span class="kr">as</span> x <span class="nb">eqn</span>:hX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>N</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>x = N.of_nat n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount
  (to_binary_N
     <span class="kr">match</span> x <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">0</span>
     | N.pos p =&gt; N.pos p~<span class="mi">0</span>
     <span class="kr">end</span>) +
popcount
  (to_binary_N
     <span class="kr">match</span> x <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">1</span>
     | N.pos p =&gt; N.pos p~<span class="mi">1</span>
     <span class="kr">end</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chkf"><span class="nb">symmetry in</span> hX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>N</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount
  (to_binary_N
     <span class="kr">match</span> x <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">0</span>
     | N.pos p =&gt; N.pos p~<span class="mi">0</span>
     <span class="kr">end</span>) +
popcount
  (to_binary_N
     <span class="kr">match</span> x <span class="kr">with</span>
     | <span class="mi">0</span> =&gt; <span class="mi">1</span>
     | N.pos p =&gt; N.pos p~<span class="mi">1</span>
     <span class="kr">end</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk10"><span class="nb">destruct</span> x <span class="kr">as</span> [| x].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) + popcount (to_binary_N <span class="mi">0</span>) +
popcount (to_binary_N <span class="mi">1</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N <span class="mi">0</span>))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk11" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk11"><hr></label><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount (to_binary_N (N.pos x~<span class="mi">0</span>)) +
popcount (to_binary_N (N.pos x~<span class="mi">1</span>)) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_N (N.pos x)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk12">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) + popcount (to_binary_N <span class="mi">0</span>) +
popcount (to_binary_N <span class="mi">1</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N <span class="mi">0</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk13"><span class="nb">rewrite</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n + popcount (to_binary_N <span class="mi">0</span>) +
popcount (to_binary_N <span class="mi">1</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N <span class="mi">0</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk14"><span class="nb">assert</span> (h : n = <span class="mi">0</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk15" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk15"><hr></label><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n + popcount (to_binary_N <span class="mi">0</span>) +
popcount (to_binary_N <span class="mi">1</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N <span class="mi">0</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk16">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk17"><span class="nb">destruct</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * <span class="mi">0</span>) = <span class="mi">0</span> + <span class="mi">2</span> * total_popcount <span class="mi">0</span></span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat <span class="mi">0</span> = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">0</span> = <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * S n) =
S n + <span class="mi">2</span> * total_popcount (S n)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat (S n) = <span class="mi">0</span>%N</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk18"><hr></label><div class="goal-conclusion">S n = <span class="mi">0</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk19">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * <span class="mi">0</span>) = <span class="mi">0</span> + <span class="mi">2</span> * total_popcount <span class="mi">0</span></span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat <span class="mi">0</span> = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">0</span> = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * S n) =
S n + <span class="mi">2</span> * total_popcount (S n)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat (S n) = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S n = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1b"><span class="nb">cbv</span> <span class="kr">in</span> hX.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * S n) =
S n + <span class="mi">2</span> * total_popcount (S n)</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.pos
  ((<span class="kr">fix</span> of_succ_nat (n : nat) : positive :=
      <span class="kr">match</span> n <span class="kr">with</span>
      | <span class="mi">0</span> =&gt; <span class="mi">1</span>%positive
      | S x =&gt;
          (<span class="kr">fix</span> succ (x0 : positive) : positive :=
             <span class="kr">match</span> x0 <span class="kr">with</span>
             | (p~<span class="mi">1</span>)%positive =&gt;
                 ((succ p)~<span class="mi">0</span>)%positive
             | (p~<span class="mi">0</span>)%positive =&gt; (p~<span class="mi">1</span>)%positive
             | <span class="mi">1</span>%positive =&gt; <span class="mi">2</span>%positive
             <span class="kr">end</span>) (of_succ_nat x)
      <span class="kr">end</span>) n) = <span class="mi">0</span>%N</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S n = <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1c">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = <span class="mi">0</span>%N</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>n = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n + popcount (to_binary_N <span class="mi">0</span>) +
popcount (to_binary_N <span class="mi">1</span>) =
S n +
<span class="mi">2</span> * (total_popcount n + popcount (to_binary_N <span class="mi">0</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1d"><span class="nb">subst</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat <span class="mi">0</span> = <span class="mi">0</span>%N</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * <span class="mi">0</span>) = <span class="mi">0</span> + <span class="mi">2</span> * total_popcount <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">0</span> + <span class="mi">2</span> * total_popcount <span class="mi">0</span> + popcount (to_binary_N <span class="mi">0</span>) +
popcount (to_binary_N <span class="mi">1</span>) =
<span class="mi">1</span> + <span class="mi">2</span> * (total_popcount <span class="mi">0</span> + popcount (to_binary_N <span class="mi">0</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n) +
popcount (to_binary_N (N.pos x~<span class="mi">0</span>)) +
popcount (to_binary_N (N.pos x~<span class="mi">1</span>)) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_N (N.pos x)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk1f"><span class="nb">rewrite</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_N (N.pos x~<span class="mi">0</span>)) +
popcount (to_binary_N (N.pos x~<span class="mi">1</span>)) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_N (N.pos x)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk20"><span class="nb">unfold</span> to_binary_N.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x~<span class="mi">0</span>) +
popcount (to_binary_positive x~<span class="mi">1</span>) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk21"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="nb">simpl</span>; <span class="bp">reflexivity</span>) : to_binary_positive x~<span class="mi">0</span> = _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x ++ [false]) +
popcount (to_binary_positive x~<span class="mi">1</span>) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk22"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="nb">simpl</span>; <span class="bp">reflexivity</span>) : to_binary_positive x~<span class="mi">1</span> = _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x ++ [false]) +
popcount (to_binary_positive x ++ [true]) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk23"><span class="nb">assert</span> (h1 : <span class="kr">forall</span> <span class="nv">v</span>, popcount (v ++ [false]) = popcount v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk24" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk24"><hr></label><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x ++ [false]) +
popcount (to_binary_positive x ++ [true]) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk25">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk26"><span class="nb">clear</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk27"><span class="nb">intro</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>v</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount (v ++ [false]) = popcount v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk28"><span class="nb">induction</span> v <span class="kr">as</span> [| head tail IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount ([] ++ [false]) = popcount []</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [false]) = popcount tail</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk29"><hr></label><div class="goal-conclusion">popcount ((head :: tail) ++ [false]) =
popcount (head :: tail)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount ([] ++ [false]) = popcount []</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [false]) = popcount tail</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount ((head :: tail) ++ [false]) =
popcount (head :: tail)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2c"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [false]) = popcount tail</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> head
 <span class="kr">then</span> S (popcount (tail ++ [false]))
 <span class="kr">else</span> popcount (tail ++ [false])) =
(<span class="kr">if</span> head <span class="kr">then</span> S (popcount tail) <span class="kr">else</span> popcount tail)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2d"><span class="nb">rewrite</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [false]) = popcount tail</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> head <span class="kr">then</span> S (popcount tail) <span class="kr">else</span> popcount tail) =
(<span class="kr">if</span> head <span class="kr">then</span> S (popcount tail) <span class="kr">else</span> popcount tail)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2e">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x ++ [false]) +
popcount (to_binary_positive x ++ [true]) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk2f"><span class="nb">rewrite</span> h1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x) +
popcount (to_binary_positive x ++ [true]) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk30"><span class="nb">assert</span> (h2 : <span class="kr">forall</span> <span class="nv">v</span>, popcount (v ++ [true]) = S (popcount v)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [true]) = S (popcount v)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk31" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [true]) = S (popcount v)</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk31"><hr></label><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x) +
popcount (to_binary_positive x ++ [true]) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk32">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [true]) = S (popcount v)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk33"><span class="nb">clear</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [true]) = S (popcount v)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk34"><span class="nb">intro</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>v</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount (v ++ [true]) = S (popcount v)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk35"><span class="nb">induction</span> v <span class="kr">as</span> [| head tail IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount ([] ++ [true]) = S (popcount [])</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CountingBits-v-chk36" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [true]) = S (popcount tail)</span></span></span><br></div><label class="goal-separator" for="CountingBits-v-chk36"><hr></label><div class="goal-conclusion">popcount ((head :: tail) ++ [true]) =
S (popcount (head :: tail))</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk37">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount ([] ++ [true]) = S (popcount [])</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk38">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [true]) = S (popcount tail)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">popcount ((head :: tail) ++ [true]) =
S (popcount (head :: tail))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk39"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [true]) = S (popcount tail)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> head
 <span class="kr">then</span> S (popcount (tail ++ [true]))
 <span class="kr">else</span> popcount (tail ++ [true])) =
S (<span class="kr">if</span> head <span class="kr">then</span> S (popcount tail) <span class="kr">else</span> popcount tail)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3a"><span class="nb">rewrite</span> IH.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>head</var><span class="hyp-type"><b>: </b><span>bool</span></span></span><br><span><var>tail</var><span class="hyp-type"><b>: </b><span>list bool</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>popcount (tail ++ [true]) = S (popcount tail)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> head
 <span class="kr">then</span> S (S (popcount tail))
 <span class="kr">else</span> S (popcount tail)) =
S (<span class="kr">if</span> head <span class="kr">then</span> S (popcount tail) <span class="kr">else</span> popcount tail)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> head; <span class="bp">lia</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [true]) = S (popcount v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x) +
popcount (to_binary_positive x ++ [true]) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3c"><span class="nb">rewrite</span> h2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span>total_popcount (<span class="mi">2</span> * n) = n + <span class="mi">2</span> * total_popcount n</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>positive</span></span></span><br><span><var>hX</var><span class="hyp-type"><b>: </b><span>N.of_nat n = N.pos x</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [false]) = popcount v</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : list bool,
popcount (v ++ [true]) = S (popcount v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">n + <span class="mi">2</span> * total_popcount n +
popcount (to_binary_positive x) +
S (popcount (to_binary_positive x)) =
S n +
<span class="mi">2</span> *
(total_popcount n + popcount (to_binary_positive x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* Hypothesis 2: H_odd (placeholder proof) *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3d"><span class="kn">Lemma</span> <span class="nf">H_odd</span> : <span class="kr">forall</span> <span class="nv">n</span> : nat, total_popcount (<span class="mi">2</span> * n + <span class="mi">1</span>) = total_popcount (<span class="mi">2</span> * n) + popcount (to_binary (<span class="mi">2</span> * n)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat,
total_popcount (<span class="mi">2</span> * n + <span class="mi">1</span>) =
total_popcount (<span class="mi">2</span> * n) + popcount (to_binary (<span class="mi">2</span> * n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat,
total_popcount (<span class="mi">2</span> * n + <span class="mi">1</span>) =
total_popcount (<span class="mi">2</span> * n) + popcount (to_binary (<span class="mi">2</span> * n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk3f"><span class="nb">intro</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (<span class="mi">2</span> * n + <span class="mi">1</span>) =
total_popcount (<span class="mi">2</span> * n) + popcount (to_binary (<span class="mi">2</span> * n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CountingBits-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="CountingBits-v-chk40"><span class="nb">rewrite</span> (<span class="kp">ltac</span>:(<span class="bp">lia</span>) : <span class="mi">2</span> * n + <span class="mi">1</span> = S (<span class="mi">2</span> * n)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">total_popcount (S (<span class="mi">2</span> * n)) =
total_popcount (<span class="mi">2</span> * n) + popcount (to_binary (<span class="mi">2</span> * n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span></pre>
    </article>
  </body>
</html>
